{"version":3,"file":"static/js/654.6a0794a0.chunk.js","mappings":"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","sources":["components/Admin/PaymentCalendar.js","components/layouts/AdminLayout.js","components/Admin/Products/ProductForm.js","components/common/Modal.js","components/Admin/Products/ProductList.js","components/Admin/Packages/PackageForm.js","components/Admin/Packages/PackageList.js","components/Admin/Customers/CustomerTable.js","components/Admin/Resellers/ResellerTable.js","components/common/PaymentConfirmationModal.js","components/Admin/Payments/ExportAllFilterModal.js","components/Admin/Payments/PaymentConfirmation.js","components/Admin/AdminPanel.js"],"sourcesContent":["import React, { useState } from \"react\";\r\n\r\nfunction PaymentCalendar({ startDate, months, paymentMethod, onConfirm }) {\r\n\tconst [selectedDates, setSelectedDates] = useState([]);\r\n\r\n\t// Helper functions\r\n\tconst addDays = (date, days) => {\r\n\t\tconst result = new Date(date);\r\n\t\tresult.setDate(result.getDate() + days);\r\n\t\treturn result;\r\n\t};\r\n\r\n\tconst generateCalendar = () => {\r\n\t\tconst calendar = [];\r\n\t\tconst start = new Date(startDate);\r\n\r\n\t\tfor (let m = 0; m < months; m++) {\r\n\t\t\tconst currentMonth = new Date(\r\n\t\t\t\tstart.getFullYear(),\r\n\t\t\t\tstart.getMonth() + m,\r\n\t\t\t\t1\r\n\t\t\t);\r\n\t\t\tconst monthData = {\r\n\t\t\t\tmonth: currentMonth,\r\n\t\t\t\tmonthName: currentMonth.toLocaleString(\"default\", { month: \"long\" }),\r\n\t\t\t\tyear: currentMonth.getFullYear(),\r\n\t\t\t\tweeks: [],\r\n\t\t\t\tdays: [],\r\n\t\t\t};\r\n\r\n\t\t\tif (paymentMethod === \"weekly\") {\r\n\t\t\t\tlet currentWeekStart = new Date(currentMonth);\r\n\t\t\t\twhile (currentWeekStart.getMonth() === currentMonth.getMonth()) {\r\n\t\t\t\t\tmonthData.weeks.push(new Date(currentWeekStart));\r\n\t\t\t\t\tcurrentWeekStart = addDays(currentWeekStart, 7);\r\n\t\t\t\t}\r\n\t\t\t} else if (paymentMethod === \"daily\") {\r\n\t\t\t\tconst daysInMonth = new Date(\r\n\t\t\t\t\tcurrentMonth.getFullYear(),\r\n\t\t\t\t\tcurrentMonth.getMonth() + 1,\r\n\t\t\t\t\t0\r\n\t\t\t\t).getDate();\r\n\r\n\t\t\t\tfor (let d = 1; d <= daysInMonth; d++) {\r\n\t\t\t\t\tmonthData.days.push(\r\n\t\t\t\t\t\tnew Date(currentMonth.getFullYear(), currentMonth.getMonth(), d)\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tcalendar.push(monthData);\r\n\t\t}\r\n\r\n\t\treturn calendar;\r\n\t};\r\n\r\n\tconst calendar = generateCalendar();\r\n\r\n\tconst toggleDate = (date) => {\r\n\t\tconst dateStr = date.toISOString().split(\"T\")[0];\r\n\t\tsetSelectedDates((prev) =>\r\n\t\t\tprev.includes(dateStr)\r\n\t\t\t\t? prev.filter((d) => d !== dateStr)\r\n\t\t\t\t: [...prev, dateStr]\r\n\t\t);\r\n\t};\r\n\r\n\tconst handleConfirm = () => {\r\n\t\tif (selectedDates.length === 0) {\r\n\t\t\talert(\"Please select at least one payment date\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tonConfirm(selectedDates);\r\n\t\tsetSelectedDates([]);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"p-4 border rounded-lg bg-white shadow-sm\">\r\n\t\t\t{calendar.map(({ month, monthName, year, weeks, days }, idx) => (\r\n\t\t\t\t<div key={idx} className=\"mb-6\">\r\n\t\t\t\t\t<h3 className=\"text-lg font-semibold mb-3\">\r\n\t\t\t\t\t\t{monthName} {year}\r\n\t\t\t\t\t</h3>\r\n\r\n\t\t\t\t\t{weeks.length > 0 && (\r\n\t\t\t\t\t\t<div className=\"mb-4\">\r\n\t\t\t\t\t\t\t<h4 className=\"text-sm font-medium mb-2\">Weekly Payments:</h4>\r\n\t\t\t\t\t\t\t<div className=\"flex flex-wrap gap-2\">\r\n\t\t\t\t\t\t\t\t{weeks.map((week, i) => {\r\n\t\t\t\t\t\t\t\t\tconst dateStr = week.toISOString().split(\"T\")[0];\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => toggleDate(week)}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={`px-3 py-1 rounded-md border text-sm ${\r\n\t\t\t\t\t\t\t\t\t\t\t\tselectedDates.includes(dateStr)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t? \"bg-blue-600 text-white border-blue-700\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t: \"bg-white text-gray-800 border-gray-300 hover:bg-gray-100\"\r\n\t\t\t\t\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\tWeek {i + 1}\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{days.length > 0 && (\r\n\t\t\t\t\t\t<div className=\"mb-4\">\r\n\t\t\t\t\t\t\t<h4 className=\"text-sm font-medium mb-2\">Daily Payments:</h4>\r\n\t\t\t\t\t\t\t<div className=\"grid grid-cols-7 gap-1\">\r\n\t\t\t\t\t\t\t\t{days.map((day, i) => {\r\n\t\t\t\t\t\t\t\t\tconst dateStr = day.toISOString().split(\"T\")[0];\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => toggleDate(day)}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={`p-1 rounded-md text-xs text-center ${\r\n\t\t\t\t\t\t\t\t\t\t\t\tselectedDates.includes(dateStr)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t? \"bg-blue-600 text-white\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t: \"bg-white text-gray-800 hover:bg-gray-100\"\r\n\t\t\t\t\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{day.getDate()}\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t))}\r\n\r\n\t\t\t<button\r\n\t\t\t\tonClick={handleConfirm}\r\n\t\t\t\tdisabled={selectedDates.length === 0}\r\n\t\t\t\tclassName={`mt-4 px-4 py-2 rounded-md text-white ${\r\n\t\t\t\t\tselectedDates.length > 0\r\n\t\t\t\t\t\t? \"bg-green-600 hover:bg-green-700\"\r\n\t\t\t\t\t\t: \"bg-gray-400 cursor-not-allowed\"\r\n\t\t\t\t}`}\r\n\t\t\t>\r\n\t\t\t\tConfirm {selectedDates.length} Payment\r\n\t\t\t\t{selectedDates.length !== 1 ? \"s\" : \"\"}\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default PaymentCalendar;\r\n","import React from \"react\";\r\n\r\nconst AdminLayout = ({ activeTab, setActiveTab, children }) => {\r\n\tconst tabs = [\r\n\t\t\"products\",\r\n\t\t\"packages\",\r\n\t\t\"customers\",\r\n\t\t\"resellers\",\r\n\t\t\"confirmations\",\r\n\t];\r\n\r\n\treturn (\r\n\t\t<div className=\"w-full max-h-screen bg-gray-100\">\r\n\t\t\t{/* Main Content Area */}\r\n\t\t\t<div className=\"w-full px-4 py-6\">\r\n\t\t\t\t{/* Dashboard Header */}\r\n\t\t\t\t<div className=\"mb-6\">\r\n\t\t\t\t\t<h1 className=\"text-3xl font-bold text-gray-800\">Admin Dashboard</h1>\r\n\t\t\t\t\t<div className=\"flex space-x-1 mt-2\">\r\n\t\t\t\t\t\t{tabs.map((tab) => (\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tkey={tab}\r\n\t\t\t\t\t\t\t\tclassName={`px-4 py-2 text-sm font-medium rounded-t-lg ${\r\n\t\t\t\t\t\t\t\t\tactiveTab === tab\r\n\t\t\t\t\t\t\t\t\t\t? \"bg-white text-blue-600 border-t-2 border-blue-500\"\r\n\t\t\t\t\t\t\t\t\t\t: \"bg-gray-200 text-gray-600 hover:bg-gray-300\"\r\n\t\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\t\tonClick={() => setActiveTab(tab)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{tab.charAt(0).toUpperCase() + tab.slice(1)}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{/* Full-width Content Container */}\r\n\t\t\t\t<div className=\"bg-white rounded-lg shadow p-6 w-full\">{children}</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default AdminLayout;\r\n","import React, { useState } from \"react\";\r\n\r\nconst ProductForm = ({\r\n\tnewProduct,\r\n\thandleProductChange,\r\n\tcreateProduct,\r\n\tisLoading,\r\n}) => {\r\n\tconst [isFocused, setIsFocused] = useState({\r\n\t\tname: false,\r\n\t\tprice: false,\r\n\t\tdescription: false,\r\n\t});\r\n\tconst [isSuccess, setIsSuccess] = useState(false);\r\n\r\n\t// Handler untuk input harga yang lebih baik\r\n\tconst handlePriceChange = (e) => {\r\n\t\t// Menghapus karakter non-digit\r\n\t\tconst value = e.target.value.replace(/[^\\d]/g, \"\");\r\n\r\n\t\t// Membuat event object buatan untuk digabungkan ke handleProductChange\r\n\t\tconst synthEvent = {\r\n\t\t\ttarget: {\r\n\t\t\t\tname: \"price\",\r\n\t\t\t\tvalue: value,\r\n\t\t\t},\r\n\t\t};\r\n\r\n\t\thandleProductChange(synthEvent);\r\n\t};\r\n\r\n\tconst handleSubmit = async (e) => {\r\n\t\te.preventDefault();\r\n\r\n\t\ttry {\r\n\t\t\tawait createProduct();\r\n\t\t\t// Tampilkan animasi sukses\r\n\t\t\tsetIsSuccess(true);\r\n\t\t\tsetTimeout(() => setIsSuccess(false), 2000);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"Product creation failed:\", error);\r\n\t\t}\r\n\t};\r\n\r\n\t// Format harga dengan pemisah ribuan untuk display\r\n\tconst formatPrice = (price) => {\r\n\t\treturn price.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\");\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"bg-white rounded-xl shadow-md p-6 transition-all duration-300 hover:shadow-lg\">\r\n\t\t\t<h2 className=\"text-2xl font-bold mb-6 text-gray-800 border-b pb-3\">\r\n\t\t\t\tBuat Produk Baru\r\n\t\t\t</h2>\r\n\r\n\t\t\t{isSuccess && (\r\n\t\t\t\t<div className=\"mb-4 p-3 bg-green-100 text-green-700 rounded-lg flex items-center transition-opacity duration-300\">\r\n\t\t\t\t\t<svg className=\"w-5 h-5 mr-2\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\tfillRule=\"evenodd\"\r\n\t\t\t\t\t\t\td=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\"\r\n\t\t\t\t\t\t\tclipRule=\"evenodd\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t\t<span>Produk berhasil dibuat!</span>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\r\n\t\t\t<form onSubmit={handleSubmit} className=\"space-y-5\">\r\n\t\t\t\t<div className=\"transition-all duration-200\">\r\n\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n\t\t\t\t\t\tNama Produk\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName={`relative rounded-lg overflow-hidden transition-all duration-300 ${\r\n\t\t\t\t\t\t\tisFocused.name ? \"ring-2 ring-green-500\" : \"\"\r\n\t\t\t\t\t\t}`}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\t\tvalue={newProduct.name}\r\n\t\t\t\t\t\t\tonChange={handleProductChange}\r\n\t\t\t\t\t\t\tonFocus={() => setIsFocused({ ...isFocused, name: true })}\r\n\t\t\t\t\t\t\tonBlur={() => setIsFocused({ ...isFocused, name: false })}\r\n\t\t\t\t\t\t\tclassName=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none\"\r\n\t\t\t\t\t\t\tplaceholder=\"Nama produk\"\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"transition-all duration-200\">\r\n\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n\t\t\t\t\t\tHarga\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName={`relative rounded-lg overflow-hidden transition-all duration-300 ${\r\n\t\t\t\t\t\t\tisFocused.price ? \"ring-2 ring-green-500\" : \"\"\r\n\t\t\t\t\t\t}`}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<div className=\"absolute left-0 top-0 h-full flex items-center justify-center px-3 bg-gray-100 border-r border-gray-300\">\r\n\t\t\t\t\t\t\t<span className=\"text-gray-500 font-medium\">Rp</span>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tname=\"price\"\r\n\t\t\t\t\t\t\tvalue={newProduct.price === 0 ? \"\" : newProduct.price}\r\n\t\t\t\t\t\t\tonChange={handlePriceChange}\r\n\t\t\t\t\t\t\tonFocus={() => setIsFocused({ ...isFocused, price: true })}\r\n\t\t\t\t\t\t\tonBlur={() => setIsFocused({ ...isFocused, price: false })}\r\n\t\t\t\t\t\t\tclassName=\"w-full pl-12 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none ml-11\"\r\n\t\t\t\t\t\t\tplaceholder=\"0\"\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{newProduct.price > 0 && (\r\n\t\t\t\t\t\t<p className=\"text-xs text-gray-500 mt-1\">\r\n\t\t\t\t\t\t\tHarga yang dimasukkan: Rp {formatPrice(newProduct.price)}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"transition-all duration-200\">\r\n\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n\t\t\t\t\t\tDeskripsi\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName={`relative rounded-lg overflow-hidden transition-all duration-300 ${\r\n\t\t\t\t\t\t\tisFocused.description ? \"ring-2 ring-green-500\" : \"\"\r\n\t\t\t\t\t\t}`}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\tname=\"description\"\r\n\t\t\t\t\t\t\tvalue={newProduct.description}\r\n\t\t\t\t\t\t\tonChange={handleProductChange}\r\n\t\t\t\t\t\t\tonFocus={() => setIsFocused({ ...isFocused, description: true })}\r\n\t\t\t\t\t\t\tonBlur={() => setIsFocused({ ...isFocused, description: false })}\r\n\t\t\t\t\t\t\tclassName=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none\"\r\n\t\t\t\t\t\t\trows={4}\r\n\t\t\t\t\t\t\tplaceholder=\"Deskripsi produk\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<button\r\n\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\tdisabled={isLoading}\r\n\t\t\t\t\tclassName={`w-full mt-4 py-3 rounded-lg font-medium transition-all duration-300 transform ${\r\n\t\t\t\t\t\tisLoading\r\n\t\t\t\t\t\t\t? \"bg-gray-400 text-white cursor-not-allowed opacity-70\"\r\n\t\t\t\t\t\t\t: \"bg-green-600 text-white hover:bg-green-700 hover:shadow-md active:scale-98\"\r\n\t\t\t\t\t}`}\r\n\t\t\t\t>\r\n\t\t\t\t\t{isLoading ? (\r\n\t\t\t\t\t\t<div className=\"flex items-center justify-center\">\r\n\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\tclassName=\"animate-spin h-5 w-5 mr-2 text-white\"\r\n\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<circle\r\n\t\t\t\t\t\t\t\t\tclassName=\"opacity-25\"\r\n\t\t\t\t\t\t\t\t\tcx=\"12\"\r\n\t\t\t\t\t\t\t\t\tcy=\"12\"\r\n\t\t\t\t\t\t\t\t\tr=\"10\"\r\n\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\tstrokeWidth=\"4\"\r\n\t\t\t\t\t\t\t\t></circle>\r\n\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\tclassName=\"opacity-75\"\r\n\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\td=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\r\n\t\t\t\t\t\t\t\t></path>\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t<span>Sedang Membuat...</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\"Buat Produk\"\r\n\t\t\t\t\t)}\r\n\t\t\t\t</button>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default ProductForm;\r\n","import React from \"react\";\r\n\r\nconst Modal = ({ isOpen, title, children, onClose, size = \"md\" }) => {\r\n\tif (!isOpen) return null;\r\n\r\n\tconst sizeClasses = {\r\n\t\tsm: \"max-w-sm\",\r\n\t\tmd: \"max-w-md\",\r\n\t\tlg: \"max-w-2xl\",\r\n\t\txl: \"max-w-4xl\",\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"fixed inset-0 bg-black bg-opacity-40 flex justify-center items-center z-50 backdrop-blur-sm transition-opacity duration-300 p-4\">\r\n\t\t\t<div\r\n\t\t\t\tclassName={`bg-white rounded-2xl shadow-xl w-full ${sizeClasses[size]} transform transition-all duration-300 scale-100 animate-fadeIn max-h-[90vh] flex flex-col`}\r\n\t\t\t\tonClick={(e) => e.stopPropagation()}\r\n\t\t\t>\r\n\t\t\t\t{/* Header - Fixed */}\r\n\t\t\t\t<div className=\"flex justify-between items-center p-6 pb-4 border-b border-gray-100 flex-shrink-0\">\r\n\t\t\t\t\t<h3 className=\"text-lg font-bold text-gray-800\">{title}</h3>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tonClick={onClose}\r\n\t\t\t\t\t\tclassName=\"text-gray-400 hover:text-gray-600 transition-colors\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\tclassName=\"w-6 h-6\"\r\n\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\td=\"M6 18L18 6M6 6l12 12\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{/* Content - Scrollable */}\r\n\t\t\t\t<div className=\"text-sm text-gray-700 p-6 pt-4 overflow-y-auto flex-1\">\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Modal;\r\n","import React, { useState } from \"react\";\r\nimport Modal from \"../../common/Modal\";\r\n\r\nconst ProductList = ({\r\n\tproducts,\r\n\tonProductSelect,\r\n\tselectedProductId,\r\n\tisLoading,\r\n\terror,\r\n\tonRefresh,\r\n\tonEdit,\r\n\tonDelete,\r\n}) => {\r\n\tconst [editProduct, setEditProduct] = useState(null);\r\n\tconst [showEditModal, setShowEditModal] = useState(false);\r\n\tconst [showDeleteModal, setShowDeleteModal] = useState(false);\r\n\tconst [deleteProductId, setDeleteProductId] = useState(null);\r\n\tconst [formData, setFormData] = useState({\r\n\t\tname: \"\",\r\n\t\tprice: 0,\r\n\t\tdescription: \"\",\r\n\t});\r\n\tconst [formLoading, setFormLoading] = useState(false);\r\n\tconst [formError, setFormError] = useState(null);\r\n\tconst [notification, setNotification] = useState(null);\r\n\r\n\tconst openEditModal = (product) => {\r\n\t\tsetEditProduct(product);\r\n\t\tsetFormData({\r\n\t\t\tname: product.name,\r\n\t\t\tprice: product.price,\r\n\t\t\tdescription: product.description || \"\",\r\n\t\t});\r\n\t\tsetFormError(null);\r\n\t\tsetShowEditModal(true);\r\n\t};\r\n\r\n\tconst closeEditModal = () => {\r\n\t\tsetShowEditModal(false);\r\n\t\tsetEditProduct(null);\r\n\t\tsetFormError(null);\r\n\t};\r\n\r\n\tconst openDeleteModal = (productId) => {\r\n\t\tsetDeleteProductId(productId);\r\n\t\tsetShowDeleteModal(true);\r\n\t};\r\n\r\n\tconst closeDeleteModal = () => {\r\n\t\tsetShowDeleteModal(false);\r\n\t\tsetDeleteProductId(null);\r\n\t};\r\n\r\n\tconst handleFormChange = (e) => {\r\n\t\tconst { name, value } = e.target;\r\n\t\tsetFormData((prev) => ({\r\n\t\t\t...prev,\r\n\t\t\t[name]: name === \"price\" ? parseFloat(value) || 0 : value,\r\n\t\t}));\r\n\t};\r\n\r\n\tconst handleFormSubmit = async (e) => {\r\n\t\te.preventDefault();\r\n\t\tsetFormLoading(true);\r\n\t\tsetFormError(null);\r\n\t\ttry {\r\n\t\t\tawait onEdit({ ...editProduct, ...formData });\r\n\t\t\tsetNotification(\"Produk berhasil diperbarui\");\r\n\t\t\tcloseEditModal();\r\n\t\t} catch (err) {\r\n\t\t\tsetFormError(\"Gagal memperbarui produk: \" + err.message);\r\n\t\t} finally {\r\n\t\t\tsetFormLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleDeleteConfirm = async () => {\r\n\t\tif (!deleteProductId) return;\r\n\t\ttry {\r\n\t\t\tawait onDelete(deleteProductId);\r\n\t\t\tsetNotification(\"Produk berhasil dihapus\");\r\n\t\t} catch (err) {\r\n\t\t\tsetNotification(\"Gagal menghapus produk: \" + err.message);\r\n\t\t} finally {\r\n\t\t\tcloseDeleteModal();\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"bg-white rounded-xl shadow-md p-6 border border-gray-100\">\r\n\t\t\t<div className=\"flex justify-between items-center mb-6\">\r\n\t\t\t\t<h2 className=\"text-xl font-semibold text-gray-800 flex items-center\">\r\n\t\t\t\t\t<span className=\"inline-block w-1 h-6 bg-indigo-500 rounded-full mr-2\"></span>\r\n\t\t\t\t\tProduk Tersedia\r\n\t\t\t\t</h2>\r\n\t\t\t\t<div className=\"flex items-center space-x-3\">\r\n\t\t\t\t\t{!isLoading && (\r\n\t\t\t\t\t\t<span className=\"bg-indigo-50 text-indigo-700 px-3 py-1 rounded-full text-sm font-medium shadow-sm\">\r\n\t\t\t\t\t\t\t{products.length} items\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tonClick={onRefresh}\r\n\t\t\t\t\t\tdisabled={isLoading}\r\n\t\t\t\t\t\tclassName=\"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-1.5 rounded-lg text-sm transition flex items-center gap-1 disabled:opacity-50\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\tclassName=\"h-4 w-4\"\r\n\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\td=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\tRefresh\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t{notification && (\r\n\t\t\t\t<div className=\"bg-green-50 border-l-4 border-green-500 text-green-800 px-4 py-3 rounded-md mb-4 flex justify-between items-center shadow-sm\">\r\n\t\t\t\t\t<span className=\"flex items-center\">\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\tclassName=\"h-5 w-5 mr-2\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\tfillRule=\"evenodd\"\r\n\t\t\t\t\t\t\t\td=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\"\r\n\t\t\t\t\t\t\t\tclipRule=\"evenodd\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t{notification}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tonClick={() => setNotification(null)}\r\n\t\t\t\t\t\tclassName=\"text-sm font-bold hover:bg-green-100 rounded-full h-6 w-6 flex items-center justify-center\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t×\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\r\n\t\t\t{isLoading ? (\r\n\t\t\t\t<div className=\"flex flex-col items-center justify-center py-12\">\r\n\t\t\t\t\t<div className=\"animate-spin h-10 w-10 border-4 border-indigo-500 border-t-transparent rounded-full\"></div>\r\n\t\t\t\t\t<p className=\"text-gray-500 mt-3\">Memuat produk...</p>\r\n\t\t\t\t</div>\r\n\t\t\t) : error ? (\r\n\t\t\t\t<div className=\"bg-red-50 border-l-4 border-red-500 text-red-600 px-4 py-3 rounded-md shadow-sm\">\r\n\t\t\t\t\t<div className=\"flex items-center\">\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\tclassName=\"h-5 w-5 mr-2\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\tfillRule=\"evenodd\"\r\n\t\t\t\t\t\t\t\td=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z\"\r\n\t\t\t\t\t\t\t\tclipRule=\"evenodd\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t{error}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tonClick={onRefresh}\r\n\t\t\t\t\t\tclassName=\"mt-2 ml-7 text-red-700 hover:text-red-800 underline font-medium flex items-center gap-1\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\tclassName=\"h-3 w-3\"\r\n\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\td=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\tCoba Lagi\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t) : products.length === 0 ? (\r\n\t\t\t\t<div className=\"text-center py-12 bg-gray-50 rounded-lg border border-dashed border-gray-300\">\r\n\t\t\t\t\t<svg\r\n\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\tclassName=\"h-12 w-12 mx-auto text-gray-400 mb-3\"\r\n\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\td=\"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t\t<p className=\"mb-3 text-gray-500\">Belum ada produk ditambahkan.</p>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName=\"inline-flex items-center text-indigo-600 hover:text-indigo-800 text-sm font-medium gap-1\"\r\n\t\t\t\t\t\tonClick={onRefresh}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\tclassName=\"h-4 w-4\"\r\n\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\td=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\tRefresh Data\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t) : (\r\n\t\t\t\t<div className=\"space-y-3 max-h-[500px] overflow-y-auto pr-1 custom-scroll\">\r\n\t\t\t\t\t{products.map((product) => (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tkey={product.id}\r\n\t\t\t\t\t\t\tclassName={`border rounded-lg p-4 transition-all duration-200 cursor-pointer hover:border-indigo-200 ${\r\n\t\t\t\t\t\t\t\tselectedProductId === product.id\r\n\t\t\t\t\t\t\t\t\t? \"ring-2 ring-indigo-500 bg-indigo-50/50 shadow-md\"\r\n\t\t\t\t\t\t\t\t\t: \"bg-white hover:shadow-md\"\r\n\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\tonClick={() => onProductSelect?.(product)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<div className=\"flex justify-between gap-4 items-start\">\r\n\t\t\t\t\t\t\t\t<div className=\"flex-1\">\r\n\t\t\t\t\t\t\t\t\t<h3 className=\"font-semibold text-gray-800\">\r\n\t\t\t\t\t\t\t\t\t\t{product.name}\r\n\t\t\t\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t\t\t\t<p className=\"text-gray-600 text-sm line-clamp-2 mt-1\">\r\n\t\t\t\t\t\t\t\t\t\t{product.description || \"Tidak ada deskripsi\"}\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"text-right\">\r\n\t\t\t\t\t\t\t\t\t<p className=\"text-indigo-600 font-medium bg-indigo-50 inline-block px-2 py-0.5 rounded-md mb-1\">\r\n\t\t\t\t\t\t\t\t\t\tRp{product.price.toLocaleString(\"id-ID\")}\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-gray-400 mb-2\">ID: {product.id}</p>\r\n\t\t\t\t\t\t\t\t\t<div className=\"flex justify-end space-x-2\">\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\t\t\t\t\t\topenEditModal(product);\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"bg-amber-100 text-amber-600 hover:bg-amber-200 hover:text-amber-700 px-3 py-1 rounded text-xs font-medium transition-colors flex items-center gap-1 shadow-sm border border-amber-200\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-3 w-3\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t\tEdit\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\t\t\t\t\t\topenDeleteModal(product.id);\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"bg-red-100 text-red-600 hover:bg-red-200 hover:text-red-700 px-3 py-1 rounded text-xs font-medium transition-colors flex items-center gap-1 shadow-sm border border-red-200\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-3 w-3\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t\tDelete\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\r\n\t\t\t{/* Edit Modal */}\r\n\t\t\t<Modal\r\n\t\t\t\tisOpen={showEditModal}\r\n\t\t\t\ttitle=\"Edit Produk\"\r\n\t\t\t\tonClose={closeEditModal}\r\n\t\t\t>\r\n\t\t\t\t<form onSubmit={handleFormSubmit} className=\"space-y-4\">\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n\t\t\t\t\t\t\tNama Produk\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\t\tvalue={formData.name}\r\n\t\t\t\t\t\t\tonChange={handleFormChange}\r\n\t\t\t\t\t\t\tclassName=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\r\n\t\t\t\t\t\t\tplaceholder=\"Nama produk\"\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n\t\t\t\t\t\t\tHarga\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<div className=\"relative\">\r\n\t\t\t\t\t\t\t<span className=\"absolute left-3 top-2\">Rp</span>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\tname=\"price\"\r\n\t\t\t\t\t\t\t\tvalue={formData.price}\r\n\t\t\t\t\t\t\t\tonChange={handleFormChange}\r\n\t\t\t\t\t\t\t\tclassName=\"w-full pl-8 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"0\"\r\n\t\t\t\t\t\t\t\tmin=\"0\"\r\n\t\t\t\t\t\t\t\tstep=\"any\"\r\n\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n\t\t\t\t\t\t\tDeskripsi\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\tname=\"description\"\r\n\t\t\t\t\t\t\tvalue={formData.description}\r\n\t\t\t\t\t\t\tonChange={handleFormChange}\r\n\t\t\t\t\t\t\tclassName=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\r\n\t\t\t\t\t\t\trows={3}\r\n\t\t\t\t\t\t\tplaceholder=\"Deskripsi produk\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{formError && (\r\n\t\t\t\t\t\t<div className=\"bg-red-50 border-l-4 border-red-500 text-red-600 px-4 py-2 rounded\">\r\n\t\t\t\t\t\t\t<div className=\"flex items-center\">\r\n\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"h-4 w-4 mr-2\"\r\n\t\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\tfillRule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\td=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z\"\r\n\t\t\t\t\t\t\t\t\t\tclipRule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t{formError}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<div className=\"flex justify-end space-x-2 pt-2\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\tonClick={closeEditModal}\r\n\t\t\t\t\t\t\tclassName=\"px-4 py-2 rounded-md bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tBatal\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\tdisabled={formLoading}\r\n\t\t\t\t\t\t\tclassName=\"px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 shadow-sm flex items-center gap-1\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{formLoading ? (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<span className=\"inline-block h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin\"></span>\r\n\t\t\t\t\t\t\t\t\t<span>Menyimpan...</span>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"h-4 w-4\"\r\n\t\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\t\t\td=\"M5 13l4 4L19 7\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t<span>Simpan</span>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</Modal>\r\n\r\n\t\t\t{/* Delete Confirmation Modal */}\r\n\t\t\t<Modal\r\n\t\t\t\tisOpen={showDeleteModal}\r\n\t\t\t\ttitle=\"Konfirmasi Hapus\"\r\n\t\t\t\tonClose={closeDeleteModal}\r\n\t\t\t>\r\n\t\t\t\t<div className=\"p-1\">\r\n\t\t\t\t\t<div className=\"flex items-center mb-4 text-red-600\">\r\n\t\t\t\t\t\t<div className=\"bg-red-100 p-2 rounded-full mr-3\">\r\n\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\tclassName=\"h-6 w-6\"\r\n\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\td=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<p className=\"font-medium\">\r\n\t\t\t\t\t\t\tApakah Anda yakin ingin menghapus produk ini?\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<p className=\"text-gray-500 text-sm ml-11 mb-4\">\r\n\t\t\t\t\t\tTindakan ini tidak dapat dibatalkan dan akan menghapus produk secara\r\n\t\t\t\t\t\tpermanen.\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<div className=\"flex justify-end space-x-2 mt-4\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={closeDeleteModal}\r\n\t\t\t\t\t\t\tclassName=\"px-4 py-2 rounded-md bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tBatal\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={handleDeleteConfirm}\r\n\t\t\t\t\t\t\tclassName=\"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 shadow-sm flex items-center gap-1\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\tclassName=\"h-4 w-4\"\r\n\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\td=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\tHapus\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</Modal>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default ProductList;\r\n","import React, { useState, useMemo } from \"react\";\r\n\r\nconst PackageForm = ({\r\n\tnewPackage,\r\n\tproducts,\r\n\thandlePackageChange,\r\n\ttoggleProductInPackage,\r\n\tcalculatePackageTotal,\r\n\tcreatePackage,\r\n\tisLoading,\r\n}) => {\r\n\t// States for search and pagination\r\n\tconst [searchTerm, setSearchTerm] = useState(\"\");\r\n\tconst [currentPage, setCurrentPage] = useState(1);\r\n\tconst [isAnimating, setIsAnimating] = useState(false);\r\n\tconst [showValidation, setShowValidation] = useState(false);\r\n\tconst productsPerPage = 6;\r\n\r\n\t// Filter products based on search term\r\n\tconst filteredProducts = useMemo(() => {\r\n\t\treturn products.filter(\r\n\t\t\t(product) =>\r\n\t\t\t\tproduct.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n\t\t\t\tproduct.price.toString().includes(searchTerm)\r\n\t\t);\r\n\t}, [products, searchTerm]);\r\n\r\n\t// Calculate pagination\r\n\tconst totalPages = Math.ceil(filteredProducts.length / productsPerPage);\r\n\tconst startIndex = (currentPage - 1) * productsPerPage;\r\n\tconst endIndex = startIndex + productsPerPage;\r\n\tconst currentProducts = filteredProducts.slice(startIndex, endIndex);\r\n\r\n\t// Form validation\r\n\tconst validateForm = () => {\r\n\t\tconst errors = [];\r\n\r\n\t\tif (!newPackage.name || newPackage.name.trim() === \"\") {\r\n\t\t\terrors.push(\"Nama Paket\");\r\n\t\t}\r\n\t\tif (!newPackage.description || newPackage.description.trim() === \"\") {\r\n\t\t\terrors.push(\"Deskripsi Paket\");\r\n\t\t}\r\n\t\tif (!newPackage.payment_amount || newPackage.payment_amount <= 0) {\r\n\t\t\terrors.push(\"Pembayaran Satu Kali\");\r\n\t\t}\r\n\t\tif (!newPackage.payment_months || newPackage.payment_months <= 0) {\r\n\t\t\terrors.push(\"Periode (Bulan)\");\r\n\t\t}\r\n\t\tif (!newPackage.productIds || newPackage.productIds.length === 0) {\r\n\t\t\terrors.push(\"Pilih minimal 1 produk\");\r\n\t\t}\r\n\r\n\t\treturn errors;\r\n\t};\r\n\r\n\tconst formErrors = validateForm();\r\n\tconst isFormValid = formErrors.length === 0;\r\n\r\n\t// Handle page change with animation\r\n\tconst handlePageChange = (newPage) => {\r\n\t\tif (newPage >= 1 && newPage <= totalPages && newPage !== currentPage) {\r\n\t\t\tsetIsAnimating(true);\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tsetCurrentPage(newPage);\r\n\t\t\t\tsetIsAnimating(false);\r\n\t\t\t}, 150);\r\n\t\t}\r\n\t};\r\n\r\n\t// Reset pagination when search changes\r\n\tconst handleSearchChange = (e) => {\r\n\t\tsetSearchTerm(e.target.value);\r\n\t\tsetCurrentPage(1);\r\n\t};\r\n\r\n\t// Handle payment amount change to prevent auto-calculation\r\n\tconst handlePaymentAmountChange = (e) => {\r\n\t\tconst event = {\r\n\t\t\ttarget: {\r\n\t\t\t\tname: \"payment_amount\",\r\n\t\t\t\tvalue: e.target.value,\r\n\t\t\t},\r\n\t\t};\r\n\t\thandlePackageChange(event);\r\n\t\t// Hide validation when user starts typing\r\n\t\tif (showValidation) {\r\n\t\t\tsetShowValidation(false);\r\n\t\t}\r\n\t};\r\n\r\n\t// Handle other package changes normally\r\n\tconst handleOtherPackageChange = (e) => {\r\n\t\tif (e.target.name !== \"payment_amount\") {\r\n\t\t\thandlePackageChange(e);\r\n\t\t}\r\n\t\t// Hide validation when user starts typing\r\n\t\tif (showValidation) {\r\n\t\t\tsetShowValidation(false);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleSubmit = (e) => {\r\n\t\te.preventDefault();\r\n\r\n\t\tif (!isFormValid) {\r\n\t\t\tsetShowValidation(true);\r\n\t\t\t// Scroll to top to show validation message\r\n\t\t\twindow.scrollTo({ top: 0, behavior: \"smooth\" });\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsetShowValidation(false);\r\n\t\tcreatePackage();\r\n\t};\r\n\r\n\t// Helper function to check if field has error\r\n\tconst hasFieldError = (fieldName) => {\r\n\t\tif (!showValidation) return false;\r\n\r\n\t\tswitch (fieldName) {\r\n\t\t\tcase \"name\":\r\n\t\t\t\treturn !newPackage.name || newPackage.name.trim() === \"\";\r\n\t\t\tcase \"description\":\r\n\t\t\t\treturn !newPackage.description || newPackage.description.trim() === \"\";\r\n\t\t\tcase \"payment_amount\":\r\n\t\t\t\treturn !newPackage.payment_amount || newPackage.payment_amount <= 0;\r\n\t\t\tcase \"payment_months\":\r\n\t\t\t\treturn !newPackage.payment_months || newPackage.payment_months <= 0;\r\n\t\t\tcase \"products\":\r\n\t\t\t\treturn !newPackage.productIds || newPackage.productIds.length === 0;\r\n\t\t\tdefault:\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<form onSubmit={handleSubmit} className=\"space-y-4\">\r\n\t\t\t<div className=\"bg-white rounded-xl shadow-md p-6\">\r\n\t\t\t\t<h2 className=\"text-2xl font-bold mb-6 text-gray-800\">\r\n\t\t\t\t\tBuat Paket Baru\r\n\t\t\t\t</h2>\r\n\r\n\t\t\t\t{/* Validation Alert */}\r\n\t\t\t\t{showValidation && !isFormValid && (\r\n\t\t\t\t\t<div className=\"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg\">\r\n\t\t\t\t\t\t<div className=\"flex items-start\">\r\n\t\t\t\t\t\t\t<div className=\"flex-shrink-0\">\r\n\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\tclassName=\"h-5 w-5 text-red-400\"\r\n\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\t\td=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.232 15.5c-.77.833.192 2.5 1.732 2.5z\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"ml-3\">\r\n\t\t\t\t\t\t\t\t<h3 className=\"text-sm font-medium text-red-800\">\r\n\t\t\t\t\t\t\t\t\tMohon lengkapi form berikut:\r\n\t\t\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t\t\t<ul className=\"mt-2 text-sm text-red-700 list-disc list-inside\">\r\n\t\t\t\t\t\t\t\t\t{formErrors.map((error, index) => (\r\n\t\t\t\t\t\t\t\t\t\t<li key={index}>{error}</li>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t<div className=\"space-y-4\">\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n\t\t\t\t\t\t\tNama Paket <span className=\"text-red-500\">*</span>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\t\tvalue={newPackage.name}\r\n\t\t\t\t\t\t\tonChange={handleOtherPackageChange}\r\n\t\t\t\t\t\t\tclassName={`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ${\r\n\t\t\t\t\t\t\t\thasFieldError(\"name\")\r\n\t\t\t\t\t\t\t\t\t? \"border-red-300 bg-red-50\"\r\n\t\t\t\t\t\t\t\t\t: \"border-gray-300\"\r\n\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\tplaceholder=\"Masukkan nama paket\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t{hasFieldError(\"name\") && (\r\n\t\t\t\t\t\t\t<p className=\"mt-1 text-sm text-red-600\">\r\n\t\t\t\t\t\t\t\tNama paket wajib diisi\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n\t\t\t\t\t\t\tDeskripsi Paket <span className=\"text-red-500\">*</span>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\tname=\"description\"\r\n\t\t\t\t\t\t\tvalue={newPackage.description}\r\n\t\t\t\t\t\t\tonChange={handleOtherPackageChange}\r\n\t\t\t\t\t\t\tclassName={`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ${\r\n\t\t\t\t\t\t\t\thasFieldError(\"description\")\r\n\t\t\t\t\t\t\t\t\t? \"border-red-300 bg-red-50\"\r\n\t\t\t\t\t\t\t\t\t: \"border-gray-300\"\r\n\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\trows={3}\r\n\t\t\t\t\t\t\tplaceholder=\"Masukkan deskripsi paket\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t{hasFieldError(\"description\") && (\r\n\t\t\t\t\t\t\t<p className=\"mt-1 text-sm text-red-600\">\r\n\t\t\t\t\t\t\t\tDeskripsi paket wajib diisi\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"grid grid-cols-3 gap-4\">\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n\t\t\t\t\t\t\t\tTipe Pembayaran\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\t\tname=\"payment_method\"\r\n\t\t\t\t\t\t\t\tvalue={newPackage.payment_method}\r\n\t\t\t\t\t\t\t\tonChange={handleOtherPackageChange}\r\n\t\t\t\t\t\t\t\tclassName=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<option value=\"daily\">Daily</option>\r\n\t\t\t\t\t\t\t\t<option value=\"weekly\">Weekly</option>\r\n\t\t\t\t\t\t\t\t<option value=\"monthly\">Monthly</option>\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n\t\t\t\t\t\t\t\tPembayaran Satu Kali <span className=\"text-red-500\">*</span>\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<div className=\"relative\">\r\n\t\t\t\t\t\t\t\t<span className=\"absolute left-3 top-2 text-gray-500\">Rp</span>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\tname=\"payment_amount\"\r\n\t\t\t\t\t\t\t\t\tvalue={newPackage.payment_amount}\r\n\t\t\t\t\t\t\t\t\tonChange={handlePaymentAmountChange}\r\n\t\t\t\t\t\t\t\t\tclassName={`w-full pl-8 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ${\r\n\t\t\t\t\t\t\t\t\t\thasFieldError(\"payment_amount\")\r\n\t\t\t\t\t\t\t\t\t\t\t? \"border-red-300 bg-red-50\"\r\n\t\t\t\t\t\t\t\t\t\t\t: \"border-gray-300\"\r\n\t\t\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"0\"\r\n\t\t\t\t\t\t\t\t\tmin=\"1\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{hasFieldError(\"payment_amount\") && (\r\n\t\t\t\t\t\t\t\t<p className=\"mt-1 text-sm text-red-600\">\r\n\t\t\t\t\t\t\t\t\tJumlah pembayaran harus lebih dari 0\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n\t\t\t\t\t\t\t\tPeriode (Bulan) <span className=\"text-red-500\">*</span>\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\tname=\"payment_months\"\r\n\t\t\t\t\t\t\t\tvalue={newPackage.payment_months || \"\"}\r\n\t\t\t\t\t\t\t\tonChange={handleOtherPackageChange}\r\n\t\t\t\t\t\t\t\tclassName={`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ${\r\n\t\t\t\t\t\t\t\t\thasFieldError(\"payment_months\")\r\n\t\t\t\t\t\t\t\t\t\t? \"border-red-300 bg-red-50\"\r\n\t\t\t\t\t\t\t\t\t\t: \"border-gray-300\"\r\n\t\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\t\tplaceholder=\"0\"\r\n\t\t\t\t\t\t\t\tmin=\"1\"\r\n\t\t\t\t\t\t\t\tstep=\"1\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t{hasFieldError(\"payment_months\") && (\r\n\t\t\t\t\t\t\t\t<p className=\"mt-1 text-sm text-red-600\">\r\n\t\t\t\t\t\t\t\t\tPeriode harus lebih dari 0 bulan\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"mt-6\">\r\n\t\t\t\t\t\t<div className=\"flex items-center justify-between mb-4\">\r\n\t\t\t\t\t\t\t<h3 className=\"text-lg font-semibold\">\r\n\t\t\t\t\t\t\t\tPilih Product <span className=\"text-red-500\">*</span>\r\n\t\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t\t<div className=\"flex items-center space-x-2 text-sm text-gray-600\">\r\n\t\t\t\t\t\t\t\t<span>{filteredProducts.length} products found</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{/* Validation for products */}\r\n\t\t\t\t\t\t{hasFieldError(\"products\") && (\r\n\t\t\t\t\t\t\t<div className=\"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg\">\r\n\t\t\t\t\t\t\t\t<p className=\"text-sm text-red-600\">\r\n\t\t\t\t\t\t\t\t\tPilih minimal 1 produk untuk paket\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t{/* Search Input */}\r\n\t\t\t\t\t\t<div className=\"mb-4\">\r\n\t\t\t\t\t\t\t<div className=\"relative\">\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tvalue={searchTerm}\r\n\t\t\t\t\t\t\t\t\tonChange={handleSearchChange}\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Cari produk dari nama atau harga...\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<div className=\"absolute inset-y-0 left-0 pl-3 flex items-center\">\r\n\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"h-5 w-5 text-gray-400\"\r\n\t\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\t\t\td=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{/* Products Grid */}\r\n\t\t\t\t\t\t<div className=\"relative\">\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclassName={`grid grid-cols-1 md:grid-cols-2 gap-3 transition-all duration-150 ${\r\n\t\t\t\t\t\t\t\t\tisAnimating\r\n\t\t\t\t\t\t\t\t\t\t? \"opacity-50 transform scale-95\"\r\n\t\t\t\t\t\t\t\t\t\t: \"opacity-100 transform scale-100\"\r\n\t\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{currentProducts.map((product) => (\r\n\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\tkey={product.id}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\ttoggleProductInPackage(product.id);\r\n\t\t\t\t\t\t\t\t\t\t\tif (showValidation) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetShowValidation(false);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tclassName={`p-3 border rounded-lg cursor-pointer transition-all duration-200 hover:shadow-md ${\r\n\t\t\t\t\t\t\t\t\t\t\tnewPackage.productIds.includes(product.id)\r\n\t\t\t\t\t\t\t\t\t\t\t\t? \"bg-blue-50 border-blue-300 shadow-sm\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t: \"bg-white hover:bg-gray-50 border-gray-200\"\r\n\t\t\t\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tchecked={newPackage.productIds.includes(product.id)}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={() => {}}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex-1\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<h4 className=\"font-medium text-gray-900\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{product.name}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-gray-600\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tRp{product.price.toLocaleString()}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t{/* Empty State */}\r\n\t\t\t\t\t\t\t{filteredProducts.length === 0 && (\r\n\t\t\t\t\t\t\t\t<div className=\"text-center py-8\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"text-gray-400 mb-2\">\r\n\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"mx-auto h-12 w-12\"\r\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\t\t\t\td=\"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2M4 13h2m13-8V4a1 1 0 00-1-1H7a1 1 0 00-1 1v1m12 0H6\"\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<p className=\"text-gray-500\">\r\n\t\t\t\t\t\t\t\t\t\tTidak ada produk yang ditemukan.\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{/* Pagination */}\r\n\t\t\t\t\t\t{totalPages > 1 && (\r\n\t\t\t\t\t\t\t<div className=\"flex items-center justify-between mt-4 px-2\">\r\n\t\t\t\t\t\t\t\t<div className=\"text-sm text-gray-600\">\r\n\t\t\t\t\t\t\t\t\tMenampilkan {startIndex + 1}-\r\n\t\t\t\t\t\t\t\t\t{Math.min(endIndex, filteredProducts.length)} dari{\" \"}\r\n\t\t\t\t\t\t\t\t\t{filteredProducts.length} produk\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"flex items-center space-x-2\">\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => handlePageChange(currentPage - 1)}\r\n\t\t\t\t\t\t\t\t\t\tdisabled={currentPage === 1}\r\n\t\t\t\t\t\t\t\t\t\tclassName={`p-2 rounded-lg border transition-all duration-200 ${\r\n\t\t\t\t\t\t\t\t\t\t\tcurrentPage === 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t? \"border-gray-200 text-gray-400 cursor-not-allowed\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t: \"border-gray-300 text-gray-600 hover:bg-gray-50 hover:border-gray-400\"\r\n\t\t\t\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-4 w-4\"\r\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\t\t\t\td=\"M15 19l-7-7 7-7\"\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-center space-x-1\">\r\n\t\t\t\t\t\t\t\t\t\t{Array.from({ length: totalPages }, (_, i) => i + 1)\r\n\t\t\t\t\t\t\t\t\t\t\t.filter(\r\n\t\t\t\t\t\t\t\t\t\t\t\t(page) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tpage === 1 ||\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tpage === totalPages ||\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t(page >= currentPage - 1 && page <= currentPage + 1)\r\n\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t.map((page, index, array) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<React.Fragment key={page}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{index > 0 && array[index - 1] !== page - 1 && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-gray-400\">...</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handlePageChange(page)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`px-3 py-1 rounded-md text-sm transition-all duration-200 ${\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentPage === page\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"bg-indigo-600 text-white\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"text-gray-600 hover:bg-gray-100\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{page}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => handlePageChange(currentPage + 1)}\r\n\t\t\t\t\t\t\t\t\t\tdisabled={currentPage === totalPages}\r\n\t\t\t\t\t\t\t\t\t\tclassName={`p-2 rounded-lg border transition-all duration-200 ${\r\n\t\t\t\t\t\t\t\t\t\t\tcurrentPage === totalPages\r\n\t\t\t\t\t\t\t\t\t\t\t\t? \"border-gray-200 text-gray-400 cursor-not-allowed\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t: \"border-gray-300 text-gray-600 hover:bg-gray-50 hover:border-gray-400\"\r\n\t\t\t\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-4 w-4\"\r\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\t\t\t\td=\"M9 5l7 7-7 7\"\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"mt-4 p-4 bg-blue-50 rounded-lg\">\r\n\t\t\t\t\t\t<div className=\"flex justify-between items-center\">\r\n\t\t\t\t\t\t\t<h3 className=\"font-semibold\">Detail Paket</h3>\r\n\t\t\t\t\t\t\t<p className=\"text-lg font-bold text-blue-700\">\r\n\t\t\t\t\t\t\t\tTotal Harga Paket: Rp\r\n\t\t\t\t\t\t\t\t{calculatePackageTotal().toLocaleString()}\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<p className=\"mt-2\">\r\n\t\t\t\t\t\t\t{newPackage.productIds.length} produk dipilih\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p className=\"mt-1\">\r\n\t\t\t\t\t\t\tPembayaran: Rp{(newPackage.payment_amount || 0).toLocaleString()}{\" \"}\r\n\t\t\t\t\t\t\tper {newPackage.payment_method}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{/* Form Status Indicator */}\r\n\t\t\t\t\t{!isFormValid && (\r\n\t\t\t\t\t\t<div className=\"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg\">\r\n\t\t\t\t\t\t\t<div className=\"flex items-center\">\r\n\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\tclassName=\"h-5 w-5 text-yellow-400 mr-2\"\r\n\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\t\td=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.232 15.5c-.77.833.192 2.5 1.732 2.5z\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t<p className=\"text-sm text-yellow-800\">\r\n\t\t\t\t\t\t\t\t\tLengkapi semua field yang wajib diisi untuk membuat paket\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\tdisabled={isLoading}\r\n\t\t\t\t\t\tclassName={`w-full py-3 rounded-lg font-medium text-white transition-all duration-200 ${\r\n\t\t\t\t\t\t\tisFormValid && !isLoading\r\n\t\t\t\t\t\t\t\t? \"bg-indigo-600 hover:bg-indigo-700 transform hover:scale-105\"\r\n\t\t\t\t\t\t\t\t: \"bg-gray-400 cursor-not-allowed\"\r\n\t\t\t\t\t\t}`}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{isLoading ? (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<span className=\"animate-spin inline-block mr-2\">↻</span>\r\n\t\t\t\t\t\t\t\tMembuat Paket...\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t`Buat Paket ${!isFormValid ? \"(Lengkapi Form)\" : \"\"}`\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</form>\r\n\t);\r\n};\r\n\r\nexport default PackageForm;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Modal from \"../../common/Modal\";\r\nimport api from \"../../../utils/api\"; // Adjust the import based on your project structure\r\n\r\nconst PackageList = ({\r\n\tpackages = [],\r\n\tisLoading,\r\n\terror,\r\n\tonEdit,\r\n\tonEditProduct,\r\n\tonDelete,\r\n\tonRefresh,\r\n}) => {\r\n\tconst [itemsPerPage, setItemsPerPage] = useState(10);\r\n\tconst [searchTerm, setSearchTerm] = useState(\"\");\r\n\r\n\tconst [editPackage, setEditPackage] = useState(null);\r\n\tconst [showEditModal, setShowEditModal] = useState(false);\r\n\tconst [showDeleteModal, setShowDeleteModal] = useState(false);\r\n\tconst [deletePackageId, setDeletePackageId] = useState(null);\r\n\tconst [allProducts, setAllProducts] = useState([]);\r\n\tconst [showAddProductModal, setShowAddProductModal] = useState(false);\r\n\tconst [selectedProductToAdd, setSelectedProductToAdd] = useState(null);\r\n\tconst [searchQuery, setSearchQuery] = useState(\"\");\r\n\tconst [currentPage, setCurrentPage] = useState(1);\r\n\tconst productsPerPage = 12; // Adjust based on your grid size\r\n\tconst [formData, setFormData] = useState({\r\n\t\tname: \"\",\r\n\t\tdescription: \"\",\r\n\t\tpayment_method: \"daily\",\r\n\t\tpayment_amount: 0,\r\n\t\tpayment_months: 0,\r\n\t\tproductIds: [],\r\n\t});\r\n\tconst [formLoading, setFormLoading] = useState(false);\r\n\tconst [formError, setFormError] = useState(null);\r\n\tconst [notification, setNotification] = useState(null);\r\n\t// Add these new states at the top of your component\r\n\tconst [showProductEditModal, setShowProductEditModal] = useState(false);\r\n\tconst [currentProduct, setCurrentProduct] = useState(null);\r\n\tconst [productFormData, setProductFormData] = useState({\r\n\t\tname: \"\",\r\n\t\tprice: 0,\r\n\t\tdescription: \"\",\r\n\t});\r\n\r\n\t// Filter and pagination logic\r\n\tconst filteredPackages = packages.filter(\r\n\t\t(pkg) =>\r\n\t\t\tpkg.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n\t\t\tpkg.description.toLowerCase().includes(searchTerm.toLowerCase())\r\n\t);\r\n\r\n\tconst totalPages = Math.ceil(filteredPackages.length / itemsPerPage);\r\n\tconst indexOfLastItem = currentPage * itemsPerPage;\r\n\tconst indexOfFirstItem = indexOfLastItem - itemsPerPage;\r\n\tconst currentPackages = filteredPackages.slice(\r\n\t\tindexOfFirstItem,\r\n\t\tindexOfLastItem\r\n\t);\r\n\r\n\tconst fetchAllProducts = async () => {\r\n\t\ttry {\r\n\t\t\tconst response = await api.get(\"/products\");\r\n\t\t\tsetAllProducts(response.data);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"Error fetching products:\", error);\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchAllProducts();\r\n\t\tsetCurrentPage(1);\r\n\t}, [searchTerm, itemsPerPage]);\r\n\r\n\t// Modal handlers\r\n\tconst openEditModal = (pkg) => {\r\n\t\tsetEditPackage(pkg);\r\n\t\tsetFormData({\r\n\t\t\tname: pkg.name || \"\",\r\n\t\t\tdescription: pkg.description || \"\",\r\n\t\t\tpayment_method: pkg.payment_method?.toLowerCase() || \"daily\",\r\n\t\t\tpayment_amount: pkg.payment_amount || 0,\r\n\t\t\tpayment_months: pkg.payment_months || 0,\r\n\t\t\tproductIds: pkg.products ? pkg.products.map((p) => p.id) : [],\r\n\t\t});\r\n\t\tsetFormError(null);\r\n\t\tsetShowEditModal(true);\r\n\t};\r\n\r\n\t// Filter products based on search query\r\n\tconst filteredProducts = allProducts.filter((product) =>\r\n\t\tproduct.name.toLowerCase().includes(searchQuery.toLowerCase())\r\n\t);\r\n\r\n\t// Pagination logic\r\n\r\n\t// Get current products\r\n\tconst currentProducts = filteredProducts\r\n\t\t.filter((p) => !formData.productIds.includes(p.id))\r\n\t\t.slice((currentPage - 1) * productsPerPage, currentPage * productsPerPage);\r\n\r\n\tconst handleAddProduct = (productId) => {\r\n\t\tif (!formData.productIds.includes(productId)) {\r\n\t\t\tsetFormData((prev) => ({\r\n\t\t\t\t...prev,\r\n\t\t\t\tproductIds: [...prev.productIds, productId],\r\n\t\t\t}));\r\n\t\t}\r\n\t\tsetSelectedProductToAdd(null);\r\n\t\tsetShowAddProductModal(false);\r\n\t};\r\n\r\n\tconst handleRemoveProduct = (productId) => {\r\n\t\tsetFormData((prev) => ({\r\n\t\t\t...prev,\r\n\t\t\tproductIds: prev.productIds.filter((id) => id !== productId),\r\n\t\t}));\r\n\t};\r\n\r\n\tconst openProductEditModal = (product) => {\r\n\t\tsetCurrentProduct(product);\r\n\t\tsetProductFormData({\r\n\t\t\tname: product.name || \"\",\r\n\t\t\tprice: product.price || 0,\r\n\t\t\tdescription: product.description || \"\",\r\n\t\t});\r\n\t\tsetShowProductEditModal(true);\r\n\t};\r\n\r\n\tconst closeProductEditModal = () => {\r\n\t\tsetShowProductEditModal(false);\r\n\t\tsetCurrentProduct(null);\r\n\t\tsetProductFormData({\r\n\t\t\tname: \"\",\r\n\t\t\tprice: 0,\r\n\t\t\tdescription: \"\",\r\n\t\t});\r\n\t};\r\n\r\n\tconst handleProductFormChange = (e) => {\r\n\t\tconst { name, value } = e.target;\r\n\t\tsetProductFormData((prev) => ({\r\n\t\t\t...prev,\r\n\t\t\t[name]: name === \"price\" ? parseFloat(value) || 0 : value,\r\n\t\t}));\r\n\t};\r\n\r\n\tconst handleProductFormSubmit = async (e) => {\r\n\t\te.preventDefault();\r\n\t\ttry {\r\n\t\t\t// You'll need to implement this function in your parent component\r\n\t\t\tawait onEditProduct(currentProduct.id, productFormData);\r\n\t\t\tsetNotification({\r\n\t\t\t\ttype: \"success\",\r\n\t\t\t\tmessage: \"Product updated successfully\",\r\n\t\t\t});\r\n\t\t\tcloseProductEditModal();\r\n\t\t} catch (err) {\r\n\t\t\tsetNotification({\r\n\t\t\t\ttype: \"error\",\r\n\t\t\t\tmessage: err.message || \"Failed to update product\",\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tconst closeEditModal = () => {\r\n\t\tsetShowEditModal(false);\r\n\t\tsetEditPackage(null);\r\n\t\tsetFormError(null);\r\n\t};\r\n\r\n\tconst openDeleteModal = (packageId) => {\r\n\t\tsetDeletePackageId(packageId);\r\n\t\tsetShowDeleteModal(true);\r\n\t};\r\n\r\n\tconst closeDeleteModal = () => {\r\n\t\tsetShowDeleteModal(false);\r\n\t\tsetDeletePackageId(null);\r\n\t};\r\n\r\n\t// Form handlers\r\n\tconst handleFormChange = (e) => {\r\n\t\tconst { name, value } = e.target;\r\n\t\tsetFormData((prev) => ({\r\n\t\t\t...prev,\r\n\t\t\t[name]:\r\n\t\t\t\tname === \"payment_amount\" || name === \"payment_months\"\r\n\t\t\t\t\t? parseFloat(value) || 0\r\n\t\t\t\t\t: value,\r\n\t\t}));\r\n\t};\r\n\r\n\tconst handleFormSubmit = async (e) => {\r\n\t\te.preventDefault();\r\n\t\tsetFormLoading(true);\r\n\t\tsetFormError(null);\r\n\t\ttry {\r\n\t\t\tawait onEdit({ ...editPackage, ...formData });\r\n\t\t\tsetNotification({\r\n\t\t\t\ttype: \"success\",\r\n\t\t\t\tmessage: \"Package updated successfully\",\r\n\t\t\t});\r\n\t\t\tcloseEditModal();\r\n\t\t} catch (err) {\r\n\t\t\tsetFormError(err.message || \"Failed to update package\");\r\n\t\t} finally {\r\n\t\t\tsetFormLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleDeleteConfirm = async () => {\r\n\t\tif (!deletePackageId) return;\r\n\t\ttry {\r\n\t\t\tawait onDelete(deletePackageId);\r\n\t\t\tsetNotification({\r\n\t\t\t\ttype: \"success\",\r\n\t\t\t\tmessage: \"Package deleted successfully\",\r\n\t\t\t});\r\n\t\t} catch (err) {\r\n\t\t\tsetNotification({\r\n\t\t\t\ttype: \"error\",\r\n\t\t\t\tmessage: err.message || \"Failed to delete package\",\r\n\t\t\t});\r\n\t\t} finally {\r\n\t\t\tcloseDeleteModal();\r\n\t\t}\r\n\t};\r\n\r\n\t// Pagination handlers\r\n\tconst nextPage = () =>\r\n\t\tcurrentPage < totalPages && setCurrentPage(currentPage + 1);\r\n\tconst prevPage = () => currentPage > 1 && setCurrentPage(currentPage - 1);\r\n\tconst goToPage = (page) => setCurrentPage(page);\r\n\r\n\treturn (\r\n\t\t<div className=\"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden\">\r\n\t\t\t{/* Header Section */}\r\n\t\t\t<div className=\"px-6 py-4 border-b border-gray-200 bg-white \">\r\n\t\t\t\t<div className=\"grid-flow-row md:flex-row md:items-center md:justify-between gap-2\">\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<h2 className=\"text-xl font-semibold text-gray-800\">\r\n\t\t\t\t\t\t\tPackage Management\r\n\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t<p className=\"text-sm text-gray-500 mt-1\">\r\n\t\t\t\t\t\t\tManage your subscription packages and pricing\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"flex flex-col sm:flex-row gap-3 w-full sm:w-auto\">\r\n\t\t\t\t\t\t{/* Search Input */}\r\n\t\t\t\t\t\t<div className=\"relative flex-1 min-w-[200px]\">\r\n\t\t\t\t\t\t\t<div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\tclassName=\"h-5 w-5 text-gray-400\"\r\n\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\t\td=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Search packages...\"\r\n\t\t\t\t\t\t\t\tvalue={searchTerm}\r\n\t\t\t\t\t\t\t\tonChange={(e) => setSearchTerm(e.target.value)}\r\n\t\t\t\t\t\t\t\tclassName=\"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg bg-white shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{/* Items per page dropdown */}\r\n\t\t\t\t\t\t<div className=\"relative min-w-[120px]\">\r\n\t\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\t\tvalue={itemsPerPage}\r\n\t\t\t\t\t\t\t\tonChange={(e) => setItemsPerPage(Number(e.target.value))}\r\n\t\t\t\t\t\t\t\tclassName=\"appearance-none block w-full bg-white border border-gray-300 rounded-lg px-3 py-2 pl-3 pr-8 text-sm shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{[5, 10, 25, 50].map((num) => (\r\n\t\t\t\t\t\t\t\t\t<option key={num} value={num}>\r\n\t\t\t\t\t\t\t\t\t\tShow {num}\r\n\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t<div className=\"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none\">\r\n\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\tclassName=\"h-5 w-5 text-gray-400\"\r\n\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\t\td=\"M19 9l-7 7-7-7\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{/* Refresh Button - Fixed Version */}\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={onRefresh}\r\n\t\t\t\t\t\t\tdisabled={isLoading}\r\n\t\t\t\t\t\t\tclassName={`flex items-center justify-center gap-2 rounded-lg px-4 py-2 text-sm font-medium bg-white border border-gray-300 text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${\r\n\t\t\t\t\t\t\t\tisLoading ? \"opacity-50 cursor-not-allowed\" : \"\"\r\n\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{isLoading ? (\r\n\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\tclassName=\"animate-spin h-4 w-4 text-gray-500\"\r\n\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<circle\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"opacity-25\"\r\n\t\t\t\t\t\t\t\t\t\tcx=\"12\"\r\n\t\t\t\t\t\t\t\t\t\tcy=\"12\"\r\n\t\t\t\t\t\t\t\t\t\tr=\"10\"\r\n\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"4\"\r\n\t\t\t\t\t\t\t\t\t></circle>\r\n\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"opacity-75\"\r\n\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\td=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\r\n\t\t\t\t\t\t\t\t\t></path>\r\n\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\tclassName=\"h-4 w-4\"\r\n\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\t\td=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t<span>Refresh</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t{/* Notification */}\r\n\t\t\t{notification && (\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName={`px-6 py-3 rounded-md mx-4 mt-4 flex items-center justify-between ${\r\n\t\t\t\t\t\tnotification.type === \"success\"\r\n\t\t\t\t\t\t\t? \"bg-green-50 text-green-800 border border-green-200\"\r\n\t\t\t\t\t\t\t: \"bg-red-50 text-red-800 border border-red-200\"\r\n\t\t\t\t\t}`}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div className=\"flex items-center\">\r\n\t\t\t\t\t\t{notification.type === \"success\" ? (\r\n\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\tclassName=\"h-5 w-5 text-green-500 mr-2\"\r\n\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\td=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\tclassName=\"h-5 w-5 text-red-500 mr-2\"\r\n\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\td=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t<span className=\"text-sm font-medium\">{notification.message}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tonClick={() => setNotification(null)}\r\n\t\t\t\t\t\tclassName=\"text-gray-500 hover:text-gray-700 focus:outline-none\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\tclassName=\"h-5 w-5\"\r\n\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\td=\"M6 18L18 6M6 6l12 12\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\r\n\t\t\t{/* Content Section */}\r\n\t\t\t<div className=\"px-6 py-4\">\r\n\t\t\t\t{isLoading ? (\r\n\t\t\t\t\t<div className=\"flex justify-center py-12\">\r\n\t\t\t\t\t\t<div className=\"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-blue-500\"></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : error ? (\r\n\t\t\t\t\t<div className=\"flex flex-col items-center justify-center py-12 text-center\">\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\tclassName=\"h-12 w-12 text-red-500 mb-4\"\r\n\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\td=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t<h3 className=\"text-lg font-medium text-gray-900 mb-2\">\r\n\t\t\t\t\t\t\tError loading packages\r\n\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t<p className=\"text-sm text-gray-500 mb-4\">{error}</p>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={onRefresh}\r\n\t\t\t\t\t\t\tclassName=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tTry Again\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : packages.length === 0 ? (\r\n\t\t\t\t\t<div className=\"flex flex-col items-center justify-center py-12 text-center\">\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\tclassName=\"h-12 w-12 text-gray-400 mb-4\"\r\n\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\td=\"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t<h3 className=\"text-lg font-medium text-gray-900 mb-2\">\r\n\t\t\t\t\t\t\tNo packages found\r\n\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t<p className=\"text-sm text-gray-500 mb-4\">\r\n\t\t\t\t\t\t\tCreate your first package to get started\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={onRefresh}\r\n\t\t\t\t\t\t\tclassName=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tRefresh Data\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<div className=\"space-y-4\">\r\n\t\t\t\t\t\t{currentPackages.map((pkg) => {\r\n\t\t\t\t\t\t\tif (!pkg) return null;\r\n\r\n\t\t\t\t\t\t\tconst totalAmount =\r\n\t\t\t\t\t\t\t\tpkg.products?.reduce((sum, product) => {\r\n\t\t\t\t\t\t\t\t\treturn sum + (product?.price || 0);\r\n\t\t\t\t\t\t\t\t}, 0) || 0;\r\n\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tkey={pkg.id}\r\n\t\t\t\t\t\t\t\t\tclassName=\"border border-gray-200 rounded-lg overflow-hidden hover:shadow-md transition-shadow duration-200\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{/* Package Header */}\r\n\t\t\t\t\t\t\t\t\t<div className=\"px-5 py-4 bg-gray-50 border-b border-gray-200 flex justify-between items-center\">\r\n\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t<h3 className=\"text-lg font-semibold text-gray-900 flex items-center gap-2\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{pkg.name || \"Unnamed Package\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpkg.payment_method?.toLowerCase() === \"daily\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"bg-blue-100 text-blue-800\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: pkg.payment_method?.toLowerCase() === \"weekly\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"bg-purple-100 text-purple-800\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: pkg.payment_method?.toLowerCase() === \"monthly\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"bg-green-100 text-green-800\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"bg-gray-100 text-gray-800\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{pkg.payment_method?.toLowerCase() || \"unknown\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t\t\t\t\t\t{pkg.description && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-gray-500 mt-1\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{pkg.description}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex gap-2\">\r\n\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => openEditModal(pkg)}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"-ml-0.5 mr-1.5 h-4 w-4 text-gray-500\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t\t\tEdit\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => openDeleteModal(pkg.id)}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"-ml-0.5 mr-1.5 h-4 w-4\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t\t\tDelete\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t{/* Package Details */}\r\n\t\t\t\t\t\t\t\t\t<div className=\"px-5 py-4\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n\t\t\t\t\t\t\t\t\t\t\t{/* Payment Info */}\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"bg-blue-50 p-3 rounded-lg\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<h4 className=\"text-xs font-semibold text-blue-800 uppercase tracking-wider mb-1\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tPayment\r\n\t\t\t\t\t\t\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-lg font-semibold text-gray-900\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tRp{(pkg.payment_amount || 0).toLocaleString()}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm font-normal text-gray-500 ml-1\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/ {pkg.payment_method?.toLowerCase()}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t{/* Products Count */}\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"bg-purple-50 p-3 rounded-lg\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<h4 className=\"text-xs font-semibold text-purple-800 uppercase tracking-wider mb-1\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tLama Pembayaran\r\n\t\t\t\t\t\t\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-lg font-semibold text-gray-900\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{pkg.payment_months || 0}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm font-normal text-gray-500 ml-1\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tBulan\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t{/* Total Value */}\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"bg-green-50 p-3 rounded-lg\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<h4 className=\"text-xs font-semibold text-green-800 uppercase tracking-wider mb-1\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tTotal Value\r\n\t\t\t\t\t\t\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-lg font-semibold text-gray-900\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tRp{totalAmount.toLocaleString()}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t{/* Products List */}\r\n\t\t\t\t\t\t\t\t\t\t{pkg.products?.length > 0 ? (\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"mt-4\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<h4 className=\"text-sm font-medium text-gray-900 mb-2\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tIncluded Products\r\n\t\t\t\t\t\t\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"overflow-hidden border border-gray-200 rounded-lg\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<table className=\"min-w-full divide-y divide-gray-200\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<thead className=\"bg-gray-50\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tscope=\"col\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tProduct\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tscope=\"col\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tPrice\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tbody className=\"bg-white divide-y divide-gray-200\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{pkg.products.map((product) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr key={product.id}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center justify-between\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{product.name || \"Unnamed Product\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\topenProductEditModal(product);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-blue-600 hover:text-blue-800 ml-2\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"Edit product\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-4 w-4\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-4 py-3 whitespace-nowrap text-sm text-gray-500 text-right\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tRp{(product.price || 0).toLocaleString()}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"mt-4 text-center py-4 bg-gray-50 rounded-lg\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-gray-500\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tNo products included in this package\r\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\r\n\t\t\t{/* Pagination */}\r\n\t\t\t{filteredPackages.length > itemsPerPage && (\r\n\t\t\t\t<div className=\"px-6 py-4 border-t border-gray-200 bg-gray-50\">\r\n\t\t\t\t\t<div className=\"flex flex-col sm:flex-row items-center justify-between gap-4\">\r\n\t\t\t\t\t\t<div className=\"text-sm text-gray-500\">\r\n\t\t\t\t\t\t\tShowing{\" \"}\r\n\t\t\t\t\t\t\t<span className=\"font-medium\">{indexOfFirstItem + 1}</span> to{\" \"}\r\n\t\t\t\t\t\t\t<span className=\"font-medium\">\r\n\t\t\t\t\t\t\t\t{Math.min(indexOfLastItem, filteredPackages.length)}\r\n\t\t\t\t\t\t\t</span>{\" \"}\r\n\t\t\t\t\t\t\tof <span className=\"font-medium\">{filteredPackages.length}</span>{\" \"}\r\n\t\t\t\t\t\t\tresults\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<nav className=\"flex items-center space-x-2\">\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonClick={prevPage}\r\n\t\t\t\t\t\t\t\tdisabled={currentPage === 1}\r\n\t\t\t\t\t\t\t\tclassName=\"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<span className=\"sr-only\">Previous</span>\r\n\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\tclassName=\"h-5 w-5\"\r\n\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\tfillRule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\td=\"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z\"\r\n\t\t\t\t\t\t\t\t\t\tclipRule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t{/* Page numbers */}\r\n\t\t\t\t\t\t\t{Array.from({ length: Math.min(5, totalPages) }).map((_, i) => {\r\n\t\t\t\t\t\t\t\tlet pageNum;\r\n\t\t\t\t\t\t\t\tif (totalPages <= 5) {\r\n\t\t\t\t\t\t\t\t\tpageNum = i + 1;\r\n\t\t\t\t\t\t\t\t} else if (currentPage <= 3) {\r\n\t\t\t\t\t\t\t\t\tpageNum = i + 1;\r\n\t\t\t\t\t\t\t\t} else if (currentPage >= totalPages - 2) {\r\n\t\t\t\t\t\t\t\t\tpageNum = totalPages - 4 + i;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tpageNum = currentPage - 2 + i;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tkey={pageNum}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => goToPage(pageNum)}\r\n\t\t\t\t\t\t\t\t\t\tclassName={`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${\r\n\t\t\t\t\t\t\t\t\t\t\tcurrentPage === pageNum\r\n\t\t\t\t\t\t\t\t\t\t\t\t? \"z-10 bg-blue-50 border-blue-500 text-blue-600\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t: \"bg-white border-gray-300 text-gray-500 hover:bg-gray-50\"\r\n\t\t\t\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{pageNum}\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonClick={nextPage}\r\n\t\t\t\t\t\t\t\tdisabled={currentPage === totalPages}\r\n\t\t\t\t\t\t\t\tclassName=\"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<span className=\"sr-only\">Next</span>\r\n\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\tclassName=\"h-5 w-5\"\r\n\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\tfillRule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\td=\"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z\"\r\n\t\t\t\t\t\t\t\t\t\tclipRule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</nav>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\r\n\t\t\t{/* Edit Modal */}\r\n\r\n\t\t\t{/* Product Edit Modal */}\r\n\t\t\t<Modal\r\n\t\t\t\tisOpen={showProductEditModal}\r\n\t\t\t\ttitle=\"Edit Product\"\r\n\t\t\t\tonClose={closeProductEditModal}\r\n\t\t\t\tclassName=\"max-w-lg overflow-y-auto\"\r\n\t\t\t>\r\n\t\t\t\t<form onSubmit={handleProductFormSubmit} className=\"space-y-4 \">\r\n\t\t\t\t\t<div className=\"overflow-y-auto\">\r\n\t\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n\t\t\t\t\t\t\tProduct Name\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\t\tvalue={productFormData.name}\r\n\t\t\t\t\t\t\tonChange={handleProductFormChange}\r\n\t\t\t\t\t\t\tclassName=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\r\n\t\t\t\t\t\t\tplaceholder=\"Product name\"\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n\t\t\t\t\t\t\tPrice\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<div className=\"relative\">\r\n\t\t\t\t\t\t\t<span className=\"absolute left-3 top-2\">Rp</span>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\tname=\"price\"\r\n\t\t\t\t\t\t\t\tvalue={productFormData.price}\r\n\t\t\t\t\t\t\t\tonChange={handleProductFormChange}\r\n\t\t\t\t\t\t\t\tclassName=\"w-full pl-8 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"0\"\r\n\t\t\t\t\t\t\t\tmin=\"0\"\r\n\t\t\t\t\t\t\t\tstep=\"any\"\r\n\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n\t\t\t\t\t\t\tDescription\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\tname=\"description\"\r\n\t\t\t\t\t\t\tvalue={productFormData.description}\r\n\t\t\t\t\t\t\tonChange={handleProductFormChange}\r\n\t\t\t\t\t\t\tclassName=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\r\n\t\t\t\t\t\t\trows={3}\r\n\t\t\t\t\t\t\tplaceholder=\"Product description\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"flex justify-end space-x-2 pt-2\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\tonClick={closeProductEditModal}\r\n\t\t\t\t\t\t\tclassName=\"px-4 py-2 rounded-md bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tCancel\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\tclassName=\"px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 shadow-sm flex items-center gap-1\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\tclassName=\"h-4 w-4\"\r\n\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\td=\"M5 13l4 4L19 7\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t<span>Save Product</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</Modal>\r\n\r\n\t\t\t{/* Edit Package Modal */}\r\n\t\t\t<Modal isOpen={showEditModal} title=\"Edit Paket\" onClose={closeEditModal}>\r\n\t\t\t\t<form onSubmit={handleFormSubmit} className=\"space-y-4\">\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n\t\t\t\t\t\t\tNama Paket\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\t\tvalue={formData.name}\r\n\t\t\t\t\t\t\tonChange={handleFormChange}\r\n\t\t\t\t\t\t\tclassName=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\r\n\t\t\t\t\t\t\tplaceholder=\"Nama paket\"\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n\t\t\t\t\t\t\tDeskripsi\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\tname=\"description\"\r\n\t\t\t\t\t\t\tvalue={formData.description}\r\n\t\t\t\t\t\t\tonChange={handleFormChange}\r\n\t\t\t\t\t\t\tclassName=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\r\n\t\t\t\t\t\t\trows={3}\r\n\t\t\t\t\t\t\tplaceholder=\"Deskripsi paket\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"grid grid-cols-2 gap-4\">\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n\t\t\t\t\t\t\t\tMetode Pembayaran\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\t\tname=\"payment_method\"\r\n\t\t\t\t\t\t\t\tvalue={formData.payment_method}\r\n\t\t\t\t\t\t\t\tonChange={handleFormChange}\r\n\t\t\t\t\t\t\t\tclassName=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\r\n\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<option value=\"daily\">Harian</option>\r\n\t\t\t\t\t\t\t\t<option value=\"weekly\">Mingguan</option>\r\n\t\t\t\t\t\t\t\t<option value=\"monthly\">Bulanan</option>\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n\t\t\t\t\t\t\t\tPeriode (Bulan)\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\tname=\"payment_months\"\r\n\t\t\t\t\t\t\t\tvalue={formData.payment_months}\r\n\t\t\t\t\t\t\t\tonChange={handleFormChange}\r\n\t\t\t\t\t\t\t\tclassName=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"0\"\r\n\t\t\t\t\t\t\t\tmin=\"0\"\r\n\t\t\t\t\t\t\t\tstep=\"1\"\r\n\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n\t\t\t\t\t\t\tHarga\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<div className=\"relative\">\r\n\t\t\t\t\t\t\t<span className=\"absolute left-3 top-2\">Rp</span>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\tname=\"payment_amount\"\r\n\t\t\t\t\t\t\t\tvalue={formData.payment_amount}\r\n\t\t\t\t\t\t\t\tonChange={handleFormChange}\r\n\t\t\t\t\t\t\t\tclassName=\"w-full pl-8 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"0\"\r\n\t\t\t\t\t\t\t\tmin=\"0\"\r\n\t\t\t\t\t\t\t\tstep=\"any\"\r\n\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{/* Product Management Section */}\r\n\t\t\t\t\t<div className=\"mt-4\">\r\n\t\t\t\t\t\t<div className=\"flex justify-between items-center mb-2\">\r\n\t\t\t\t\t\t\t<h3 className=\"text-sm font-medium text-gray-700\">\r\n\t\t\t\t\t\t\t\tProducts in Package ({formData.productIds.length})\r\n\t\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\tonClick={() => setShowAddProductModal(true)}\r\n\t\t\t\t\t\t\t\tclassName=\"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\tclassName=\"-ml-0.5 mr-1 h-3 w-3\"\r\n\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\t\td=\"M12 6v6m0 0v6m0-6h6m-6 0H6\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\tAdd Product\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{formData.productIds.length > 0 ? (\r\n\t\t\t\t\t\t\t<div className=\"max-h-64 overflow-y-auto pr-2\">\r\n\t\t\t\t\t\t\t\t<div className=\"space-y-2\">\r\n\t\t\t\t\t\t\t\t\t{formData.productIds.map((productId) => {\r\n\t\t\t\t\t\t\t\t\t\tconst product = allProducts.find((p) => p.id === productId);\r\n\t\t\t\t\t\t\t\t\t\tif (!product) return null;\r\n\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\tkey={productId}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex justify-between items-center p-3 bg-gray-50 rounded-lg border border-gray-200 hover:shadow-sm transition-shadow\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center space-x-3 flex-1 min-w-0\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex-shrink-0 h-10 w-10 bg-gray-200 rounded-full flex items-center justify-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-5 w-5 text-gray-500\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"min-w-0 flex-1\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm font-medium text-gray-900 truncate\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{product.name}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-gray-500\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tRp{product.price.toLocaleString()}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex space-x-2 flex-shrink-0\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => openProductEditModal(product)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-blue-500 hover:text-blue-700\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"Edit product\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-4 w-4\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleRemoveProduct(productId)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-red-500 hover:text-red-700\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"Remove product\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-4 w-4\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<div className=\"text-center py-6 bg-gray-50 rounded-lg border border-dashed border-gray-300\">\r\n\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\tclassName=\"mx-auto h-12 w-12 text-gray-400\"\r\n\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\t\td=\"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t<h3 className=\"mt-2 text-sm font-medium text-gray-900\">\r\n\t\t\t\t\t\t\t\t\tNo products added\r\n\t\t\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t\t\t<p className=\"mt-1 text-sm text-gray-500\">\r\n\t\t\t\t\t\t\t\t\tClick \"Add Product\" to include items in this package\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{formError && (\r\n\t\t\t\t\t\t<div className=\"bg-red-50 border-l-4 border-red-500 text-red-600 px-4 py-2 rounded\">\r\n\t\t\t\t\t\t\t<div className=\"flex items-center\">\r\n\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"h-4 w-4 mr-2\"\r\n\t\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\tfillRule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\td=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z\"\r\n\t\t\t\t\t\t\t\t\t\tclipRule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t{formError}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t<div className=\"flex justify-end space-x-2 pt-2\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\tonClick={closeEditModal}\r\n\t\t\t\t\t\t\tclassName=\"px-4 py-2 rounded-md bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tBatal\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\tdisabled={formLoading}\r\n\t\t\t\t\t\t\tclassName=\"px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 shadow-sm flex items-center gap-1\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{formLoading ? (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<span className=\"inline-block h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin\"></span>\r\n\t\t\t\t\t\t\t\t\t<span>Menyimpan...</span>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"h-4 w-4\"\r\n\t\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\t\t\td=\"M5 13l4 4L19 7\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t<span>Simpan</span>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\r\n\t\t\t\t{/* Add Product Modal */}\r\n\t\t\t\t<Modal\r\n\t\t\t\t\tisOpen={showAddProductModal}\r\n\t\t\t\t\ttitle=\"Add Product to Package\"\r\n\t\t\t\t\tonClose={() => {\r\n\t\t\t\t\t\tsetShowAddProductModal(false);\r\n\t\t\t\t\t\tsetSearchQuery(\"\");\r\n\t\t\t\t\t\tsetCurrentPage(1);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tsize=\"xl\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<div className=\"space-y-4\">\r\n\t\t\t\t\t\t{/* Search Input */}\r\n\t\t\t\t\t\t<div className=\"relative\">\r\n\t\t\t\t\t\t\t<div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\tclassName=\"h-5 w-5 text-gray-400\"\r\n\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\t\td=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Search products...\"\r\n\t\t\t\t\t\t\t\tclassName=\"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg bg-white shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm\"\r\n\t\t\t\t\t\t\t\tvalue={searchQuery}\r\n\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\tsetSearchQuery(e.target.value);\r\n\t\t\t\t\t\t\t\t\tsetCurrentPage(1);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{/* Product Grid */}\r\n\t\t\t\t\t\t<div className=\"border border-gray-200 rounded-xl\">\r\n\t\t\t\t\t\t\t<div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 p-4 max-h-96 overflow-y-auto\">\r\n\t\t\t\t\t\t\t\t{currentProducts.map((product) => (\r\n\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\tkey={product.id}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => setSelectedProductToAdd(product.id)}\r\n\t\t\t\t\t\t\t\t\t\tclassName={`p-3 border rounded-lg cursor-pointer transition ${\r\n\t\t\t\t\t\t\t\t\t\t\tselectedProductToAdd === product.id\r\n\t\t\t\t\t\t\t\t\t\t\t\t? \"bg-blue-50 border-blue-300\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t: \"bg-white hover:bg-gray-50\"\r\n\t\t\t\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex flex-col items-center text-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-10 h-10 bg-gray-200 rounded-full mb-2 flex items-center justify-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-6 w-6 text-gray-500\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<h4 className=\"font-medium text-sm truncate w-full\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{product.name}\r\n\t\t\t\t\t\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-gray-600 mt-1\">\r\n\t\t\t\t\t\t\t\t\t\t\t\tRp{product.price.toLocaleString()}\r\n\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{/* Pagination Controls */}\r\n\t\t\t\t\t\t{totalPages > 1 && (\r\n\t\t\t\t\t\t\t<div className=\"flex justify-center items-center space-x-2\">\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tonClick={() => setCurrentPage((p) => Math.max(p - 1, 1))}\r\n\t\t\t\t\t\t\t\t\tdisabled={currentPage === 1}\r\n\t\t\t\t\t\t\t\t\tclassName=\"p-1 rounded-md disabled:opacity-50 disabled:cursor-not-allowed\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"h-5 w-5 text-gray-600\"\r\n\t\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\t\t\td=\"M15 19l-7-7 7-7\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t\t{Array.from({ length: Math.min(5, totalPages) }).map((_, i) => {\r\n\t\t\t\t\t\t\t\t\tlet pageNum;\r\n\t\t\t\t\t\t\t\t\tif (totalPages <= 5) {\r\n\t\t\t\t\t\t\t\t\t\tpageNum = i + 1;\r\n\t\t\t\t\t\t\t\t\t} else if (currentPage <= 3) {\r\n\t\t\t\t\t\t\t\t\t\tpageNum = i + 1;\r\n\t\t\t\t\t\t\t\t\t} else if (currentPage >= totalPages - 2) {\r\n\t\t\t\t\t\t\t\t\t\tpageNum = totalPages - 4 + i;\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tpageNum = currentPage - 2 + i;\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tkey={pageNum}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => setCurrentPage(pageNum)}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={`w-8 h-8 rounded-full text-sm ${\r\n\t\t\t\t\t\t\t\t\t\t\t\tcurrentPage === pageNum\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t? \"bg-blue-600 text-white\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t: \"text-gray-700 hover:bg-gray-100\"\r\n\t\t\t\t\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{pageNum}\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})}\r\n\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\t\tsetCurrentPage((p) => Math.min(p + 1, totalPages))\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tdisabled={currentPage === totalPages}\r\n\t\t\t\t\t\t\t\t\tclassName=\"p-1 rounded-md disabled:opacity-50 disabled:cursor-not-allowed\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"h-5 w-5 text-gray-600\"\r\n\t\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\t\t\td=\"M9 5l7 7-7 7\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t{/* Action Buttons */}\r\n\t\t\t\t\t\t<div className=\"flex justify-end space-x-2 pt-2 border-t border-gray-200\">\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tsetShowAddProductModal(false);\r\n\t\t\t\t\t\t\t\t\tsetSearchQuery(\"\");\r\n\t\t\t\t\t\t\t\t\tsetCurrentPage(1);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tclassName=\"px-4 py-2 rounded-md bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tCancel\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tif (selectedProductToAdd) {\r\n\t\t\t\t\t\t\t\t\t\thandleAddProduct(selectedProductToAdd);\r\n\t\t\t\t\t\t\t\t\t\tsetSearchQuery(\"\");\r\n\t\t\t\t\t\t\t\t\t\tsetCurrentPage(1);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tdisabled={!selectedProductToAdd}\r\n\t\t\t\t\t\t\t\tclassName=\"px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 shadow-sm\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tAdd Product\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Modal>\r\n\t\t\t</Modal>\r\n\r\n\t\t\t{/* Delete Confirmation Modal */}\r\n\t\t\t<Modal\r\n\t\t\t\tisOpen={showDeleteModal}\r\n\t\t\t\ttitle=\"Confirm Deletion\"\r\n\t\t\t\tonClose={closeDeleteModal}\r\n\t\t\t>\r\n\t\t\t\t<div className=\"sm:flex sm:items-start\">\r\n\t\t\t\t\t<div className=\"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10\">\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\tclassName=\"h-6 w-6 text-red-600\"\r\n\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\td=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left\">\r\n\t\t\t\t\t\t<h3 className=\"text-lg leading-6 font-medium text-gray-900\">\r\n\t\t\t\t\t\t\tDelete package\r\n\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t<div className=\"mt-2\">\r\n\t\t\t\t\t\t\t<p className=\"text-sm text-gray-500\">\r\n\t\t\t\t\t\t\t\tAre you sure you want to delete this package? This action cannot\r\n\t\t\t\t\t\t\t\tbe undone.\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse\">\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\tonClick={handleDeleteConfirm}\r\n\t\t\t\t\t\tclassName=\"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tDelete\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\tonClick={closeDeleteModal}\r\n\t\t\t\t\t\tclassName=\"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:w-auto sm:text-sm\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tCancel\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</Modal>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default PackageList;\r\n","import React, { useState } from \"react\";\r\nimport api from \"../../../utils/api\";\r\n\r\n// Icons component\r\nconst Icons = {\r\n\tPlus: () => (\r\n\t\t<svg\r\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\twidth=\"20\"\r\n\t\t\theight=\"20\"\r\n\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\tfill=\"none\"\r\n\t\t\tstroke=\"currentColor\"\r\n\t\t\tstrokeWidth=\"2\"\r\n\t\t\tstrokeLinecap=\"round\"\r\n\t\t\tstrokeLinejoin=\"round\"\r\n\t\t>\r\n\t\t\t<line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\"></line>\r\n\t\t\t<line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"></line>\r\n\t\t</svg>\r\n\t),\r\n\tEdit: () => (\r\n\t\t<svg\r\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\twidth=\"16\"\r\n\t\t\theight=\"16\"\r\n\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\tfill=\"none\"\r\n\t\t\tstroke=\"currentColor\"\r\n\t\t\tstrokeWidth=\"2\"\r\n\t\t\tstrokeLinecap=\"round\"\r\n\t\t\tstrokeLinejoin=\"round\"\r\n\t\t>\r\n\t\t\t<path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"></path>\r\n\t\t\t<path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path>\r\n\t\t</svg>\r\n\t),\r\n\tDelete: () => (\r\n\t\t<svg\r\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\twidth=\"16\"\r\n\t\t\theight=\"16\"\r\n\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\tfill=\"none\"\r\n\t\t\tstroke=\"currentColor\"\r\n\t\t\tstrokeWidth=\"2\"\r\n\t\t\tstrokeLinecap=\"round\"\r\n\t\t\tstrokeLinejoin=\"round\"\r\n\t\t>\r\n\t\t\t<polyline points=\"3 6 5 6 21 6\"></polyline>\r\n\t\t\t<path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path>\r\n\t\t</svg>\r\n\t),\r\n\tKey: () => (\r\n\t\t<svg\r\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\twidth=\"16\"\r\n\t\t\theight=\"16\"\r\n\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\tfill=\"none\"\r\n\t\t\tstroke=\"currentColor\"\r\n\t\t\tstrokeWidth=\"2\"\r\n\t\t\tstrokeLinecap=\"round\"\r\n\t\t\tstrokeLinejoin=\"round\"\r\n\t\t>\r\n\t\t\t<path d=\"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4\"></path>\r\n\t\t</svg>\r\n\t),\r\n\tEye: () => (\r\n\t\t<svg\r\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\twidth=\"16\"\r\n\t\t\theight=\"16\"\r\n\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\tfill=\"none\"\r\n\t\t\tstroke=\"currentColor\"\r\n\t\t\tstrokeWidth=\"2\"\r\n\t\t\tstrokeLinecap=\"round\"\r\n\t\t\tstrokeLinejoin=\"round\"\r\n\t\t>\r\n\t\t\t<path d=\"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z\"></path>\r\n\t\t\t<circle cx=\"12\" cy=\"12\" r=\"3\"></circle>\r\n\t\t</svg>\r\n\t),\r\n\tX: () => (\r\n\t\t<svg\r\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\twidth=\"24\"\r\n\t\t\theight=\"24\"\r\n\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\tfill=\"none\"\r\n\t\t\tstroke=\"currentColor\"\r\n\t\t\tstrokeWidth=\"2\"\r\n\t\t\tstrokeLinecap=\"round\"\r\n\t\t\tstrokeLinejoin=\"round\"\r\n\t\t>\r\n\t\t\t<line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\r\n\t\t\t<line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\r\n\t\t</svg>\r\n\t),\r\n\tCheckCircle: () => (\r\n\t\t<svg\r\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\twidth=\"20\"\r\n\t\t\theight=\"20\"\r\n\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\tfill=\"none\"\r\n\t\t\tstroke=\"currentColor\"\r\n\t\t\tstrokeWidth=\"2\"\r\n\t\t\tstrokeLinecap=\"round\"\r\n\t\t\tstrokeLinejoin=\"round\"\r\n\t\t>\r\n\t\t\t<path d=\"M22 11.08V12a10 10 0 1 1-5.93-9.14\"></path>\r\n\t\t\t<polyline points=\"22 4 12 14.01 9 11.01\"></polyline>\r\n\t\t</svg>\r\n\t),\r\n\tAlertCircle: () => (\r\n\t\t<svg\r\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\twidth=\"20\"\r\n\t\t\theight=\"20\"\r\n\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\tfill=\"none\"\r\n\t\t\tstroke=\"currentColor\"\r\n\t\t\tstrokeWidth=\"2\"\r\n\t\t\tstrokeLinecap=\"round\"\r\n\t\t\tstrokeLinejoin=\"round\"\r\n\t\t>\r\n\t\t\t<circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\r\n\t\t\t<line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"12\"></line>\r\n\t\t\t<line x1=\"12\" y1=\"16\" x2=\"12.01\" y2=\"16\"></line>\r\n\t\t</svg>\r\n\t),\r\n};\r\n\r\n// Notification component with animation\r\nconst Notification = ({ message, type, onClose }) => {\r\n\tconst bgColor = type === \"success\" ? \"bg-green-100\" : \"bg-red-100\";\r\n\tconst textColor = type === \"success\" ? \"text-green-800\" : \"text-red-800\";\r\n\tconst borderColor =\r\n\t\ttype === \"success\" ? \"border-green-400\" : \"border-red-400\";\r\n\tconst Icon = type === \"success\" ? Icons.CheckCircle : Icons.AlertCircle;\r\n\r\n\tReact.useEffect(() => {\r\n\t\tconst timer = setTimeout(() => {\r\n\t\t\tif (onClose) onClose();\r\n\t\t}, 4000);\r\n\t\treturn () => clearTimeout(timer);\r\n\t}, [onClose]);\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={`fixed top-4 right-4 flex items-center p-4 mb-4 ${bgColor} ${textColor} ${borderColor} border rounded-lg shadow-lg transition-all transform animate-fade-in z-50`}\r\n\t\t>\r\n\t\t\t<div className=\"inline-flex items-center justify-center flex-shrink-0 w-8 h-8 mr-2\">\r\n\t\t\t\t<Icon />\r\n\t\t\t</div>\r\n\t\t\t<div className=\"ml-2 text-sm font-medium\">{message}</div>\r\n\t\t\t<button\r\n\t\t\t\ttype=\"button\"\r\n\t\t\t\tonClick={onClose}\r\n\t\t\t\tclassName=\"ml-auto -mx-1.5 -my-1.5 rounded-lg p-1.5 inline-flex items-center justify-center h-8 w-8 hover:bg-gray-200\"\r\n\t\t\t>\r\n\t\t\t\t<span className=\"sr-only\">Close</span>\r\n\t\t\t\t<svg\r\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\twidth=\"16\"\r\n\t\t\t\t\theight=\"16\"\r\n\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\tstrokeWidth=\"2\"\r\n\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\r\n\t\t\t\t\t<line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\r\n\t\t\t\t</svg>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\n// Modern Modal Component with animation\r\nconst Modal = ({ isOpen, onClose, title, children }) => {\r\n\tif (!isOpen) return null;\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName=\"fixed inset-0 z-50 overflow-y-auto\"\r\n\t\t\taria-labelledby=\"modal-title\"\r\n\t\t\trole=\"dialog\"\r\n\t\t\taria-modal=\"true\"\r\n\t\t>\r\n\t\t\t<div className=\"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0\">\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName=\"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity\"\r\n\t\t\t\t\taria-hidden=\"true\"\r\n\t\t\t\t\tonClick={onClose}\r\n\t\t\t\t></div>\r\n\r\n\t\t\t\t<span\r\n\t\t\t\t\tclassName=\"hidden sm:inline-block sm:align-middle sm:h-screen\"\r\n\t\t\t\t\taria-hidden=\"true\"\r\n\t\t\t\t>\r\n\t\t\t\t\t&#8203;\r\n\t\t\t\t</span>\r\n\r\n\t\t\t\t<div className=\"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full animate-modal-in\">\r\n\t\t\t\t\t<div className=\"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4\">\r\n\t\t\t\t\t\t<div className=\"sm:flex sm:items-start\">\r\n\t\t\t\t\t\t\t<div className=\"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full\">\r\n\t\t\t\t\t\t\t\t<div className=\"flex justify-between items-center border-b pb-3\">\r\n\t\t\t\t\t\t\t\t\t<h3\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"text-lg leading-6 font-medium text-gray-900\"\r\n\t\t\t\t\t\t\t\t\t\tid=\"modal-title\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{title}\r\n\t\t\t\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tonClick={onClose}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"text-gray-400 hover:text-gray-500\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<Icons.X />\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"mt-4\">{children}</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\n// Button component with variants\r\nconst Button = ({\r\n\tchildren,\r\n\tvariant = \"primary\",\r\n\tclassName = \"\",\r\n\tonClick,\r\n\t...props\r\n}) => {\r\n\tconst baseClasses =\r\n\t\t\"inline-flex justify-center items-center px-4 py-2 border font-medium rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors duration-200\";\r\n\r\n\tconst variants = {\r\n\t\tprimary:\r\n\t\t\t\"bg-blue-600 hover:bg-blue-700 text-white border-transparent focus:ring-blue-500\",\r\n\t\tsecondary:\r\n\t\t\t\"bg-white hover:bg-gray-50 text-gray-700 border-gray-300 focus:ring-blue-500\",\r\n\t\tsuccess:\r\n\t\t\t\"bg-green-600 hover:bg-green-700 text-white border-transparent focus:ring-green-500\",\r\n\t\tdanger:\r\n\t\t\t\"bg-red-600 hover:bg-red-700 text-white border-transparent focus:ring-red-500\",\r\n\t\twarning:\r\n\t\t\t\"bg-yellow-600 hover:bg-yellow-700 text-white border-transparent focus:ring-yellow-500\",\r\n\t\tinfo: \"bg-purple-600 hover:bg-purple-700 text-white border-transparent focus:ring-purple-500\",\r\n\t};\r\n\r\n\tconst variantClasses = variants[variant] || variants.primary;\r\n\r\n\treturn (\r\n\t\t<button\r\n\t\t\tclassName={`${baseClasses} ${variantClasses} ${className}`}\r\n\t\t\tonClick={onClick}\r\n\t\t\t{...props}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</button>\r\n\t);\r\n};\r\n\r\n// Input component\r\nconst Input = ({ label, id, error, ...props }) => {\r\n\treturn (\r\n\t\t<div className=\"mb-4\">\r\n\t\t\t{label && (\r\n\t\t\t\t<label\r\n\t\t\t\t\thtmlFor={id}\r\n\t\t\t\t\tclassName=\"block text-sm font-medium text-gray-700 mb-1\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{label}\r\n\t\t\t\t</label>\r\n\t\t\t)}\r\n\t\t\t<input\r\n\t\t\t\tid={id}\r\n\t\t\t\tclassName={`shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md p-2 border ${\r\n\t\t\t\t\terror\r\n\t\t\t\t\t\t? \"border-red-300 text-red-900 placeholder-red-300 focus:outline-none focus:ring-red-500 focus:border-red-500\"\r\n\t\t\t\t\t\t: \"\"\r\n\t\t\t\t}`}\r\n\t\t\t\t{...props}\r\n\t\t\t/>\r\n\t\t\t{error && <p className=\"mt-1 text-sm text-red-600\">{error}</p>}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\n// Select component\r\nconst Select = ({ label, id, children, ...props }) => {\r\n\treturn (\r\n\t\t<div className=\"mb-4\">\r\n\t\t\t{label && (\r\n\t\t\t\t<label\r\n\t\t\t\t\thtmlFor={id}\r\n\t\t\t\t\tclassName=\"block text-sm font-medium text-gray-700 mb-1\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{label}\r\n\t\t\t\t</label>\r\n\t\t\t)}\r\n\t\t\t<select\r\n\t\t\t\tid={id}\r\n\t\t\t\tclassName=\"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md p-2 border\"\r\n\t\t\t\t{...props}\r\n\t\t\t>\r\n\t\t\t\t{children}\r\n\t\t\t</select>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\n// Badge component\r\nconst Badge = ({ children, variant = \"success\" }) => {\r\n\tconst variants = {\r\n\t\tsuccess: \"bg-green-100 text-green-800\",\r\n\t\twarning: \"bg-yellow-100 text-yellow-800\",\r\n\t\tdanger: \"bg-red-100 text-red-800\",\r\n\t\tinfo: \"bg-blue-100 text-blue-800\",\r\n\t};\r\n\r\n\tconst variantClasses = variants[variant] || variants.success;\r\n\r\n\treturn (\r\n\t\t<span\r\n\t\t\tclassName={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${variantClasses}`}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</span>\r\n\t);\r\n};\r\n\r\n// Customer Table Component\r\nconst CustomerTable = ({\r\n\tcustomers,\r\n\tpackages,\r\n\tonSelectCustomer,\r\n\tonRefresh,\r\n}) => {\r\n\tconst [editingCustomer, setEditingCustomer] = useState(null);\r\n\tconst [newCustomerData, setNewCustomerData] = useState({\r\n\t\tusername: \"\",\r\n\t\tpassword: \"\",\r\n\t\tname: \"\",\r\n\t\tphone: \"\",\r\n\t\trole: \"customer\",\r\n\t\tpackage_id: null,\r\n\t\tpackage_start_date: \"\", // new field for package start date\r\n\t});\r\n\tconst [showCreateModal, setShowCreateModal] = useState(false);\r\n\tconst [showEditModal, setShowEditModal] = useState(false);\r\n\tconst [showResetPasswordModal, setShowResetPasswordModal] = useState(false);\r\n\tconst [resetPasswordCustomerId, setResetPasswordCustomerId] = useState(null);\r\n\tconst [newPassword, setNewPassword] = useState(\"\");\r\n\tconst [notification, setNotification] = useState(null);\r\n\tconst [errors, setErrors] = useState({});\r\n\r\n\tconst currentUser = JSON.parse(localStorage.getItem(\"user\"));\r\n\r\n\t// Form validation\r\n\tconst validateForm = (data, isCreate = false) => {\r\n\t\tconst errors = {};\r\n\r\n\t\tif (!data.name.trim()) errors.name = \"Name is required\";\r\n\r\n\t\tif (isCreate) {\r\n\t\t\tif (!data.username.trim()) errors.username = \"Username is required\";\r\n\t\t\tif (!data.password.trim()) errors.password = \"Password is required\";\r\n\t\t\telse if (data.password.length < 6)\r\n\t\t\t\terrors.password = \"Password must be at least 6 characters\";\r\n\t\t}\r\n\r\n\t\treturn errors;\r\n\t};\r\n\r\n\tconst handleInputChange = (e) => {\r\n\t\tconst { name, value } = e.target;\r\n\t\tsetNewCustomerData((prev) => ({ ...prev, [name]: value }));\r\n\t};\r\n\r\n\t// New handler for date input change\r\n\tconst handleDateChange = (e) => {\r\n\t\tconst { name, value } = e.target;\r\n\t\tsetNewCustomerData((prev) => ({ ...prev, [name]: value }));\r\n\r\n\t\t// Clear specific error when field is changed\r\n\t\tif (errors[name]) {\r\n\t\t\tsetErrors((prev) => ({ ...prev, [name]: null }));\r\n\t\t}\r\n\t};\r\n\r\n\tconst openCreateModal = () => {\r\n\t\tsetNewCustomerData({\r\n\t\t\tusername: \"\",\r\n\t\t\tpassword: \"\",\r\n\t\t\tname: \"\",\r\n\t\t\tphone: \"\",\r\n\t\t\trole: \"customer\",\r\n\t\t\tpackage_id: null,\r\n\t\t});\r\n\t\tsetErrors({});\r\n\t\tsetShowCreateModal(true);\r\n\t};\r\n\r\n\tconst formatDateForInput = (dateString) => {\r\n\t\tif (!dateString) return \"\";\r\n\t\tconst date = new Date(dateString);\r\n\t\tconst year = date.getFullYear();\r\n\t\tconst month = (date.getMonth() + 1).toString().padStart(2, \"0\");\r\n\t\tconst day = date.getDate().toString().padStart(2, \"0\");\r\n\t\treturn `${year}-${month}-${day}`;\r\n\t};\r\n\r\n\tconst openEditModal = (customer) => {\r\n\t\tif (customer.id === currentUser?.id) return;\r\n\t\tsetEditingCustomer(customer);\r\n\t\tsetNewCustomerData({\r\n\t\t\tusername: customer.username || \"\",\r\n\t\t\tname: customer.name || \"\",\r\n\t\t\tphone: customer.phone || \"\",\r\n\t\t\tpassword: \"\",\r\n\t\t\trole: customer.role || \"customer\",\r\n\t\t\tpackage_id: customer.package_id || null,\r\n\t\t\tpackage_start_date: formatDateForInput(customer.package_start_date),\r\n\t\t});\r\n\t\tsetErrors({});\r\n\t\tsetShowEditModal(true);\r\n\t};\r\n\r\n\tconst closeModals = () => {\r\n\t\tsetShowCreateModal(false);\r\n\t\tsetShowEditModal(false);\r\n\t\tsetShowResetPasswordModal(false);\r\n\t\tsetEditingCustomer(null);\r\n\t\tsetResetPasswordCustomerId(null);\r\n\t\tsetNewPassword(\"\");\r\n\t\tsetErrors({});\r\n\t};\r\n\r\n\tconst createCustomer = async () => {\r\n\t\ttry {\r\n\t\t\tconst validationErrors = validateForm(newCustomerData, true);\r\n\t\t\tif (Object.keys(validationErrors).length > 0) {\r\n\t\t\t\tsetErrors(validationErrors);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Check if username already exists\r\n\t\t\tconst usernameExists = customers.some(\r\n\t\t\t\t(customer) => customer.username === newCustomerData.username\r\n\t\t\t);\r\n\t\t\tif (usernameExists) {\r\n\t\t\t\tsetErrors({\r\n\t\t\t\t\tusername: \"Username already exists. Please choose another.\",\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst payload = {\r\n\t\t\t\tusername: newCustomerData.username,\r\n\t\t\t\tpassword: newCustomerData.password,\r\n\t\t\t\tname: newCustomerData.name,\r\n\t\t\t\tphone: newCustomerData.phone || null,\r\n\t\t\t\trole: \"CUSTOMER\",\r\n\t\t\t\tpackage_id: newCustomerData.package_id || null,\r\n\t\t\t\tpackage_start_date: newCustomerData.package_start_date || null,\r\n\t\t\t};\r\n\r\n\t\t\tawait api.post(\"/users/customers\", payload);\r\n\r\n\t\t\tsetNotification({\r\n\t\t\t\tmessage: \"Customer created successfully\",\r\n\t\t\t\ttype: \"success\",\r\n\t\t\t});\r\n\t\t\tcloseModals();\r\n\t\t\tonRefresh();\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"Create customer error:\", error.response?.data || error);\r\n\t\t\tsetNotification({\r\n\t\t\t\tmessage:\r\n\t\t\t\t\t\"Failed to create customer: \" +\r\n\t\t\t\t\t(error.response?.data?.message || error.message),\r\n\t\t\t\ttype: \"error\",\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tconst updateCustomer = async () => {\r\n\t\ttry {\r\n\t\t\tif (!editingCustomer) return;\r\n\r\n\t\t\tconst validationErrors = validateForm(newCustomerData, false);\r\n\t\t\tif (Object.keys(validationErrors).length > 0) {\r\n\t\t\t\tsetErrors(validationErrors);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst payload = {\r\n\t\t\t\t...newCustomerData,\r\n\t\t\t\tpackage_start_date: newCustomerData.package_start_date || null,\r\n\t\t\t};\r\n\r\n\t\t\tawait api.put(`/users/customers/${editingCustomer.id}`, payload);\r\n\r\n\t\t\tsetNotification({\r\n\t\t\t\tmessage: \"Customer updated successfully\",\r\n\t\t\t\ttype: \"success\",\r\n\t\t\t});\r\n\t\t\tcloseModals();\r\n\t\t\tonRefresh();\r\n\t\t} catch (error) {\r\n\t\t\tsetNotification({\r\n\t\t\t\tmessage:\r\n\t\t\t\t\t\"Failed to update customer: \" +\r\n\t\t\t\t\t(error.response?.data?.message || error.message),\r\n\t\t\t\ttype: \"error\",\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tconst deleteCustomer = async (customerId) => {\r\n\t\ttry {\r\n\t\t\tawait api.delete(`/users/customers/${customerId}`);\r\n\r\n\t\t\tsetNotification({\r\n\t\t\t\tmessage: \"Customer deleted successfully\",\r\n\t\t\t\ttype: \"success\",\r\n\t\t\t});\r\n\t\t\tonRefresh();\r\n\t\t} catch (error) {\r\n\t\t\tsetNotification({\r\n\t\t\t\tmessage:\r\n\t\t\t\t\t\"Failed to delete customer: \" +\r\n\t\t\t\t\t(error.response?.data?.message || error.message),\r\n\t\t\t\ttype: \"error\",\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tconst confirmDelete = (customerId) => {\r\n\t\tif (window.confirm(\"Are you sure you want to delete this customer?\")) {\r\n\t\t\tdeleteCustomer(customerId);\r\n\t\t}\r\n\t};\r\n\r\n\tconst openResetPasswordModal = (customerId) => {\r\n\t\tsetResetPasswordCustomerId(customerId);\r\n\t\tsetNewPassword(\"\");\r\n\t\tsetShowResetPasswordModal(true);\r\n\t\tsetErrors({});\r\n\t};\r\n\r\n\tconst resetPassword = async () => {\r\n\t\tif (!newPassword) {\r\n\t\t\tsetErrors({ password: \"New password is required\" });\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (newPassword.length < 6) {\r\n\t\t\tsetErrors({ password: \"Password must be at least 6 characters\" });\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tawait api.post(\r\n\t\t\t\t`/users/customers/${resetPasswordCustomerId}/reset-password`,\r\n\t\t\t\t{\r\n\t\t\t\t\tnewPassword,\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\tsetNotification({\r\n\t\t\t\tmessage: \"Password reset successfully\",\r\n\t\t\t\ttype: \"success\",\r\n\t\t\t});\r\n\t\t\tcloseModals();\r\n\t\t\tconsole.log(\"ID yang dikirim:\", resetPasswordCustomerId);\r\n\t\t} catch (error) {\r\n\t\t\tsetNotification({\r\n\t\t\t\tmessage:\r\n\t\t\t\t\t\"Failed to reset password: \" +\r\n\t\t\t\t\t(error.response?.data?.message || error.message),\r\n\t\t\t\ttype: \"error\",\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tconst customerPackageName = (customer) => {\r\n\t\tconst pkg = packages.find((p) => p.id === customer.package_id);\r\n\t\treturn pkg ? pkg.name : \"No package\";\r\n\t};\r\n\r\n\tconst filteredCustomers = customers.filter(\r\n\t\t(customer) => ![\"ADMIN\", \"RESELLER\"].includes(customer.role)\r\n\t);\r\n\r\n\tconst closeNotification = () => {\r\n\t\tsetNotification(null);\r\n\t};\r\n\r\n\t// Animation CSS\r\n\tconst style = document.createElement(\"style\");\r\n\tstyle.innerText = `\r\n    @keyframes fadeIn {\r\n      from { opacity: 0; }\r\n      to { opacity: 1; }\r\n    }\r\n    \r\n    @keyframes slideDown {\r\n      from { transform: translateY(-10px); opacity: 0; }\r\n      to { transform: translateY(0); opacity: 1; }\r\n    }\r\n    \r\n    @keyframes modalIn {\r\n      from { opacity: 0; transform: scale(0.95); }\r\n      to { opacity: 1; transform: scale(1); }\r\n    }\r\n    \r\n    .animate-fade-in {\r\n      animation: fadeIn 0.3s ease-in-out;\r\n    }\r\n    \r\n    .animate-slide-down {\r\n      animation: slideDown 0.3s ease-in-out;\r\n    }\r\n    \r\n    .animate-modal-in {\r\n      animation: modalIn 0.3s ease-out;\r\n    }\r\n  `;\r\n\tdocument.head.appendChild(style);\r\n\r\n\treturn (\r\n\t\t<div className=\"bg-white shadow-lg rounded-lg p-6\">\r\n\t\t\t{notification && (\r\n\t\t\t\t<Notification\r\n\t\t\t\t\tmessage={notification.message}\r\n\t\t\t\t\ttype={notification.type}\r\n\t\t\t\t\tonClose={closeNotification}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\r\n\t\t\t<div className=\"flex justify-between items-center mb-6\">\r\n\t\t\t\t<h2 className=\"text-xl font-semibold text-gray-800\">\r\n\t\t\t\t\tCustomer Management\r\n\t\t\t\t</h2>\r\n\t\t\t\t<Button onClick={openCreateModal} className=\"flex items-center gap-2\">\r\n\t\t\t\t\t<Icons.Plus />\r\n\t\t\t\t\t<span>Add Customer</span>\r\n\t\t\t\t</Button>\r\n\t\t\t</div>\r\n\r\n\t\t\t{/* Create Customer Modal */}\r\n\t\t\t<Modal\r\n\t\t\t\tisOpen={showCreateModal}\r\n\t\t\t\tonClose={closeModals}\r\n\t\t\t\ttitle=\"Create New Customer\"\r\n\t\t\t>\r\n\t\t\t\t<div className=\"space-y-4\">\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\tlabel=\"Name\"\r\n\t\t\t\t\t\tid=\"create-name\"\r\n\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\tplaceholder=\"Customer name\"\r\n\t\t\t\t\t\tvalue={newCustomerData.name}\r\n\t\t\t\t\t\tonChange={handleInputChange}\r\n\t\t\t\t\t\terror={errors.name}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\tlabel=\"Username\"\r\n\t\t\t\t\t\tid=\"create-username\"\r\n\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\tplaceholder=\"Login username\"\r\n\t\t\t\t\t\tvalue={newCustomerData.username}\r\n\t\t\t\t\t\tonChange={handleInputChange}\r\n\t\t\t\t\t\terror={errors.username}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\tlabel=\"Phone\"\r\n\t\t\t\t\t\tid=\"create-phone\"\r\n\t\t\t\t\t\tname=\"phone\"\r\n\t\t\t\t\t\ttype=\"tel\"\r\n\t\t\t\t\t\tplaceholder=\"Phone number\"\r\n\t\t\t\t\t\tvalue={newCustomerData.phone}\r\n\t\t\t\t\t\tonChange={handleInputChange}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\tlabel=\"Password\"\r\n\t\t\t\t\t\tid=\"create-password\"\r\n\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\tplaceholder=\"Set password\"\r\n\t\t\t\t\t\tvalue={newCustomerData.password}\r\n\t\t\t\t\t\tonChange={handleInputChange}\r\n\t\t\t\t\t\terror={errors.password}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t{packages.length > 0 && (\r\n\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\tlabel=\"Package\"\r\n\t\t\t\t\t\t\tid=\"create-package\"\r\n\t\t\t\t\t\t\tname=\"package_id\"\r\n\t\t\t\t\t\t\tvalue={newCustomerData.package_id || \"\"}\r\n\t\t\t\t\t\t\tonChange={handleInputChange}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<option value=\"\">Select a package</option>\r\n\t\t\t\t\t\t\t{packages.map((pkg) => (\r\n\t\t\t\t\t\t\t\t<option key={pkg.id} value={pkg.id}>\r\n\t\t\t\t\t\t\t\t\t{pkg.name}\r\n\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\thtmlFor=\"create-package-start-date\"\r\n\t\t\t\t\t\t\tclassName=\"block text-sm font-medium text-gray-700 mb-1\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tPackage Start Date\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"date\"\r\n\t\t\t\t\t\t\tid=\"create-package-start-date\"\r\n\t\t\t\t\t\t\tname=\"package_start_date\"\r\n\t\t\t\t\t\t\tvalue={newCustomerData.package_start_date}\r\n\t\t\t\t\t\t\tonChange={handleDateChange}\r\n\t\t\t\t\t\t\tclassName=\"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md p-2 border\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"mt-6 flex justify-end gap-3\">\r\n\t\t\t\t\t<Button variant=\"secondary\" onClick={closeModals}>\r\n\t\t\t\t\t\tCancel\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button variant=\"success\" onClick={createCustomer}>\r\n\t\t\t\t\t\tCreate Customer\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\t\t\t</Modal>\r\n\r\n\t\t\t{/* Edit Customer Modal */}\r\n\t\t\t<Modal isOpen={showEditModal} onClose={closeModals} title=\"Edit Customer\">\r\n\t\t\t\t<div className=\"space-y-4\">\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\tlabel=\"Name\"\r\n\t\t\t\t\t\tid=\"edit-name\"\r\n\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\tplaceholder=\"Customer name\"\r\n\t\t\t\t\t\tvalue={newCustomerData.name}\r\n\t\t\t\t\t\tonChange={handleInputChange}\r\n\t\t\t\t\t\terror={errors.name}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\tlabel=\"Username\"\r\n\t\t\t\t\t\tid=\"edit-username\"\r\n\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\tplaceholder=\"Login username\"\r\n\t\t\t\t\t\tvalue={newCustomerData.username}\r\n\t\t\t\t\t\tonChange={handleInputChange}\r\n\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\tlabel=\"Phone\"\r\n\t\t\t\t\t\tid=\"edit-phone\"\r\n\t\t\t\t\t\tname=\"phone\"\r\n\t\t\t\t\t\tplaceholder=\"Phone number\"\r\n\t\t\t\t\t\tvalue={newCustomerData.phone}\r\n\t\t\t\t\t\tonChange={handleInputChange}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t{packages.length > 0 && (\r\n\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\tlabel=\"Package\"\r\n\t\t\t\t\t\t\tid=\"edit-package\"\r\n\t\t\t\t\t\t\tname=\"package_id\"\r\n\t\t\t\t\t\t\tvalue={newCustomerData.package_id || \"\"}\r\n\t\t\t\t\t\t\tonChange={handleInputChange}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<option value=\"\">Select a package</option>\r\n\t\t\t\t\t\t\t{packages.map((pkg) => (\r\n\t\t\t\t\t\t\t\t<option key={pkg.id} value={pkg.id}>\r\n\t\t\t\t\t\t\t\t\t{pkg.name}\r\n\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\thtmlFor=\"edit-package-start-date\"\r\n\t\t\t\t\t\t\tclassName=\"block text-sm font-medium text-gray-700 mb-1\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tPackage Start Date\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"date\"\r\n\t\t\t\t\t\t\tid=\"edit-package-start-date\"\r\n\t\t\t\t\t\t\tname=\"package_start_date\"\r\n\t\t\t\t\t\t\tvalue={newCustomerData.package_start_date}\r\n\t\t\t\t\t\t\tonChange={handleDateChange}\r\n\t\t\t\t\t\t\tclassName=\"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md p-2 border\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"mt-6 flex justify-end gap-3\">\r\n\t\t\t\t\t<Button variant=\"secondary\" onClick={closeModals}>\r\n\t\t\t\t\t\tCancel\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button variant=\"warning\" onClick={updateCustomer}>\r\n\t\t\t\t\t\tUpdate Customer\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\t\t\t</Modal>\r\n\r\n\t\t\t{/* Reset Password Modal */}\r\n\t\t\t<Modal\r\n\t\t\t\tisOpen={showResetPasswordModal}\r\n\t\t\t\tonClose={closeModals}\r\n\t\t\t\ttitle=\"Reset Password\"\r\n\t\t\t>\r\n\t\t\t\t<Input\r\n\t\t\t\t\tlabel=\"New Password\"\r\n\t\t\t\t\tid=\"reset-password\"\r\n\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\tplaceholder=\"Enter new password\"\r\n\t\t\t\t\tvalue={newPassword}\r\n\t\t\t\t\tonChange={(e) => setNewPassword(e.target.value)}\r\n\t\t\t\t\terror={errors.password}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<div className=\"mt-6 flex justify-end gap-3\">\r\n\t\t\t\t\t<Button variant=\"secondary\" onClick={closeModals}>\r\n\t\t\t\t\t\tCancel\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button variant=\"info\" onClick={resetPassword}>\r\n\t\t\t\t\t\tReset Password\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\t\t\t</Modal>\r\n\r\n\t\t\t{/* Customer Table */}\r\n\t\t\t<div className=\"mt-4 overflow-hidden shadow ring-1 ring-black ring-opacity-5 rounded-lg\">\r\n\t\t\t\t<table className=\"min-w-full divide-y divide-gray-200\">\r\n\t\t\t\t\t<thead className=\"bg-gray-50\">\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th\r\n\t\t\t\t\t\t\t\tscope=\"col\"\r\n\t\t\t\t\t\t\t\tclassName=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tCustomer Nama\r\n\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t<th\r\n\t\t\t\t\t\t\t\tscope=\"col\"\r\n\t\t\t\t\t\t\t\tclassName=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tPaket\r\n\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t<th\r\n\t\t\t\t\t\t\t\tscope=\"col\"\r\n\t\t\t\t\t\t\t\tclassName=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tStatus\r\n\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t<th\r\n\t\t\t\t\t\t\t\tscope=\"col\"\r\n\t\t\t\t\t\t\t\tclassName=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tAksi\r\n\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</thead>\r\n\t\t\t\t\t<tbody className=\"bg-white divide-y divide-gray-200\">\r\n\t\t\t\t\t\t{filteredCustomers.length === 0 ? (\r\n\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t<td\r\n\t\t\t\t\t\t\t\t\tcolSpan=\"4\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"px-6 py-4 text-sm text-gray-500 text-center\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tNo customers found\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\tfilteredCustomers.map((customer) => (\r\n\t\t\t\t\t\t\t\t<tr\r\n\t\t\t\t\t\t\t\t\tkey={customer.id}\r\n\t\t\t\t\t\t\t\t\tclassName=\"hover:bg-gray-50 transition-colors duration-150\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 whitespace-nowrap\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex-shrink-0 h-10 w-10 rounded-full bg-gradient-to-r from-blue-500 to-indigo-600 flex items-center justify-center text-white font-medium\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{customer.username.charAt(0).toUpperCase()}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"ml-4\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-sm font-medium text-gray-900\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tUsername:{customer.username}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-sm font-medium text-gray-900\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tNama:{customer.name}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{customer.phone && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-xs text-gray-500\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tNo hp:{customer.phone}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 whitespace-nowrap\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"text-sm text-gray-900\">\r\n\t\t\t\t\t\t\t\t\t\t\t{customerPackageName(customer)}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 whitespace-nowrap\">\r\n\t\t\t\t\t\t\t\t\t\t<Badge variant=\"success\">Active</Badge>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 whitespace-nowrap text-sm\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex space-x-3\">\r\n\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => onSelectCustomer(customer)}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-blue-600 hover:text-blue-900 flex items-center gap-1\"\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"View Payments\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Icons.Eye />\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t{customer.id === currentUser?.id ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-gray-400 cursor-not-allowed flex items-center gap-1\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"You cannot edit your own account here\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Icons.Edit />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => openEditModal(customer)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-yellow-600 hover:text-yellow-900 flex items-center gap-1\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"Edit Customer\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Icons.Edit />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => openResetPasswordModal(customer.id)}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-purple-600 hover:text-purple-900 flex items-center gap-1\"\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"Reset Password\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Icons.Key />\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => confirmDelete(customer.id)}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-red-600 hover:text-red-900 flex items-center gap-1\"\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"Delete Customer\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Icons.Delete />\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default CustomerTable;\r\n","import React, { useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport api from \"../../../utils/api\";\r\n\r\n// Icons component\r\nconst Icons = {\r\n\tPlus: () => (\r\n\t\t<svg\r\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\twidth=\"20\"\r\n\t\t\theight=\"20\"\r\n\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\tfill=\"none\"\r\n\t\t\tstroke=\"currentColor\"\r\n\t\t\tstrokeWidth=\"2\"\r\n\t\t\tstrokeLinecap=\"round\"\r\n\t\t\tstrokeLinejoin=\"round\"\r\n\t\t>\r\n\t\t\t<line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\"></line>\r\n\t\t\t<line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"></line>\r\n\t\t</svg>\r\n\t),\r\n\tEdit: () => (\r\n\t\t<svg\r\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\twidth=\"16\"\r\n\t\t\theight=\"16\"\r\n\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\tfill=\"none\"\r\n\t\t\tstroke=\"currentColor\"\r\n\t\t\tstrokeWidth=\"2\"\r\n\t\t\tstrokeLinecap=\"round\"\r\n\t\t\tstrokeLinejoin=\"round\"\r\n\t\t>\r\n\t\t\t<path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"></path>\r\n\t\t\t<path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path>\r\n\t\t</svg>\r\n\t),\r\n\tDelete: () => (\r\n\t\t<svg\r\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\twidth=\"16\"\r\n\t\t\theight=\"16\"\r\n\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\tfill=\"none\"\r\n\t\t\tstroke=\"currentColor\"\r\n\t\t\tstrokeWidth=\"2\"\r\n\t\t\tstrokeLinecap=\"round\"\r\n\t\t\tstrokeLinejoin=\"round\"\r\n\t\t>\r\n\t\t\t<polyline points=\"3 6 5 6 21 6\"></polyline>\r\n\t\t\t<path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path>\r\n\t\t</svg>\r\n\t),\r\n\tKey: () => (\r\n\t\t<svg\r\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\twidth=\"16\"\r\n\t\t\theight=\"16\"\r\n\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\tfill=\"none\"\r\n\t\t\tstroke=\"currentColor\"\r\n\t\t\tstrokeWidth=\"2\"\r\n\t\t\tstrokeLinecap=\"round\"\r\n\t\t\tstrokeLinejoin=\"round\"\r\n\t\t>\r\n\t\t\t<path d=\"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4\"></path>\r\n\t\t</svg>\r\n\t),\r\n\tEye: () => (\r\n\t\t<svg\r\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\twidth=\"16\"\r\n\t\t\theight=\"16\"\r\n\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\tfill=\"none\"\r\n\t\t\tstroke=\"currentColor\"\r\n\t\t\tstrokeWidth=\"2\"\r\n\t\t\tstrokeLinecap=\"round\"\r\n\t\t\tstrokeLinejoin=\"round\"\r\n\t\t>\r\n\t\t\t<path d=\"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z\"></path>\r\n\t\t\t<circle cx=\"12\" cy=\"12\" r=\"3\"></circle>\r\n\t\t</svg>\r\n\t),\r\n\tX: () => (\r\n\t\t<svg\r\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\twidth=\"24\"\r\n\t\t\theight=\"24\"\r\n\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\tfill=\"none\"\r\n\t\t\tstroke=\"currentColor\"\r\n\t\t\tstrokeWidth=\"2\"\r\n\t\t\tstrokeLinecap=\"round\"\r\n\t\t\tstrokeLinejoin=\"round\"\r\n\t\t>\r\n\t\t\t<line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\r\n\t\t\t<line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\r\n\t\t</svg>\r\n\t),\r\n\tCheckCircle: () => (\r\n\t\t<svg\r\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\twidth=\"20\"\r\n\t\t\theight=\"20\"\r\n\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\tfill=\"none\"\r\n\t\t\tstroke=\"currentColor\"\r\n\t\t\tstrokeWidth=\"2\"\r\n\t\t\tstrokeLinecap=\"round\"\r\n\t\t\tstrokeLinejoin=\"round\"\r\n\t\t>\r\n\t\t\t<path d=\"M22 11.08V12a10 10 0 1 1-5.93-9.14\"></path>\r\n\t\t\t<polyline points=\"22 4 12 14.01 9 11.01\"></polyline>\r\n\t\t</svg>\r\n\t),\r\n\tAlertCircle: () => (\r\n\t\t<svg\r\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\twidth=\"20\"\r\n\t\t\theight=\"20\"\r\n\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\tfill=\"none\"\r\n\t\t\tstroke=\"currentColor\"\r\n\t\t\tstrokeWidth=\"2\"\r\n\t\t\tstrokeLinecap=\"round\"\r\n\t\t\tstrokeLinejoin=\"round\"\r\n\t\t>\r\n\t\t\t<circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\r\n\t\t\t<line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"12\"></line>\r\n\t\t\t<line x1=\"12\" y1=\"16\" x2=\"12.01\" y2=\"16\"></line>\r\n\t\t</svg>\r\n\t),\r\n};\r\n\r\n// Notification component with animation\r\nconst Notification = ({ message, type, onClose }) => {\r\n\tconst bgColor = type === \"success\" ? \"bg-green-100\" : \"bg-red-100\";\r\n\tconst textColor = type === \"success\" ? \"text-green-800\" : \"text-red-800\";\r\n\tconst borderColor =\r\n\t\ttype === \"success\" ? \"border-green-400\" : \"border-red-400\";\r\n\tconst Icon = type === \"success\" ? Icons.CheckCircle : Icons.AlertCircle;\r\n\r\n\tReact.useEffect(() => {\r\n\t\tconst timer = setTimeout(() => {\r\n\t\t\tif (onClose) onClose();\r\n\t\t}, 4000);\r\n\t\treturn () => clearTimeout(timer);\r\n\t}, [onClose]);\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={`fixed top-4 right-4 flex items-center p-4 mb-4 ${bgColor} ${textColor} ${borderColor} border rounded-lg shadow-lg transition-all transform animate-fade-in z-50`}\r\n\t\t>\r\n\t\t\t<div className=\"inline-flex items-center justify-center flex-shrink-0 w-8 h-8 mr-2\">\r\n\t\t\t\t<Icon />\r\n\t\t\t</div>\r\n\t\t\t<div className=\"ml-2 text-sm font-medium\">{message}</div>\r\n\t\t\t<button\r\n\t\t\t\ttype=\"button\"\r\n\t\t\t\tonClick={onClose}\r\n\t\t\t\tclassName=\"ml-auto -mx-1.5 -my-1.5 rounded-lg p-1.5 inline-flex items-center justify-center h-8 w-8 hover:bg-gray-200\"\r\n\t\t\t>\r\n\t\t\t\t<span className=\"sr-only\">Close</span>\r\n\t\t\t\t<svg\r\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\twidth=\"16\"\r\n\t\t\t\t\theight=\"16\"\r\n\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\tstrokeWidth=\"2\"\r\n\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\r\n\t\t\t\t\t<line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\r\n\t\t\t\t</svg>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\n// Modern Modal Component with animation\r\nconst Modal = ({ isOpen, onClose, title, children }) => {\r\n\tif (!isOpen) return null;\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName=\"fixed inset-0 z-50 overflow-y-auto\"\r\n\t\t\taria-labelledby=\"modal-title\"\r\n\t\t\trole=\"dialog\"\r\n\t\t\taria-modal=\"true\"\r\n\t\t>\r\n\t\t\t<div className=\"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0\">\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName=\"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity\"\r\n\t\t\t\t\taria-hidden=\"true\"\r\n\t\t\t\t\tonClick={onClose}\r\n\t\t\t\t></div>\r\n\r\n\t\t\t\t<span\r\n\t\t\t\t\tclassName=\"hidden sm:inline-block sm:align-middle sm:h-screen\"\r\n\t\t\t\t\taria-hidden=\"true\"\r\n\t\t\t\t>\r\n\t\t\t\t\t&#8203;\r\n\t\t\t\t</span>\r\n\r\n\t\t\t\t<div className=\"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full animate-modal-in\">\r\n\t\t\t\t\t<div className=\"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4\">\r\n\t\t\t\t\t\t<div className=\"sm:flex sm:items-start\">\r\n\t\t\t\t\t\t\t<div className=\"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full\">\r\n\t\t\t\t\t\t\t\t<div className=\"flex justify-between items-center border-b pb-3\">\r\n\t\t\t\t\t\t\t\t\t<h3\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"text-lg leading-6 font-medium text-gray-900\"\r\n\t\t\t\t\t\t\t\t\t\tid=\"modal-title\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{title}\r\n\t\t\t\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tonClick={onClose}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"text-gray-400 hover:text-gray-500\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<Icons.X />\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"mt-4\">{children}</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\n// Button component with variants\r\nconst Button = ({\r\n\tchildren,\r\n\tvariant = \"primary\",\r\n\tclassName = \"\",\r\n\tonClick,\r\n\t...props\r\n}) => {\r\n\tconst baseClasses =\r\n\t\t\"inline-flex justify-center items-center px-4 py-2 border font-medium rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors duration-200\";\r\n\r\n\tconst variants = {\r\n\t\tprimary:\r\n\t\t\t\"bg-blue-600 hover:bg-blue-700 text-white border-transparent focus:ring-blue-500\",\r\n\t\tsecondary:\r\n\t\t\t\"bg-white hover:bg-gray-50 text-gray-700 border-gray-300 focus:ring-blue-500\",\r\n\t\tsuccess:\r\n\t\t\t\"bg-green-600 hover:bg-green-700 text-white border-transparent focus:ring-green-500\",\r\n\t\tdanger:\r\n\t\t\t\"bg-red-600 hover:bg-red-700 text-white border-transparent focus:ring-red-500\",\r\n\t\twarning:\r\n\t\t\t\"bg-yellow-600 hover:bg-yellow-700 text-white border-transparent focus:ring-yellow-500\",\r\n\t\tinfo: \"bg-purple-600 hover:bg-purple-700 text-white border-transparent focus:ring-purple-500\",\r\n\t};\r\n\r\n\tconst variantClasses = variants[variant] || variants.primary;\r\n\r\n\treturn (\r\n\t\t<button\r\n\t\t\tclassName={`${baseClasses} ${variantClasses} ${className}`}\r\n\t\t\tonClick={onClick}\r\n\t\t\t{...props}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</button>\r\n\t);\r\n};\r\n\r\n// Input component\r\nconst Input = ({ label, id, error, ...props }) => {\r\n\treturn (\r\n\t\t<div className=\"mb-4\">\r\n\t\t\t{label && (\r\n\t\t\t\t<label\r\n\t\t\t\t\thtmlFor={id}\r\n\t\t\t\t\tclassName=\"block text-sm font-medium text-gray-700 mb-1\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{label}\r\n\t\t\t\t</label>\r\n\t\t\t)}\r\n\t\t\t<input\r\n\t\t\t\tid={id}\r\n\t\t\t\tclassName={`shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md p-2 border ${\r\n\t\t\t\t\terror\r\n\t\t\t\t\t\t? \"border-red-300 text-red-900 placeholder-red-300 focus:outline-none focus:ring-red-500 focus:border-red-500\"\r\n\t\t\t\t\t\t: \"\"\r\n\t\t\t\t}`}\r\n\t\t\t\t{...props}\r\n\t\t\t/>\r\n\t\t\t{error && <p className=\"mt-1 text-sm text-red-600\">{error}</p>}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\n// Badge component\r\nconst Badge = ({ children, variant = \"success\" }) => {\r\n\tconst variants = {\r\n\t\tsuccess: \"bg-green-100 text-green-800\",\r\n\t\twarning: \"bg-yellow-100 text-yellow-800\",\r\n\t\tdanger: \"bg-red-100 text-red-800\",\r\n\t\tinfo: \"bg-blue-100 text-blue-800\",\r\n\t};\r\n\r\n\tconst variantClasses = variants[variant] || variants.success;\r\n\r\n\treturn (\r\n\t\t<span\r\n\t\t\tclassName={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${variantClasses}`}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</span>\r\n\t);\r\n};\r\n\r\nconst ResellerTable = ({\r\n\tresellers = [],\r\n\tcustomers = [],\r\n\tpackages = [],\r\n\tonCreateReseller,\r\n\tonUpdateReseller,\r\n\tonDeleteReseller,\r\n\tisLoading,\r\n\terror,\r\n}) => {\r\n\tconst [showCreateModal, setShowCreateModal] = useState(false);\r\n\tconst [showEditModal, setShowEditModal] = useState(false);\r\n\tconst [showResetPasswordModal, setShowResetPasswordModal] = useState(false);\r\n\tconst [resetPasswordResellerId, setResetPasswordResellerId] = useState(null);\r\n\tconst [newPassword, setNewPassword] = useState(\"\");\r\n\tconst [notification, setNotification] = useState(null);\r\n\tconst [errors, setErrors] = useState({});\r\n\tconst navigate = useNavigate();\r\n\r\n\tconst [resellerData, setResellerData] = useState({\r\n\t\tname: \"\",\r\n\t\tusername: \"\",\r\n\t\tphone: \"\",\r\n\t\tpassword: \"\",\r\n\t});\r\n\r\n\tconst [editingReseller, setEditingReseller] = useState(null);\r\n\r\n\t// Form validation\r\n\tconst validateForm = (data, isCreate = false) => {\r\n\t\tconst errors = {};\r\n\r\n\t\tif (!data.name.trim()) errors.name = \"Name is required\";\r\n\t\tif (!data.phone.trim()) errors.phone = \"Phone is required\";\r\n\r\n\t\tif (isCreate) {\r\n\t\t\tif (!data.username.trim()) errors.username = \"Username is required\";\r\n\t\t\tif (!data.password.trim()) errors.password = \"Password is required\";\r\n\t\t\telse if (data.password.length < 6)\r\n\t\t\t\terrors.password = \"Password must be at least 6 characters\";\r\n\t\t}\r\n\r\n\t\treturn errors;\r\n\t};\r\n\r\n\tconst handleInputChange = (e) => {\r\n\t\tconst { name, value } = e.target;\r\n\t\tsetResellerData((prev) => ({ ...prev, [name]: value }));\r\n\r\n\t\t// Clear specific error when field is changed\r\n\t\tif (errors[name]) {\r\n\t\t\tsetErrors((prev) => ({ ...prev, [name]: null }));\r\n\t\t}\r\n\t};\r\n\r\n\tconst openCreateModal = () => {\r\n\t\tsetResellerData({\r\n\t\t\tname: \"\",\r\n\t\t\tusername: \"\",\r\n\t\t\tphone: \"\",\r\n\t\t\tpassword: \"\",\r\n\t\t});\r\n\t\tsetErrors({});\r\n\t\tsetShowCreateModal(true);\r\n\t};\r\n\r\n\tconst openEditModal = (reseller) => {\r\n\t\tsetEditingReseller(reseller);\r\n\t\tsetResellerData({\r\n\t\t\tname: reseller.name || \"\",\r\n\t\t\tusername: reseller.username || \"\",\r\n\t\t\tphone: reseller.phone || \"\",\r\n\t\t\tpassword: \"\",\r\n\t\t});\r\n\t\tsetErrors({});\r\n\t\tsetShowEditModal(true);\r\n\t};\r\n\r\n\tconst closeModals = () => {\r\n\t\tsetShowCreateModal(false);\r\n\t\tsetShowEditModal(false);\r\n\t\tsetShowResetPasswordModal(false);\r\n\t\tsetEditingReseller(null);\r\n\t\tsetResetPasswordResellerId(null);\r\n\t\tsetNewPassword(\"\");\r\n\t\tsetErrors({});\r\n\t};\r\n\r\n\tconst createReseller = async () => {\r\n\t\ttry {\r\n\t\t\tconst validationErrors = validateForm(resellerData, true);\r\n\t\t\tif (Object.keys(validationErrors).length > 0) {\r\n\t\t\t\tsetErrors(validationErrors);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Check if username already exists\r\n\t\t\tconst usernameExists = resellers.some(\r\n\t\t\t\t(r) => r.username === resellerData.username\r\n\t\t\t);\r\n\t\t\tif (usernameExists) {\r\n\t\t\t\tsetErrors({\r\n\t\t\t\t\tusername: \"Username already exists. Please choose another.\",\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Check if name already exists\r\n\t\t\tconst nameExists = resellers.some((r) => r.name === resellerData.name);\r\n\t\t\tif (nameExists) {\r\n\t\t\t\tsetErrors({\r\n\t\t\t\t\tname: \"Reseller name already exists. Please choose another.\",\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tawait onCreateReseller({\r\n\t\t\t\t...resellerData,\r\n\t\t\t\trole: \"RESELLER\",\r\n\t\t\t});\r\n\r\n\t\t\tsetNotification({\r\n\t\t\t\tmessage: \"Reseller created successfully\",\r\n\t\t\t\ttype: \"success\",\r\n\t\t\t});\r\n\t\t\tcloseModals();\r\n\t\t} catch (error) {\r\n\t\t\tsetNotification({\r\n\t\t\t\tmessage: \"Failed to create reseller: \" + (error.message || \"\"),\r\n\t\t\t\ttype: \"error\",\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tconst updateReseller = async () => {\r\n\t\ttry {\r\n\t\t\tif (!editingReseller) return;\r\n\r\n\t\t\tconst validationErrors = validateForm(resellerData, false);\r\n\t\t\tif (Object.keys(validationErrors).length > 0) {\r\n\t\t\t\tsetErrors(validationErrors);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst updateData = {\r\n\t\t\t\tname: resellerData.name,\r\n\t\t\t\tphone: resellerData.phone,\r\n\t\t\t\t...(resellerData.password && { password: resellerData.password }),\r\n\t\t\t};\r\n\r\n\t\t\tawait onUpdateReseller(editingReseller.id, updateData);\r\n\r\n\t\t\tsetNotification({\r\n\t\t\t\tmessage: \"Reseller updated successfully\",\r\n\t\t\t\ttype: \"success\",\r\n\t\t\t});\r\n\t\t\tcloseModals();\r\n\t\t} catch (error) {\r\n\t\t\tsetNotification({\r\n\t\t\t\tmessage: \"Failed to update reseller: \" + (error.message || \"\"),\r\n\t\t\t\ttype: \"error\",\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tconst deleteReseller = async (resellerId) => {\r\n\t\ttry {\r\n\t\t\tawait onDeleteReseller(resellerId);\r\n\r\n\t\t\tsetNotification({\r\n\t\t\t\tmessage: \"Reseller deleted successfully\",\r\n\t\t\t\ttype: \"success\",\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\tsetNotification({\r\n\t\t\t\tmessage: \"Failed to delete reseller: \" + (error.message || \"\"),\r\n\t\t\t\ttype: \"error\",\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tconst confirmDelete = (resellerId) => {\r\n\t\tif (window.confirm(\"Are you sure you want to delete this reseller?\")) {\r\n\t\t\tdeleteReseller(resellerId);\r\n\t\t}\r\n\t};\r\n\r\n\tconst openResetPasswordModal = (resellerId) => {\r\n\t\tsetResetPasswordResellerId(resellerId);\r\n\t\tsetNewPassword(\"\");\r\n\t\tsetShowResetPasswordModal(true);\r\n\t\tsetErrors({});\r\n\t};\r\n\r\n\tconst resetPassword = async () => {\r\n\t\tif (!newPassword) {\r\n\t\t\tsetErrors({ password: \"New password is required\" });\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (newPassword.length < 6) {\r\n\t\t\tsetErrors({ password: \"Password must be at least 6 characters\" });\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tawait api.post(`/resellers/${resetPasswordResellerId}/reset-password`, {\r\n\t\t\t\tnewPassword,\r\n\t\t\t});\r\n\r\n\t\t\tsetNotification({\r\n\t\t\t\tmessage: \"Password reset successfully\",\r\n\t\t\t\ttype: \"success\",\r\n\t\t\t});\r\n\t\t\tcloseModals();\r\n\t\t} catch (error) {\r\n\t\t\tsetNotification({\r\n\t\t\t\tmessage: \"Failed to reset password: \" + (error.message || \"\"),\r\n\t\t\t\ttype: \"error\",\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleViewCustomers = (resellerId) => {\r\n\t\tnavigate(`/admin/resellers/${resellerId}/customers`);\r\n\t};\r\n\r\n\tconst closeNotification = () => {\r\n\t\tsetNotification(null);\r\n\t};\r\n\r\n\t// Animation CSS\r\n\tconst style = document.createElement(\"style\");\r\n\tstyle.innerText = `\r\n    @keyframes fadeIn {\r\n      from { opacity: 0; }\r\n      to { opacity: 1; }\r\n    }\r\n    \r\n    @keyframes slideDown {\r\n      from { transform: translateY(-10px); opacity: 0; }\r\n      to { transform: translateY(0); opacity: 1; }\r\n    }\r\n    \r\n    @keyframes modalIn {\r\n      from { opacity: 0; transform: scale(0.95); }\r\n      to { opacity: 1; transform: scale(1); }\r\n    }\r\n    \r\n    .animate-fade-in {\r\n      animation: fadeIn 0.3s ease-in-out;\r\n    }\r\n    \r\n    .animate-slide-down {\r\n      animation: slideDown 0.3s ease-in-out;\r\n    }\r\n    \r\n    .animate-modal-in {\r\n      animation: modalIn 0.3s ease-out;\r\n    }\r\n  `;\r\n\tdocument.head.appendChild(style);\r\n\r\n\treturn (\r\n\t\t<div className=\"bg-white shadow-lg rounded-lg p-6\">\r\n\t\t\t{notification && (\r\n\t\t\t\t<Notification\r\n\t\t\t\t\tmessage={notification.message}\r\n\t\t\t\t\ttype={notification.type}\r\n\t\t\t\t\tonClose={closeNotification}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\r\n\t\t\t<div className=\"flex justify-between items-center mb-6\">\r\n\t\t\t\t<h2 className=\"text-xl font-semibold text-gray-800\">\r\n\t\t\t\t\tReseller Management\r\n\t\t\t\t</h2>\r\n\t\t\t\t<Button onClick={openCreateModal} className=\"flex items-center gap-2\">\r\n\t\t\t\t\t<Icons.Plus />\r\n\t\t\t\t\t<span>Add Reseller</span>\r\n\t\t\t\t</Button>\r\n\t\t\t</div>\r\n\r\n\t\t\t{/* Create Reseller Modal */}\r\n\t\t\t<Modal\r\n\t\t\t\tisOpen={showCreateModal}\r\n\t\t\t\tonClose={closeModals}\r\n\t\t\t\ttitle=\"Create New Reseller\"\r\n\t\t\t>\r\n\t\t\t\t<div className=\"space-y-4\">\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\tlabel=\"Name\"\r\n\t\t\t\t\t\tid=\"create-name\"\r\n\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\tplaceholder=\"Reseller name\"\r\n\t\t\t\t\t\tvalue={resellerData.name}\r\n\t\t\t\t\t\tonChange={handleInputChange}\r\n\t\t\t\t\t\terror={errors.name}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\tlabel=\"Username\"\r\n\t\t\t\t\t\tid=\"create-username\"\r\n\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\tplaceholder=\"Login username\"\r\n\t\t\t\t\t\tvalue={resellerData.username}\r\n\t\t\t\t\t\tonChange={handleInputChange}\r\n\t\t\t\t\t\terror={errors.username}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\tlabel=\"Phone\"\r\n\t\t\t\t\t\tid=\"create-phone\"\r\n\t\t\t\t\t\tname=\"phone\"\r\n\t\t\t\t\t\ttype=\"tel\"\r\n\t\t\t\t\t\tplaceholder=\"Phone number\"\r\n\t\t\t\t\t\tvalue={resellerData.phone}\r\n\t\t\t\t\t\tonChange={handleInputChange}\r\n\t\t\t\t\t\terror={errors.phone}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\tlabel=\"Password\"\r\n\t\t\t\t\t\tid=\"create-password\"\r\n\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\tplaceholder=\"Set password\"\r\n\t\t\t\t\t\tvalue={resellerData.password}\r\n\t\t\t\t\t\tonChange={handleInputChange}\r\n\t\t\t\t\t\terror={errors.password}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"mt-6 flex justify-end gap-3\">\r\n\t\t\t\t\t<Button variant=\"secondary\" onClick={closeModals}>\r\n\t\t\t\t\t\tCancel\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button variant=\"success\" onClick={createReseller}>\r\n\t\t\t\t\t\tCreate Reseller\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\t\t\t</Modal>\r\n\r\n\t\t\t{/* Edit Reseller Modal */}\r\n\t\t\t<Modal isOpen={showEditModal} onClose={closeModals} title=\"Edit Reseller\">\r\n\t\t\t\t<div className=\"space-y-4\">\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\tlabel=\"Name\"\r\n\t\t\t\t\t\tid=\"edit-name\"\r\n\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\tplaceholder=\"Reseller name\"\r\n\t\t\t\t\t\tvalue={resellerData.name}\r\n\t\t\t\t\t\tonChange={handleInputChange}\r\n\t\t\t\t\t\terror={errors.name}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\tlabel=\"Username\"\r\n\t\t\t\t\t\tid=\"edit-username\"\r\n\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\tplaceholder=\"Login username\"\r\n\t\t\t\t\t\tvalue={resellerData.username}\r\n\t\t\t\t\t\tonChange={handleInputChange}\r\n\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\tlabel=\"Phone\"\r\n\t\t\t\t\t\tid=\"edit-phone\"\r\n\t\t\t\t\t\tname=\"phone\"\r\n\t\t\t\t\t\tplaceholder=\"Phone number\"\r\n\t\t\t\t\t\tvalue={resellerData.phone}\r\n\t\t\t\t\t\tonChange={handleInputChange}\r\n\t\t\t\t\t\terror={errors.phone}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\tlabel=\"New Password (Leave blank to keep current)\"\r\n\t\t\t\t\t\tid=\"edit-password\"\r\n\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\tplaceholder=\"New password\"\r\n\t\t\t\t\t\tvalue={resellerData.password}\r\n\t\t\t\t\t\tonChange={handleInputChange}\r\n\t\t\t\t\t\terror={errors.password}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"mt-6 flex justify-end gap-3\">\r\n\t\t\t\t\t<Button variant=\"secondary\" onClick={closeModals}>\r\n\t\t\t\t\t\tCancel\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button variant=\"warning\" onClick={updateReseller}>\r\n\t\t\t\t\t\tUpdate Reseller\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\t\t\t</Modal>\r\n\r\n\t\t\t{/* Reset Password Modal */}\r\n\t\t\t<Modal\r\n\t\t\t\tisOpen={showResetPasswordModal}\r\n\t\t\t\tonClose={closeModals}\r\n\t\t\t\ttitle=\"Reset Password\"\r\n\t\t\t>\r\n\t\t\t\t<Input\r\n\t\t\t\t\tlabel=\"New Password\"\r\n\t\t\t\t\tid=\"reset-password\"\r\n\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\tplaceholder=\"Enter new password\"\r\n\t\t\t\t\tvalue={newPassword}\r\n\t\t\t\t\tonChange={(e) => setNewPassword(e.target.value)}\r\n\t\t\t\t\terror={errors.password}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<div className=\"mt-6 flex justify-end gap-3\">\r\n\t\t\t\t\t<Button variant=\"secondary\" onClick={closeModals}>\r\n\t\t\t\t\t\tCancel\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button variant=\"info\" onClick={resetPassword}>\r\n\t\t\t\t\t\tReset Password\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\t\t\t</Modal>\r\n\r\n\t\t\t{/* Reseller Table */}\r\n\t\t\t<div className=\"mt-4 overflow-hidden shadow ring-1 ring-black ring-opacity-5 rounded-lg\">\r\n\t\t\t\t<table className=\"min-w-full divide-y divide-gray-200\">\r\n\t\t\t\t\t<thead className=\"bg-gray-50\">\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th\r\n\t\t\t\t\t\t\t\tscope=\"col\"\r\n\t\t\t\t\t\t\t\tclassName=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tReseller\r\n\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t<th\r\n\t\t\t\t\t\t\t\tscope=\"col\"\r\n\t\t\t\t\t\t\t\tclassName=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tPhone\r\n\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t<th\r\n\t\t\t\t\t\t\t\tscope=\"col\"\r\n\t\t\t\t\t\t\t\tclassName=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tCustomers\r\n\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t<th\r\n\t\t\t\t\t\t\t\tscope=\"col\"\r\n\t\t\t\t\t\t\t\tclassName=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tStatus\r\n\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t<th\r\n\t\t\t\t\t\t\t\tscope=\"col\"\r\n\t\t\t\t\t\t\t\tclassName=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tActions\r\n\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</thead>\r\n\t\t\t\t\t<tbody className=\"bg-white divide-y divide-gray-200\">\r\n\t\t\t\t\t\t{resellers.length === 0 ? (\r\n\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t<td\r\n\t\t\t\t\t\t\t\t\tcolSpan=\"5\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"px-6 py-4 text-sm text-gray-500 text-center\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tNo resellers found\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\tresellers.map((reseller) => (\r\n\t\t\t\t\t\t\t\t<tr\r\n\t\t\t\t\t\t\t\t\tkey={reseller.id}\r\n\t\t\t\t\t\t\t\t\tclassName=\"hover:bg-gray-50 transition-colors duration-150\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 whitespace-nowrap\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex-shrink-0 h-10 w-10 rounded-full bg-gradient-to-r from-blue-500 to-indigo-600 flex items-center justify-center text-white font-medium\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{reseller.name.charAt(0).toUpperCase()}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"ml-4\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-sm font-medium text-gray-900\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{reseller.name}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-xs text-gray-500\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tUsername: {reseller.username}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n\t\t\t\t\t\t\t\t\t\t{reseller.phone}\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tcustomers.filter((c) => c.reseller_id === reseller.id)\r\n\t\t\t\t\t\t\t\t\t\t\t\t.length\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 whitespace-nowrap\">\r\n\t\t\t\t\t\t\t\t\t\t<Badge variant=\"success\">Active</Badge>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 whitespace-nowrap text-sm\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex space-x-3\">\r\n\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleViewCustomers(reseller.id)}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-blue-600 hover:text-blue-900 flex items-center gap-1\"\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"View Customers\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Icons.Eye />\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => openEditModal(reseller)}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-yellow-600 hover:text-yellow-900 flex items-center gap-1\"\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"Edit Reseller\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Icons.Edit />\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => openResetPasswordModal(reseller.id)}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-purple-600 hover:text-purple-900 flex items-center gap-1\"\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"Reset Password\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Icons.Key />\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => confirmDelete(reseller.id)}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-red-600 hover:text-red-900 flex items-center gap-1\"\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"Delete Reseller\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Icons.Delete />\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default ResellerTable;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n\tformat,\r\n\tparseISO,\r\n\taddMonths,\r\n\tstartOfMonth,\r\n\tendOfMonth,\r\n\teachDayOfInterval,\r\n\tstartOfDay,\r\n\tisSameMonth,\r\n\tisAfter,\r\n\tisBefore,\r\n} from \"date-fns\";\r\nimport { id } from \"date-fns/locale\"; // Import Indonesian locale\r\nimport * as XLSX from \"xlsx\"; // For Excel export\r\nimport api from \"../../utils/api\"; // Adjust the import path as necessary\r\n\r\nconst PaymentConfirmationModal = ({\r\n\tcustomer,\r\n\tpackages,\r\n\tonClose,\r\n\tonSubmit = () => {}, // Provide default empty function to prevent errors\r\n}) => {\r\n\tconst [paymentAmount, setPaymentAmount] = useState(0);\r\n\tconst [paymentDate, setPaymentDate] = useState(new Date());\r\n\tconst [selectedDates, setSelectedDates] = useState([]);\r\n\tconst [paidDates, setPaidDates] = useState([]);\r\n\tconst [isSubmitting, setIsSubmitting] = useState(false);\r\n\tconst [currentMonthIndex, setCurrentMonthIndex] = useState(0);\r\n\tconst [isExporting, setIsExporting] = useState(false);\r\n\r\n\tconst customerPackage = packages?.find((p) => p.id === customer.package_id);\r\n\r\n\tuseEffect(() => {\r\n\t\t// Fetch paid dates from backend when modal opens or customer changes\r\n\t\tconst fetchPaidDates = async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst response = await api.get(`/payments/paid-dates/${customer.id}`);\r\n\t\t\t\tif (response.data && Array.isArray(response.data.paid_dates)) {\r\n\t\t\t\t\tsetPaidDates(response.data.paid_dates);\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error(\"Failed to fetch paid dates:\", error);\r\n\t\t\t}\r\n\t\t};\r\n\t\tfetchPaidDates();\r\n\t}, [customer.id]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (customerPackage) {\r\n\t\t\tcalculatePaymentAmount();\r\n\t\t}\r\n\t}, [selectedDates, customerPackage]);\r\n\r\n\tconst calculatePaymentAmount = () => {\r\n\t\tif (!customerPackage) return;\r\n\r\n\t\tlet amount = 0;\r\n\t\tconst dailyRate = customerPackage.payment_amount;\r\n\r\n\t\tswitch (customerPackage.payment_method) {\r\n\t\t\tcase \"DAILY\":\r\n\t\t\t\tamount = dailyRate * selectedDates.length;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"WEEKLY\":\r\n\t\t\t\t// Calculate based on complete weeks (round up)\r\n\t\t\t\tamount = dailyRate * 7 * Math.ceil(selectedDates.length / 7);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"MONTHLY\":\r\n\t\t\t\t// Calculate based on complete months (round up)\r\n\t\t\t\tamount = dailyRate * 30 * Math.ceil(selectedDates.length / 30);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tamount = dailyRate * selectedDates.length;\r\n\t\t}\r\n\r\n\t\tsetPaymentAmount(amount);\r\n\t};\r\n\r\n\tconst handleDateToggle = (date) => {\r\n\t\tif (paidDates.includes(date)) return;\r\n\r\n\t\tsetSelectedDates((prev) =>\r\n\t\t\tprev.includes(date) ? prev.filter((d) => d !== date) : [...prev, date]\r\n\t\t);\r\n\t};\r\n\r\n\tconst handleSubmit = async () => {\r\n\t\tif (typeof onSubmit !== \"function\") {\r\n\t\t\tconsole.error(\"onSubmit is not a function\");\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsetIsSubmitting(true);\r\n\t\ttry {\r\n\t\t\tconst paymentData = {\r\n\t\t\t\tcustomerId: customer.id,\r\n\t\t\t\tpackageId: customer.package_id,\r\n\t\t\t\tamount: paymentAmount,\r\n\t\t\t\tpaymentDate: paymentDate.toISOString(),\r\n\t\t\t\tselectedDates,\r\n\t\t\t\tpaymentMethod: customerPackage?.payment_method || \"DAILY\",\r\n\t\t\t};\r\n\r\n\t\t\tawait onSubmit(paymentData);\r\n\t\t\tonClose();\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"Payment submission failed:\", error);\r\n\t\t} finally {\r\n\t\t\tsetIsSubmitting(false);\r\n\t\t}\r\n\t};\r\n\r\n\t// Export to Excel function\r\n\tconst handleExportExcel = async () => {\r\n\t\tsetIsExporting(true);\r\n\t\ttry {\r\n\t\t\t// Fetch all payment history for this customer\r\n\t\t\tconst response = await api.get(`/payments/history/${customer.id}`);\r\n\t\t\tconst paymentHistory = response.data || [];\r\n\r\n\t\t\t// Prepare data for Excel\r\n\t\t\tconst excelData = [];\r\n\r\n\t\t\t// Add customer and package info\r\n\t\t\texcelData.push([\"RIWAYAT PEMBAYARAN\"]);\r\n\t\t\texcelData.push([\"\"]);\r\n\t\t\texcelData.push([\"Nama Pelanggan:\", customer.name]);\r\n\t\t\texcelData.push([\"Paket:\", customerPackage?.name || \"Tidak diketahui\"]);\r\n\t\t\texcelData.push([\r\n\t\t\t\t\"Metode Pembayaran:\",\r\n\t\t\t\tgetPaymentMethodIndonesian(customerPackage?.payment_method),\r\n\t\t\t]);\r\n\t\t\texcelData.push([\r\n\t\t\t\t\"Tarif:\",\r\n\t\t\t\t`Rp ${\r\n\t\t\t\t\tcustomerPackage?.payment_amount?.toLocaleString(\"id-ID\") || 0\r\n\t\t\t\t} per ${getPaymentMethodIndonesian(\r\n\t\t\t\t\tcustomerPackage?.payment_method\r\n\t\t\t\t)?.toLowerCase()}`,\r\n\t\t\t]);\r\n\t\t\texcelData.push([\r\n\t\t\t\t\"Tanggal Mulai Paket:\",\r\n\t\t\t\tcustomer.package_start_date\r\n\t\t\t\t\t? format(new Date(customer.package_start_date), \"dd MMMM yyyy\", {\r\n\t\t\t\t\t\t\tlocale: id,\r\n\t\t\t\t\t  })\r\n\t\t\t\t\t: \"Tidak diketahui\",\r\n\t\t\t]);\r\n\t\t\texcelData.push([\"\"]);\r\n\t\t\texcelData.push([\"DAFTAR TANGGAL KONFIRMASI:\"]);\r\n\t\t\texcelData.push([\r\n\t\t\t\t\"Tanggal\",\r\n\t\t\t\t\"Status\",\r\n\t\t\t\t\"Jumlah Pembayaran\",\r\n\t\t\t\t\"Tanggal Pembayaran\",\r\n\t\t\t]);\r\n\r\n\t\t\t// Add paid dates\r\n\t\t\tif (paidDates.length > 0) {\r\n\t\t\t\tpaidDates.forEach((dateString) => {\r\n\t\t\t\t\tconst paymentRecord = paymentHistory.find(\r\n\t\t\t\t\t\t(p) => p.selected_dates && p.selected_dates.includes(dateString)\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\texcelData.push([\r\n\t\t\t\t\t\tformat(new Date(dateString), \"dd MMMM yyyy\", { locale: id }),\r\n\t\t\t\t\t\t\"Sudah Dibayar\",\r\n\t\t\t\t\t\tpaymentRecord\r\n\t\t\t\t\t\t\t? `Rp ${paymentRecord.amount?.toLocaleString(\"id-ID\") || 0}`\r\n\t\t\t\t\t\t\t: \"\",\r\n\t\t\t\t\t\tpaymentRecord && paymentRecord.payment_date\r\n\t\t\t\t\t\t\t? format(new Date(paymentRecord.payment_date), \"dd MMMM yyyy\", {\r\n\t\t\t\t\t\t\t\t\tlocale: id,\r\n\t\t\t\t\t\t\t  })\r\n\t\t\t\t\t\t\t: \"\",\r\n\t\t\t\t\t]);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t// Add currently selected dates (if any)\r\n\t\t\tif (selectedDates.length > 0) {\r\n\t\t\t\texcelData.push([\"\"]);\r\n\t\t\t\texcelData.push([\"TANGGAL YANG DIPILIH SAAT INI:\"]);\r\n\t\t\t\tselectedDates.forEach((dateString) => {\r\n\t\t\t\t\texcelData.push([\r\n\t\t\t\t\t\tformat(new Date(dateString), \"dd MMMM yyyy\", { locale: id }),\r\n\t\t\t\t\t\t\"Belum Dikonfirmasi\",\r\n\t\t\t\t\t\t`Rp ${paymentAmount.toLocaleString(\"id-ID\")}`,\r\n\t\t\t\t\t\tformat(paymentDate, \"dd MMMM yyyy\", { locale: id }),\r\n\t\t\t\t\t]);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t// Create workbook and worksheet\r\n\t\t\tconst workbook = XLSX.utils.book_new();\r\n\t\t\tconst worksheet = XLSX.utils.aoa_to_sheet(excelData);\r\n\r\n\t\t\t// Set column widths\r\n\t\t\tconst columnWidths = [\r\n\t\t\t\t{ wch: 20 }, // Date column\r\n\t\t\t\t{ wch: 20 }, // Status column\r\n\t\t\t\t{ wch: 20 }, // Amount column\r\n\t\t\t\t{ wch: 20 }, // Payment date column\r\n\t\t\t];\r\n\t\t\tworksheet[\"!cols\"] = columnWidths;\r\n\r\n\t\t\t// Add worksheet to workbook\r\n\t\t\tXLSX.utils.book_append_sheet(workbook, worksheet, \"Riwayat Pembayaran\");\r\n\r\n\t\t\t// Generate filename\r\n\t\t\tconst fileName = `Riwayat_Pembayaran_${customer.name.replace(\r\n\t\t\t\t/\\s+/g,\r\n\t\t\t\t\"_\"\r\n\t\t\t)}_${format(new Date(), \"ddMMyyyy\")}.xlsx`;\r\n\r\n\t\t\t// Save file\r\n\t\t\tXLSX.writeFile(workbook, fileName);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"Export failed:\", error);\r\n\t\t\talert(\"Gagal mengekspor data. Silakan coba lagi.\");\r\n\t\t} finally {\r\n\t\t\tsetIsExporting(false);\r\n\t\t}\r\n\t};\r\n\r\n\t// Helper function to get payment method in Indonesian\r\n\tconst getPaymentMethodIndonesian = (method) => {\r\n\t\tswitch (method) {\r\n\t\t\tcase \"DAILY\":\r\n\t\t\t\treturn \"Harian\";\r\n\t\t\tcase \"WEEKLY\":\r\n\t\t\t\treturn \"Mingguan\";\r\n\t\t\tcase \"MONTHLY\":\r\n\t\t\t\treturn \"Bulanan\";\r\n\t\t\tdefault:\r\n\t\t\t\treturn method;\r\n\t\t}\r\n\t};\r\n\r\n\t// Determine start date for calendar grid\r\n\tconst startDate = customer.package_start_date\r\n\t\t? startOfDay(new Date(customer.package_start_date))\r\n\t\t: startOfDay(new Date());\r\n\r\n\t// Determine number of months to show\r\n\tconst monthsToShow = customerPackage?.payment_months || 1;\r\n\r\n\t// Generate months array\r\n\tconst months = Array.from({ length: monthsToShow }, (_, index) =>\r\n\t\taddMonths(startDate, index)\r\n\t);\r\n\r\n\t// Get current month data\r\n\tconst currentMonth = months[currentMonthIndex];\r\n\tconst monthStart = startOfMonth(currentMonth);\r\n\tconst monthEnd = endOfMonth(currentMonth);\r\n\r\n\t// Get all days in the current month view (including padding days)\r\n\tconst calendarStart = startOfDay(monthStart);\r\n\tconst calendarEnd = endOfMonth(monthEnd);\r\n\r\n\t// Get first day of week (0 = Sunday, 1 = Monday, etc.)\r\n\tconst firstDayOfWeek = monthStart.getDay();\r\n\r\n\t// Create padding days for the start of the month\r\n\tconst paddingStart = Array.from({ length: firstDayOfWeek }, (_, i) => {\r\n\t\tconst paddingDate = new Date(monthStart);\r\n\t\tpaddingDate.setDate(paddingDate.getDate() - (firstDayOfWeek - i));\r\n\t\treturn paddingDate;\r\n\t});\r\n\r\n\t// Get all days in the current month\r\n\tconst monthDays = eachDayOfInterval({\r\n\t\tstart: monthStart,\r\n\t\tend: monthEnd,\r\n\t});\r\n\r\n\t// Create padding days for the end of the month to complete the week\r\n\tconst lastDayOfWeek = monthEnd.getDay();\r\n\tconst paddingEnd = Array.from({ length: 6 - lastDayOfWeek }, (_, i) => {\r\n\t\tconst paddingDate = new Date(monthEnd);\r\n\t\tpaddingDate.setDate(paddingDate.getDate() + (i + 1));\r\n\t\treturn paddingDate;\r\n\t});\r\n\r\n\t// Combine all days\r\n\tconst allCalendarDays = [...paddingStart, ...monthDays, ...paddingEnd];\r\n\r\n\t// Check if date is within package duration\r\n\tconst isDateInPackageRange = (date) => {\r\n\t\tconst packageEndDate = addMonths(startDate, monthsToShow);\r\n\t\treturn !isBefore(date, startDate) && isBefore(date, packageEndDate);\r\n\t};\r\n\r\n\tconst navigateMonth = (direction) => {\r\n\t\tconst newIndex = currentMonthIndex + direction;\r\n\t\tif (newIndex >= 0 && newIndex < monthsToShow) {\r\n\t\t\tsetCurrentMonthIndex(newIndex);\r\n\t\t}\r\n\t};\r\n\r\n\t// Indonesian day headers\r\n\tconst indonesianDayHeaders = [\r\n\t\t\"Min\",\r\n\t\t\"Sen\",\r\n\t\t\"Sel\",\r\n\t\t\"Rab\",\r\n\t\t\"Kam\",\r\n\t\t\"Jum\",\r\n\t\t\"Sab\",\r\n\t];\r\n\r\n\treturn (\r\n\t\t<div className=\"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50\">\r\n\t\t\t<div className=\"bg-white rounded-lg shadow-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto\">\r\n\t\t\t\t{/* Modal header */}\r\n\t\t\t\t<div className=\"flex justify-between items-center mb-4\">\r\n\t\t\t\t\t<h2 className=\"text-xl font-bold\">Konfirmasi Pembayaran</h2>\r\n\t\t\t\t\t<div className=\"flex items-center space-x-2\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={handleExportExcel}\r\n\t\t\t\t\t\t\tdisabled={isExporting}\r\n\t\t\t\t\t\t\tclassName=\"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors duration-200 text-sm flex items-center space-x-2\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{isExporting ? (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"animate-spin h-4 w-4\"\r\n\t\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<circle\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"opacity-25\"\r\n\t\t\t\t\t\t\t\t\t\t\tcx=\"12\"\r\n\t\t\t\t\t\t\t\t\t\t\tcy=\"12\"\r\n\t\t\t\t\t\t\t\t\t\t\tr=\"10\"\r\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"4\"\r\n\t\t\t\t\t\t\t\t\t\t></circle>\r\n\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"opacity-75\"\r\n\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\td=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\r\n\t\t\t\t\t\t\t\t\t\t></path>\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t<span>Mengekspor...</span>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\t\t\td=\"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t<span>Export Excel</span>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={onClose}\r\n\t\t\t\t\t\t\tclassName=\"text-gray-500 hover:text-gray-800 text-2xl font-bold\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t×\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{/* Customer and package info */}\r\n\t\t\t\t<div className=\"mb-4\">\r\n\t\t\t\t\t<h3 className=\"font-medium mb-2\">Pelanggan: {customer.name}</h3>\r\n\t\t\t\t\t<p className=\"text-sm text-gray-600 mb-1\">\r\n\t\t\t\t\t\tPaket: {customerPackage?.name} (Rp{\" \"}\r\n\t\t\t\t\t\t{customerPackage?.payment_amount.toLocaleString(\"id-ID\")} per{\" \"}\r\n\t\t\t\t\t\t{getPaymentMethodIndonesian(\r\n\t\t\t\t\t\t\tcustomerPackage?.payment_method\r\n\t\t\t\t\t\t)?.toLowerCase()}\r\n\t\t\t\t\t\t{customerPackage?.payment_months\r\n\t\t\t\t\t\t\t? ` selama ${customerPackage.payment_months} bulan`\r\n\t\t\t\t\t\t\t: \"\"}\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{/* Payment date selection */}\r\n\t\t\t\t<div className=\"mb-4\">\r\n\t\t\t\t\t<label className=\"block font-medium mb-2\">Tanggal Pembayaran:</label>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"date\"\r\n\t\t\t\t\t\tvalue={format(paymentDate, \"yyyy-MM-dd\")}\r\n\t\t\t\t\t\tonChange={(e) => setPaymentDate(new Date(e.target.value))}\r\n\t\t\t\t\t\tclassName=\"border border-gray-300 rounded-md px-3 py-2 w-full\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{/* Month navigation */}\r\n\t\t\t\t<div className=\"mb-4\">\r\n\t\t\t\t\t<div className=\"flex items-center justify-between\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={() => navigateMonth(-1)}\r\n\t\t\t\t\t\t\tdisabled={currentMonthIndex === 0}\r\n\t\t\t\t\t\t\tclassName=\"p-2 rounded-full hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\tclassName=\"w-5 h-5\"\r\n\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\td=\"M15 19l-7-7 7-7\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t<h3 className=\"text-lg font-semibold\">\r\n\t\t\t\t\t\t\t{format(currentMonth, \"MMMM yyyy\", { locale: id })}\r\n\t\t\t\t\t\t</h3>\r\n\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={() => navigateMonth(1)}\r\n\t\t\t\t\t\t\tdisabled={currentMonthIndex === monthsToShow - 1}\r\n\t\t\t\t\t\t\tclassName=\"p-2 rounded-full hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\tclassName=\"w-5 h-5\"\r\n\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\td=\"M9 5l7 7-7 7\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{/* Date selection grid */}\r\n\t\t\t\t<div className=\"mb-6\">\r\n\t\t\t\t\t<h3 className=\"font-medium mb-2\">\r\n\t\t\t\t\t\tPilih Tanggal untuk Konfirmasi Pembayaran:\r\n\t\t\t\t\t</h3>\r\n\r\n\t\t\t\t\t{/* Day headers in Indonesian */}\r\n\t\t\t\t\t<div className=\"grid grid-cols-7 gap-1 mb-2\">\r\n\t\t\t\t\t\t{indonesianDayHeaders.map((day) => (\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tkey={day}\r\n\t\t\t\t\t\t\t\tclassName=\"text-center text-sm font-medium text-gray-500 py-2\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{day}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{/* Calendar grid */}\r\n\t\t\t\t\t<div className=\"grid grid-cols-7 gap-1\">\r\n\t\t\t\t\t\t{allCalendarDays.map((date, index) => {\r\n\t\t\t\t\t\t\tconst dateString = format(date, \"yyyy-MM-dd\");\r\n\t\t\t\t\t\t\tconst isPaid = paidDates.includes(dateString);\r\n\t\t\t\t\t\t\tconst isSelected = selectedDates.includes(dateString);\r\n\t\t\t\t\t\t\tconst isCurrentMonth = isSameMonth(date, currentMonth);\r\n\t\t\t\t\t\t\tconst isInPackageRange = isDateInPackageRange(date);\r\n\t\t\t\t\t\t\tconst isClickable = isCurrentMonth && isInPackageRange && !isPaid;\r\n\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\tonClick={() => isClickable && handleDateToggle(dateString)}\r\n\t\t\t\t\t\t\t\t\tdisabled={!isClickable}\r\n\t\t\t\t\t\t\t\t\tclassName={`\r\n\t\t\t\t\t\t\t\t\t\tp-2 text-center rounded text-sm transition-all duration-200 min-h-[40px] relative\r\n\t\t\t\t\t\t\t\t\t\t${\r\n\t\t\t\t\t\t\t\t\t\t\t!isCurrentMonth || !isInPackageRange\r\n\t\t\t\t\t\t\t\t\t\t\t\t? \"bg-gray-50 text-gray-300 cursor-not-allowed\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t: isPaid\r\n\t\t\t\t\t\t\t\t\t\t\t\t? \"bg-green-100 text-green-800 cursor-not-allowed\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t: isSelected\r\n\t\t\t\t\t\t\t\t\t\t\t\t? \"bg-indigo-600 text-white shadow-md transform scale-105\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t: \"bg-gray-100 text-gray-800 hover:bg-gray-200 hover:shadow-sm\"\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t`}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<span className=\"block\">{format(date, \"d\")}</span>\r\n\t\t\t\t\t\t\t\t\t{isPaid && (\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"block text-xs mt-1 font-medium\">\r\n\t\t\t\t\t\t\t\t\t\t\tLunas\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{/* Payment summary */}\r\n\t\t\t\t<div className=\"bg-gray-50 p-4 rounded-lg mb-6\">\r\n\t\t\t\t\t<h3 className=\"font-medium mb-2\">Ringkasan Pembayaran:</h3>\r\n\t\t\t\t\t<div className=\"grid grid-cols-2 gap-4\">\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<p className=\"text-sm text-gray-600\">Tanggal Dipilih:</p>\r\n\t\t\t\t\t\t\t<p className=\"font-semibold\">{selectedDates.length}</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<p className=\"text-sm text-gray-600\">Metode Pembayaran:</p>\r\n\t\t\t\t\t\t\t<p className=\"font-semibold\">\r\n\t\t\t\t\t\t\t\t{getPaymentMethodIndonesian(customerPackage?.payment_method)}\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"mt-3 pt-3 border-t border-gray-200\">\r\n\t\t\t\t\t\t<p className=\"text-lg font-bold text-indigo-600\">\r\n\t\t\t\t\t\t\tTotal Jumlah: Rp {paymentAmount.toLocaleString(\"id-ID\")}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{/* Action buttons */}\r\n\t\t\t\t<div className=\"flex justify-end space-x-3\">\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tonClick={onClose}\r\n\t\t\t\t\t\tclassName=\"px-6 py-2 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors duration-200\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tBatal\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tonClick={handleSubmit}\r\n\t\t\t\t\t\tdisabled={selectedDates.length === 0 || isSubmitting}\r\n\t\t\t\t\t\tclassName=\"px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors duration-200\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{isSubmitting ? \"Memproses...\" : \"Konfirmasi Pembayaran\"}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default PaymentConfirmationModal;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Modal from \"../../common/Modal\";\r\n\r\nconst ExportAllFilterModal = ({ customers, isOpen, onClose, onConfirm }) => {\r\n\tconst [startDate, setStartDate] = useState(\"\");\r\n\tconst [endDate, setEndDate] = useState(\"\");\r\n\tconst [selectedUserIds, setSelectedUserIds] = useState([]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!isOpen) {\r\n\t\t\tsetStartDate(\"\");\r\n\t\t\tsetEndDate(\"\");\r\n\t\t\tsetSelectedUserIds([]);\r\n\t\t}\r\n\t}, [isOpen]);\r\n\r\n\tconst toggleUserSelection = (userId) => {\r\n\t\tsetSelectedUserIds((prev) =>\r\n\t\t\tprev.includes(userId)\r\n\t\t\t\t? prev.filter((id) => id !== userId)\r\n\t\t\t\t: [...prev, userId]\r\n\t\t);\r\n\t};\r\n\r\n\tconst handleConfirm = () => {\r\n\t\tif (!startDate || !endDate) {\r\n\t\t\talert(\"Please select both start and end dates.\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (new Date(startDate) > new Date(endDate)) {\r\n\t\t\talert(\"Start date cannot be after end date.\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tonConfirm({ startDate, endDate, userIds: selectedUserIds });\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\tisOpen={isOpen}\r\n\t\t\tonClose={onClose}\r\n\t\t\ttitle=\"Export All - Filter Options\"\r\n\t\t>\r\n\t\t\t<div className=\"space-y-4\">\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<label className=\"block font-medium mb-1\">Start Date</label>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"date\"\r\n\t\t\t\t\t\tvalue={startDate}\r\n\t\t\t\t\t\tonChange={(e) => setStartDate(e.target.value)}\r\n\t\t\t\t\t\tclassName=\"w-full border border-gray-300 rounded px-3 py-2\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<label className=\"block font-medium mb-1\">End Date</label>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"date\"\r\n\t\t\t\t\t\tvalue={endDate}\r\n\t\t\t\t\t\tonChange={(e) => setEndDate(e.target.value)}\r\n\t\t\t\t\t\tclassName=\"w-full border border-gray-300 rounded px-3 py-2\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<label className=\"block font-medium mb-1\">Select Users</label>\r\n\t\t\t\t\t<div className=\"max-h-40 overflow-y-auto border border-gray-300 rounded p-2\">\r\n\t\t\t\t\t\t{customers.map((customer) => (\r\n\t\t\t\t\t\t\t<div key={customer.id} className=\"flex items-center mb-1\">\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\t\tid={`user-${customer.id}`}\r\n\t\t\t\t\t\t\t\t\tchecked={selectedUserIds.includes(customer.id)}\r\n\t\t\t\t\t\t\t\t\tonChange={() => toggleUserSelection(customer.id)}\r\n\t\t\t\t\t\t\t\t\tclassName=\"mr-2\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<label htmlFor={`user-${customer.id}`}>{customer.name}</label>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"flex justify-end space-x-2\">\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tonClick={onClose}\r\n\t\t\t\t\t\tclassName=\"px-4 py-2 bg-gray-300 rounded hover:bg-gray-400\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tCancel\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tonClick={handleConfirm}\r\n\t\t\t\t\t\tclassName=\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tExport\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</Modal>\r\n\t);\r\n};\r\n\r\nexport default ExportAllFilterModal;\r\n","import React, { useState, useEffect, useMemo } from \"react\";\r\nimport PaymentConfirmationModal from \"../../common/PaymentConfirmationModal\";\r\nimport ExportAllFilterModal from \"./ExportAllFilterModal\";\r\nimport api from \"../../../utils/api\";\r\nimport { format } from \"date-fns\";\r\nimport { id } from \"date-fns/locale\"; // For Indonesian date formatting\r\nimport * as XLSX from \"xlsx\";\r\n\r\nconst PaymentConfirmation = ({ customers, packages }) => {\r\n\tconst [selectedCustomer, setSelectedCustomer] = useState(null);\r\n\tconst [selectedPackage, setSelectedPackage] = useState(null);\r\n\tconst [showModal, setShowModal] = useState(false);\r\n\tconst [showExportAllModal, setShowExportAllModal] = useState(false);\r\n\tconst [refreshFlag, setRefreshFlag] = useState(false);\r\n\tconst [customerPaidDates, setCustomerPaidDates] = useState([]);\r\n\tconst [customerPaymentInfo, setCustomerPaymentInfo] = useState({});\r\n\tconst [isExporting, setIsExporting] = useState(false);\r\n\r\n\t// UI state\r\n\tconst [searchTerm, setSearchTerm] = useState(\"\");\r\n\tconst [sortBy, setSortBy] = useState(\"name\"); // name, package, lastPayment, paidAmount\r\n\tconst [sortOrder, setSortOrder] = useState(\"asc\"); // asc, desc\r\n\tconst [currentPage, setCurrentPage] = useState(1);\r\n\tconst [itemsPerPage, setItemsPerPage] = useState(10);\r\n\tconst [loading, setLoading] = useState(false);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (selectedCustomer) {\r\n\t\t\tconst pkg = packages.find((p) => p.id === selectedCustomer.package_id);\r\n\t\t\tsetSelectedPackage(pkg || null);\r\n\t\t}\r\n\t}, [selectedCustomer, packages]);\r\n\r\n\t// Fetch payment info for all customers on component mount\r\n\tuseEffect(() => {\r\n\t\tconst fetchAllPaymentInfo = async () => {\r\n\t\t\tsetLoading(true);\r\n\t\t\ttry {\r\n\t\t\t\tconst paymentInfoPromises = customers.map(async (customer) => {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tconst response = await api.get(`/payments/customer/${customer.id}`);\r\n\t\t\t\t\t\tconst payments = response.data;\r\n\r\n\t\t\t\t\t\tconst paidDatesSet = new Set();\r\n\t\t\t\t\t\tlet latestPaymentDate = null;\r\n\t\t\t\t\t\tlet totalPaidAmount = 0;\r\n\r\n\t\t\t\t\t\tpayments.forEach((payment) => {\r\n\t\t\t\t\t\t\tif (payment.payment_dates) {\r\n\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\tconst dates = JSON.parse(payment.payment_dates);\r\n\t\t\t\t\t\t\t\t\tdates.forEach((date) => paidDatesSet.add(date));\r\n\t\t\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\t\t\tconsole.error(\"Failed to parse payment_dates:\", e);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (payment.payment_date) {\r\n\t\t\t\t\t\t\t\tconst paymentDateObj = new Date(payment.payment_date);\r\n\t\t\t\t\t\t\t\tif (!latestPaymentDate || paymentDateObj > latestPaymentDate) {\r\n\t\t\t\t\t\t\t\t\tlatestPaymentDate = paymentDateObj;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (payment.amount) {\r\n\t\t\t\t\t\t\t\ttotalPaidAmount += payment.amount;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tcustomerId: customer.id,\r\n\t\t\t\t\t\t\tlast_payment_date: latestPaymentDate?.toISOString() || null,\r\n\t\t\t\t\t\t\tpaid_amount: totalPaidAmount,\r\n\t\t\t\t\t\t\tpaid_dates: Array.from(paidDatesSet),\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\tconsole.error(\r\n\t\t\t\t\t\t\t`Failed to fetch payments for customer ${customer.id}:`,\r\n\t\t\t\t\t\t\terror\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tcustomerId: customer.id,\r\n\t\t\t\t\t\t\tlast_payment_date: null,\r\n\t\t\t\t\t\t\tpaid_amount: 0,\r\n\t\t\t\t\t\t\tpaid_dates: [],\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tconst paymentInfoArray = await Promise.all(paymentInfoPromises);\r\n\t\t\t\tconst paymentInfoObj = {};\r\n\t\t\t\tpaymentInfoArray.forEach((info) => {\r\n\t\t\t\t\tpaymentInfoObj[info.customerId] = info;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tsetCustomerPaymentInfo(paymentInfoObj);\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error(\"Failed to fetch payment info:\", error);\r\n\t\t\t} finally {\r\n\t\t\t\tsetLoading(false);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tif (customers.length > 0) {\r\n\t\t\tfetchAllPaymentInfo();\r\n\t\t}\r\n\t}, [customers, refreshFlag]);\r\n\r\n\t// Helper function to get payment method in Indonesian\r\n\tconst getPaymentMethodIndonesian = (method) => {\r\n\t\tswitch (method) {\r\n\t\t\tcase \"DAILY\":\r\n\t\t\t\treturn \"Harian\";\r\n\t\t\tcase \"WEEKLY\":\r\n\t\t\t\treturn \"Mingguan\";\r\n\t\t\tcase \"MONTHLY\":\r\n\t\t\t\treturn \"Bulanan\";\r\n\t\t\tdefault:\r\n\t\t\t\treturn method;\r\n\t\t}\r\n\t};\r\n\r\n\t// Export to Excel function\r\n\tconst handleExportExcel = async (customer) => {\r\n\t\ttry {\r\n\t\t\tsetIsExporting(true);\r\n\r\n\t\t\t// Fetch payment history for this specific customer\r\n\t\t\tconst response = await api.get(`/payments/history/${customer.id}`);\r\n\t\t\tconst paymentHistory = response.data || [];\r\n\t\t\tconst customerPackage = packages.find(\r\n\t\t\t\t(p) => p.id === customer.package_id\r\n\t\t\t);\r\n\r\n\t\t\t// Prepare Excel data\r\n\t\t\tconst excelData = [\r\n\t\t\t\t[\"RIWAYAT PEMBAYARAN\"],\r\n\t\t\t\t[\"\"],\r\n\t\t\t\t[\"Nama Pelanggan:\", customer.name],\r\n\t\t\t\t[\"Paket:\", customerPackage?.name || \"Tidak diketahui\"],\r\n\t\t\t\t[\r\n\t\t\t\t\t\"Metode Pembayaran:\",\r\n\t\t\t\t\tgetPaymentMethodIndonesian(customerPackage?.payment_method),\r\n\t\t\t\t],\r\n\t\t\t\t[\r\n\t\t\t\t\t\"Tarif:\",\r\n\t\t\t\t\t`Rp ${customerPackage?.payment_amount?.toLocaleString(\"id-ID\") || 0}`,\r\n\t\t\t\t],\r\n\t\t\t\t[\r\n\t\t\t\t\t\"Tanggal Mulai Paket:\",\r\n\t\t\t\t\tcustomer.package_start_date\r\n\t\t\t\t\t\t? format(new Date(customer.package_start_date), \"dd MMMM yyyy\", {\r\n\t\t\t\t\t\t\t\tlocale: id,\r\n\t\t\t\t\t\t  })\r\n\t\t\t\t\t\t: \"Tidak diketahui\",\r\n\t\t\t\t],\r\n\t\t\t\t[\"\"],\r\n\t\t\t\t[\"DAFTAR TANGGAL KONFIRMASI:\"],\r\n\t\t\t\t[\"Tanggal\", \"Status\", \"Jumlah Pembayaran\", \"Tanggal Pembayaran\"],\r\n\t\t\t];\r\n\r\n\t\t\t// Process payment history\r\n\t\t\tpaymentHistory.forEach((payment) => {\r\n\t\t\t\tlet dates = [];\r\n\t\t\t\ttry {\r\n\t\t\t\t\tdates = payment.payment_dates\r\n\t\t\t\t\t\t? JSON.parse(payment.payment_dates)\r\n\t\t\t\t\t\t: [];\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.error(\"Error parsing payment dates:\", e);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (dates.length > 0) {\r\n\t\t\t\t\tdates.forEach((date) => {\r\n\t\t\t\t\t\texcelData.push([\r\n\t\t\t\t\t\t\tformat(new Date(date), \"dd MMMM yyyy\", { locale: id }),\r\n\t\t\t\t\t\t\tpayment.status || \"-\",\r\n\t\t\t\t\t\t\t`Rp ${payment.amount?.toLocaleString(\"id-ID\") || 0}`,\r\n\t\t\t\t\t\t\tpayment.payment_date\r\n\t\t\t\t\t\t\t\t? format(new Date(payment.payment_date), \"dd MMMM yyyy\", {\r\n\t\t\t\t\t\t\t\t\t\tlocale: id,\r\n\t\t\t\t\t\t\t\t  })\r\n\t\t\t\t\t\t\t\t: \"-\",\r\n\t\t\t\t\t\t]);\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\texcelData.push([\r\n\t\t\t\t\t\t\"-\",\r\n\t\t\t\t\t\tpayment.status || \"-\",\r\n\t\t\t\t\t\t`Rp ${payment.amount?.toLocaleString(\"id-ID\") || 0}`,\r\n\t\t\t\t\t\tpayment.payment_date\r\n\t\t\t\t\t\t\t? format(new Date(payment.payment_date), \"dd MMMM yyyy\", {\r\n\t\t\t\t\t\t\t\t\tlocale: id,\r\n\t\t\t\t\t\t\t  })\r\n\t\t\t\t\t\t\t: \"-\",\r\n\t\t\t\t\t]);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// Create and save Excel file\r\n\t\t\tconst workbook = XLSX.utils.book_new();\r\n\t\t\tconst worksheet = XLSX.utils.aoa_to_sheet(excelData);\r\n\t\t\tXLSX.utils.book_append_sheet(workbook, worksheet, \"Riwayat Pembayaran\");\r\n\r\n\t\t\tconst fileName = `Riwayat_Pembayaran_${customer.name.replace(\r\n\t\t\t\t/\\s+/g,\r\n\t\t\t\t\"_\"\r\n\t\t\t)}_${format(new Date(), \"ddMMyyyy\")}.xlsx`;\r\n\t\t\tXLSX.writeFile(workbook, fileName);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"Export failed:\", error);\r\n\t\t\talert(\"Gagal mengekspor data. Silakan coba lagi.\");\r\n\t\t} finally {\r\n\t\t\tsetIsExporting(false);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleExportAllToExcel = async (filters) => {\r\n\t\ttry {\r\n\t\t\tsetLoading(true);\r\n\t\t\tconst workbook = XLSX.utils.book_new();\r\n\r\n\t\t\t// Summary sheet\r\n\t\t\tconst summaryData = [\r\n\t\t\t\t[\"LAPORAN PEMBAYARAN PELANGGAN\"],\r\n\t\t\t\t[\"Tanggal Export\", new Date().toLocaleDateString(\"id-ID\")],\r\n\t\t\t\t[\"Total Pelanggan\", 0], // Will be updated later\r\n\t\t\t\t[\"\"],\r\n\t\t\t\t[\"DAFTAR PELANGGAN\"],\r\n\t\t\t\t[\r\n\t\t\t\t\t\"No\",\r\n\t\t\t\t\t\"Nama Pelanggan\",\r\n\t\t\t\t\t\"Paket\",\r\n\t\t\t\t\t\"Metode Pembayaran\",\r\n\t\t\t\t\t\"Tarif\",\r\n\t\t\t\t\t\"Tanggal Mulai Paket\",\r\n\t\t\t\t\t\"Total Pembayaran\",\r\n\t\t\t\t\t\"Terakhir Bayar\",\r\n\t\t\t\t],\r\n\t\t\t];\r\n\r\n\t\t\t// Build query parameters from filters\r\n\t\t\tconst queryParams = new URLSearchParams();\r\n\t\t\tif (filters) {\r\n\t\t\t\tif (filters.startDate)\r\n\t\t\t\t\tqueryParams.append(\"startDate\", filters.startDate);\r\n\t\t\t\tif (filters.endDate) queryParams.append(\"endDate\", filters.endDate);\r\n\t\t\t\tif (filters.userIds?.length > 0) {\r\n\t\t\t\t\tqueryParams.append(\"userIds\", filters.userIds.join(\",\"));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Fetch data using the constructed query parameters\r\n\t\t\tconst response = await api.get(\r\n\t\t\t\t`/payments/export-all?${queryParams.toString()}`\r\n\t\t\t);\r\n\t\t\tconst filteredCustomers = response.data || [];\r\n\r\n\t\t\t// Update total customers count\r\n\t\t\tsummaryData[2][1] = filteredCustomers.length;\r\n\r\n\t\t\t// Process each customer\r\n\t\t\tfilteredCustomers.forEach((customer, index) => {\r\n\t\t\t\tconst pkg = customer.package;\r\n\t\t\t\tconst payments = customer.payments || [];\r\n\r\n\t\t\t\t// Calculate total paid and last payment date\r\n\t\t\t\tconst totalPaid = payments.reduce((sum, p) => sum + (p.amount || 0), 0);\r\n\t\t\t\tconst lastPayment = payments[0]; // Already ordered by date desc\r\n\r\n\t\t\t\t// Add to summary\r\n\t\t\t\tsummaryData.push([\r\n\t\t\t\t\tindex + 1,\r\n\t\t\t\t\tcustomer.customer_name || customer.name, // Handle both response formats\r\n\t\t\t\t\tpkg?.name || \"-\",\r\n\t\t\t\t\tpkg ? getPaymentMethodIndonesian(pkg.payment_method) : \"-\",\r\n\t\t\t\t\tpkg?.payment_amount\r\n\t\t\t\t\t\t? `Rp ${pkg.payment_amount.toLocaleString(\"id-ID\")}`\r\n\t\t\t\t\t\t: \"-\",\r\n\t\t\t\t\tcustomer.package_start_date\r\n\t\t\t\t\t\t? format(new Date(customer.package_start_date), \"dd/MM/yyyy\")\r\n\t\t\t\t\t\t: \"-\",\r\n\t\t\t\t\t`Rp ${totalPaid.toLocaleString(\"id-ID\")}`,\r\n\t\t\t\t\tlastPayment?.payment_date\r\n\t\t\t\t\t\t? format(new Date(lastPayment.payment_date), \"dd/MM/yyyy\")\r\n\t\t\t\t\t\t: \"-\",\r\n\t\t\t\t]);\r\n\r\n\t\t\t\t// Create detail sheet\r\n\t\t\t\tconst detailData = [\r\n\t\t\t\t\t[`Detail Pembayaran: ${customer.customer_name || customer.name}`],\r\n\t\t\t\t\t[\"Paket\", pkg?.name || \"-\"],\r\n\t\t\t\t\t[\r\n\t\t\t\t\t\t\"Metode Pembayaran\",\r\n\t\t\t\t\t\tpkg ? getPaymentMethodIndonesian(pkg.payment_method) : \"-\",\r\n\t\t\t\t\t],\r\n\t\t\t\t\t[\r\n\t\t\t\t\t\t\"Tarif\",\r\n\t\t\t\t\t\tpkg?.payment_amount\r\n\t\t\t\t\t\t\t? `Rp ${pkg.payment_amount.toLocaleString(\"id-ID\")}`\r\n\t\t\t\t\t\t\t: \"-\",\r\n\t\t\t\t\t],\r\n\t\t\t\t\t[\r\n\t\t\t\t\t\t\"Tanggal Mulai Paket\",\r\n\t\t\t\t\t\tcustomer.package_start_date\r\n\t\t\t\t\t\t\t? format(new Date(customer.package_start_date), \"dd/MM/yyyy\")\r\n\t\t\t\t\t\t\t: \"-\",\r\n\t\t\t\t\t],\r\n\t\t\t\t\t[\"\"],\r\n\t\t\t\t\t[\"RIWAYAT PEMBAYARAN\"],\r\n\t\t\t\t\t[\"Tanggal\", \"Jumlah\", \"Status\", \"Tanggal Pembayaran\"],\r\n\t\t\t\t];\r\n\r\n\t\t\t\t// Add payment history\r\n\t\t\t\tpayments.forEach((payment) => {\r\n\t\t\t\t\t// Parse payment dates (from payment_dates field)\r\n\t\t\t\t\tlet dates = [];\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\t// Handle both string and already parsed array cases\r\n\t\t\t\t\t\tif (payment.payment_dates) {\r\n\t\t\t\t\t\t\tdates =\r\n\t\t\t\t\t\t\t\ttypeof payment.payment_dates === \"string\"\r\n\t\t\t\t\t\t\t\t\t? JSON.parse(payment.payment_dates)\r\n\t\t\t\t\t\t\t\t\t: payment.payment_dates;\r\n\r\n\t\t\t\t\t\t\t// Ensure dates is an array\r\n\t\t\t\t\t\t\tif (!Array.isArray(dates)) {\r\n\t\t\t\t\t\t\t\tdates = [];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\tconsole.error(\"Error parsing payment dates:\", e);\r\n\t\t\t\t\t\tdates = [];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Add each payment date as a separate row\r\n\t\t\t\t\tif (dates.length > 0) {\r\n\t\t\t\t\t\tdates.forEach((date) => {\r\n\t\t\t\t\t\t\tdetailData.push([\r\n\t\t\t\t\t\t\t\tformat(new Date(date), \"dd/MM/yyyy\"), // Format the payment date\r\n\t\t\t\t\t\t\t\t`Rp ${payment.amount?.toLocaleString(\"id-ID\") || 0}`,\r\n\t\t\t\t\t\t\t\tpayment.status || \"-\",\r\n\t\t\t\t\t\t\t\tpayment.payment_date\r\n\t\t\t\t\t\t\t\t\t? format(new Date(payment.payment_date), \"dd/MM/yyyy\") // Format the confirmation date\r\n\t\t\t\t\t\t\t\t\t: \"-\",\r\n\t\t\t\t\t\t\t]);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// If no specific dates, just show the payment record\r\n\t\t\t\t\t\tdetailData.push([\r\n\t\t\t\t\t\t\t\"-\", // No specific date\r\n\t\t\t\t\t\t\t`Rp ${payment.amount?.toLocaleString(\"id-ID\") || 0}`,\r\n\t\t\t\t\t\t\tpayment.status || \"-\",\r\n\t\t\t\t\t\t\tpayment.payment_date\r\n\t\t\t\t\t\t\t\t? format(new Date(payment.payment_date), \"dd/MM/yyyy\")\r\n\t\t\t\t\t\t\t\t: \"-\",\r\n\t\t\t\t\t\t]);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Add detail sheet to workbook\r\n\t\t\t\tconst worksheet = XLSX.utils.aoa_to_sheet(detailData);\r\n\t\t\t\tXLSX.utils.book_append_sheet(\r\n\t\t\t\t\tworkbook,\r\n\t\t\t\t\tworksheet,\r\n\t\t\t\t\t`Pelanggan ${index + 1}`.substring(0, 31)\r\n\t\t\t\t);\r\n\t\t\t});\r\n\r\n\t\t\t// Add summary sheet\r\n\t\t\tconst summaryWorksheet = XLSX.utils.aoa_to_sheet(summaryData);\r\n\t\t\tXLSX.utils.book_append_sheet(workbook, summaryWorksheet, \"Ringkasan\");\r\n\r\n\t\t\t// Generate and save file\r\n\t\t\tconst fileName = `Laporan_Pembayaran_${format(\r\n\t\t\t\tnew Date(),\r\n\t\t\t\t\"yyyyMMdd\"\r\n\t\t\t)}.xlsx`;\r\n\t\t\tXLSX.writeFile(workbook, fileName);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"Export failed:\", error);\r\n\t\t\talert(\"Gagal mengekspor data. Silakan coba lagi.\");\r\n\t\t} finally {\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\t// Filter and sort customers\r\n\tconst filteredAndSortedCustomers = useMemo(() => {\r\n\t\tlet filtered = customers.filter((customer) => {\r\n\t\t\tconst pkg = packages.find((p) => p.id === customer.package_id);\r\n\t\t\tconst searchLower = searchTerm.toLowerCase();\r\n\r\n\t\t\treturn (\r\n\t\t\t\tcustomer.name.toLowerCase().includes(searchLower) ||\r\n\t\t\t\tpkg?.name.toLowerCase().includes(searchLower) ||\r\n\t\t\t\tfalse\r\n\t\t\t);\r\n\t\t});\r\n\r\n\t\t// Sort customers\r\n\t\tfiltered.sort((a, b) => {\r\n\t\t\tlet aValue, bValue;\r\n\r\n\t\t\tswitch (sortBy) {\r\n\t\t\t\tcase \"name\":\r\n\t\t\t\t\taValue = a.name.toLowerCase();\r\n\t\t\t\t\tbValue = b.name.toLowerCase();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"package\":\r\n\t\t\t\t\tconst pkgA = packages.find((p) => p.id === a.package_id);\r\n\t\t\t\t\tconst pkgB = packages.find((p) => p.id === b.package_id);\r\n\t\t\t\t\taValue = pkgA?.name.toLowerCase() || \"\";\r\n\t\t\t\t\tbValue = pkgB?.name.toLowerCase() || \"\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"lastPayment\":\r\n\t\t\t\t\taValue = customerPaymentInfo[a.id]?.last_payment_date || \"\";\r\n\t\t\t\t\tbValue = customerPaymentInfo[b.id]?.last_payment_date || \"\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"paidAmount\":\r\n\t\t\t\t\taValue = customerPaymentInfo[a.id]?.paid_amount || 0;\r\n\t\t\t\t\tbValue = customerPaymentInfo[b.id]?.paid_amount || 0;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\taValue = a.name.toLowerCase();\r\n\t\t\t\t\tbValue = b.name.toLowerCase();\r\n\t\t\t}\r\n\r\n\t\t\tif (aValue < bValue) return sortOrder === \"asc\" ? -1 : 1;\r\n\t\t\tif (aValue > bValue) return sortOrder === \"asc\" ? 1 : -1;\r\n\t\t\treturn 0;\r\n\t\t});\r\n\r\n\t\treturn filtered;\r\n\t}, [customers, packages, customerPaymentInfo, searchTerm, sortBy, sortOrder]);\r\n\r\n\t// Pagination\r\n\tconst totalPages = Math.ceil(\r\n\t\tfilteredAndSortedCustomers.length / itemsPerPage\r\n\t);\r\n\tconst paginatedCustomers = filteredAndSortedCustomers.slice(\r\n\t\t(currentPage - 1) * itemsPerPage,\r\n\t\tcurrentPage * itemsPerPage\r\n\t);\r\n\r\n\t// Reset to first page when search changes\r\n\tuseEffect(() => {\r\n\t\tsetCurrentPage(1);\r\n\t}, [searchTerm, sortBy, sortOrder]);\r\n\r\n\tconst handleSort = (field) => {\r\n\t\tif (sortBy === field) {\r\n\t\t\tsetSortOrder(sortOrder === \"asc\" ? \"desc\" : \"asc\");\r\n\t\t} else {\r\n\t\t\tsetSortBy(field);\r\n\t\t\tsetSortOrder(\"asc\");\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleOpenModal = async (customer) => {\r\n\t\tconst paymentInfo = customerPaymentInfo[customer.id];\r\n\t\tif (paymentInfo) {\r\n\t\t\tsetCustomerPaidDates(paymentInfo.paid_dates);\r\n\t\t\tsetSelectedCustomer({\r\n\t\t\t\t...customer,\r\n\t\t\t\tpaid_dates: paymentInfo.paid_dates,\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tsetCustomerPaidDates([]);\r\n\t\t\tsetSelectedCustomer({\r\n\t\t\t\t...customer,\r\n\t\t\t\tpaid_dates: [],\r\n\t\t\t});\r\n\t\t}\r\n\t\tsetShowModal(true);\r\n\t};\r\n\r\n\tconst handleCloseModal = () => {\r\n\t\tsetShowModal(false);\r\n\t\tsetSelectedCustomer(null);\r\n\t\tsetSelectedPackage(null);\r\n\t};\r\n\r\n\tconst handleConfirmPayment = async (paymentData) => {\r\n\t\tif (!selectedCustomer) return;\r\n\t\ttry {\r\n\t\t\tconst payload = {\r\n\t\t\t\tcustomerId: selectedCustomer.id,\r\n\t\t\t\tpackageId: selectedPackage?.id,\r\n\t\t\t\tamount: paymentData.amount,\r\n\t\t\t\tpaymentDate: paymentData.paymentDate,\r\n\t\t\t\tselectedDates: paymentData.selectedDates,\r\n\t\t\t\tpaymentMethod: selectedPackage?.payment_method || \"DAILY\",\r\n\t\t\t};\r\n\t\t\tconst response = await api.post(\"/payments\", payload);\r\n\t\t\talert(response.data.message);\r\n\t\t\tsetShowModal(false);\r\n\t\t\tsetRefreshFlag(!refreshFlag);\r\n\t\t} catch (error) {\r\n\t\t\talert(\"Failed to confirm payment: \" + error.message);\r\n\t\t}\r\n\t};\r\n\r\n\tconst formatDate = (dateStr) => {\r\n\t\tif (!dateStr) return \"-\";\r\n\t\tconst date = new Date(dateStr);\r\n\t\treturn date.toLocaleDateString();\r\n\t};\r\n\r\n\tconst SortIcon = ({ field }) => {\r\n\t\tif (sortBy !== field) {\r\n\t\t\treturn (\r\n\t\t\t\t<svg\r\n\t\t\t\t\tclassName=\"w-4 h-4 text-gray-400\"\r\n\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\td=\"M8 9l4-4 4 4m0 6l-4 4-4-4\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</svg>\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn sortOrder === \"asc\" ? (\r\n\t\t\t<svg\r\n\t\t\t\tclassName=\"w-4 h-4 text-blue-600\"\r\n\t\t\t\tfill=\"none\"\r\n\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t>\r\n\t\t\t\t<path\r\n\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\td=\"M5 15l7-7 7 7\"\r\n\t\t\t\t/>\r\n\t\t\t</svg>\r\n\t\t) : (\r\n\t\t\t<svg\r\n\t\t\t\tclassName=\"w-4 h-4 text-blue-600\"\r\n\t\t\t\tfill=\"none\"\r\n\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t>\r\n\t\t\t\t<path\r\n\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\td=\"M19 9l-7 7-7-7\"\r\n\t\t\t\t/>\r\n\t\t\t</svg>\r\n\t\t);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"bg-white rounded-xl shadow-lg p-6\">\r\n\t\t\t<div className=\"mb-6\">\r\n\t\t\t\t<h2 className=\"text-2xl font-bold text-gray-800 mb-4\">\r\n\t\t\t\t\tPayment Confirmation\r\n\t\t\t\t</h2>\r\n\r\n\t\t\t\t<button\r\n\t\t\t\t\tonClick={() => setShowExportAllModal(true)}\r\n\t\t\t\t\tdisabled={loading || customers.length === 0}\r\n\t\t\t\t\tclassName=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors duration-200 ml-2\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{loading ? (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\tclassName=\"animate-spin -ml-1 mr-2 h-4 w-4 text-white\"\r\n\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<circle\r\n\t\t\t\t\t\t\t\t\tclassName=\"opacity-25\"\r\n\t\t\t\t\t\t\t\t\tcx=\"12\"\r\n\t\t\t\t\t\t\t\t\tcy=\"12\"\r\n\t\t\t\t\t\t\t\t\tr=\"10\"\r\n\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\tstrokeWidth=\"4\"\r\n\t\t\t\t\t\t\t\t></circle>\r\n\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\tclassName=\"opacity-75\"\r\n\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\td=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\r\n\t\t\t\t\t\t\t\t></path>\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\tExporting...\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\tclassName=\"w-4 h-4 mr-2\"\r\n\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\td=\"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\tExport All\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</button>\r\n\r\n\t\t\t\t{/* Search and Controls */}\r\n\t\t\t\t<div className=\"flex flex-col sm:flex-row gap-4 mb-4\">\r\n\t\t\t\t\t{/* Search */}\r\n\t\t\t\t\t<div className=\"flex-1\">\r\n\t\t\t\t\t\t<div className=\"relative\">\r\n\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\tclassName=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\"\r\n\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\td=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Search customers or packages...\"\r\n\t\t\t\t\t\t\t\tvalue={searchTerm}\r\n\t\t\t\t\t\t\t\tonChange={(e) => setSearchTerm(e.target.value)}\r\n\t\t\t\t\t\t\t\tclassName=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{/* Items per page */}\r\n\t\t\t\t\t<div className=\"flex items-center gap-2\">\r\n\t\t\t\t\t\t<label className=\"text-sm text-gray-600 whitespace-nowrap\">\r\n\t\t\t\t\t\t\tItems per page:\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\tvalue={itemsPerPage}\r\n\t\t\t\t\t\t\tonChange={(e) => setItemsPerPage(Number(e.target.value))}\r\n\t\t\t\t\t\t\tclassName=\"border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<option value={5}>5</option>\r\n\t\t\t\t\t\t\t<option value={10}>10</option>\r\n\t\t\t\t\t\t\t<option value={20}>20</option>\r\n\t\t\t\t\t\t\t<option value={50}>50</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{/* Results info */}\r\n\t\t\t\t{/* Results info */}\r\n\t\t\t\t<div className=\"flex justify-between items-center text-sm text-gray-600\">\r\n\t\t\t\t\t<span>\r\n\t\t\t\t\t\tShowing{\" \"}\r\n\t\t\t\t\t\t{paginatedCustomers.length > 0\r\n\t\t\t\t\t\t\t? (currentPage - 1) * itemsPerPage + 1\r\n\t\t\t\t\t\t\t: 0}{\" \"}\r\n\t\t\t\t\t\tto{\" \"}\r\n\t\t\t\t\t\t{paginatedCustomers.length > 0\r\n\t\t\t\t\t\t\t? Math.min(\r\n\t\t\t\t\t\t\t\t\tcurrentPage * itemsPerPage,\r\n\t\t\t\t\t\t\t\t\tfilteredAndSortedCustomers.length\r\n\t\t\t\t\t\t\t  )\r\n\t\t\t\t\t\t\t: 0}{\" \"}\r\n\t\t\t\t\t\tof {filteredAndSortedCustomers.length} entries\r\n\t\t\t\t\t\t{searchTerm && ` (filtered from ${customers.length} total entries)`}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t{loading && (\r\n\t\t\t\t\t\t<span className=\"text-blue-600\">Loading payment info...</span>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t{/* Table */}\r\n\t\t\t<div className=\"overflow-x-auto border border-gray-200 rounded-lg\">\r\n\t\t\t\t<table className=\"min-w-full divide-y divide-gray-200\">\r\n\t\t\t\t\t<thead className=\"bg-gray-50\">\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th\r\n\t\t\t\t\t\t\t\tclassName=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 select-none\"\r\n\t\t\t\t\t\t\t\tonClick={() => handleSort(\"name\")}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-1\">\r\n\t\t\t\t\t\t\t\t\tCustomer Name\r\n\t\t\t\t\t\t\t\t\t<SortIcon field=\"name\" />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t<th\r\n\t\t\t\t\t\t\t\tclassName=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 select-none\"\r\n\t\t\t\t\t\t\t\tonClick={() => handleSort(\"package\")}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-1\">\r\n\t\t\t\t\t\t\t\t\tPackage\r\n\t\t\t\t\t\t\t\t\t<SortIcon field=\"package\" />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t<th\r\n\t\t\t\t\t\t\t\tclassName=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 select-none\"\r\n\t\t\t\t\t\t\t\tonClick={() => handleSort(\"lastPayment\")}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-1\">\r\n\t\t\t\t\t\t\t\t\tLast Payment Date\r\n\t\t\t\t\t\t\t\t\t<SortIcon field=\"lastPayment\" />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t<th\r\n\t\t\t\t\t\t\t\tclassName=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 select-none\"\r\n\t\t\t\t\t\t\t\tonClick={() => handleSort(\"paidAmount\")}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-1\">\r\n\t\t\t\t\t\t\t\t\tPaid Amount\r\n\t\t\t\t\t\t\t\t\t<SortIcon field=\"paidAmount\" />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n\t\t\t\t\t\t\t\tAction\r\n\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</thead>\r\n\t\t\t\t\t<tbody className=\"bg-white divide-y divide-gray-200\">\r\n\t\t\t\t\t\t{paginatedCustomers.length === 0 ? (\r\n\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t<td colSpan={5} className=\"px-6 py-8 text-center text-gray-500\">\r\n\t\t\t\t\t\t\t\t\t{loading ? (\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center justify-center gap-2\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600\"></div>\r\n\t\t\t\t\t\t\t\t\t\t\tLoading...\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t) : searchTerm ? (\r\n\t\t\t\t\t\t\t\t\t\t`No customers found matching \"${searchTerm}\"`\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\"No customers available\"\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\tpaginatedCustomers.map((customer) => {\r\n\t\t\t\t\t\t\t\tconst pkg = packages.find((p) => p.id === customer.package_id);\r\n\t\t\t\t\t\t\t\tconst paymentInfo = customerPaymentInfo[customer.id];\r\n\t\t\t\t\t\t\t\tconst isPaid =\r\n\t\t\t\t\t\t\t\t\tpaymentInfo?.paid_amount && paymentInfo.paid_amount > 0;\r\n\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<tr\r\n\t\t\t\t\t\t\t\t\t\tkey={customer.id}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"hover:bg-gray-50 transition-colors duration-150\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 whitespace-nowrap\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold text-sm mr-3\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{customer.name.charAt(0).toUpperCase()}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-sm font-medium text-gray-900\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{customer.name}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 whitespace-nowrap\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-sm text-gray-900\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{pkg ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{pkg.name}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-gray-400\">No package</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 whitespace-nowrap\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={`text-sm ${\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tisPaid\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"text-green-600 font-semibold\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"text-gray-500\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{formatDate(paymentInfo?.last_payment_date) || \"-\"}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 whitespace-nowrap\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-sm font-medium text-gray-900\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{paymentInfo?.paid_amount ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-green-600\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tRp {paymentInfo.paid_amount.toLocaleString()}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-gray-400\">-</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 whitespace-nowrap\">\r\n\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleOpenModal(customer)}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-200\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-4 h-4 mr-1\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M5 13l4 4L19 7\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t\t\tConfirm\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleExportExcel(customer)} // Pass customer here\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={isExporting}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200 ml-2\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-4 h-4 mr-1\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t\t\tExport\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\r\n\t\t\t{/* Pagination */}\r\n\t\t\t{totalPages > 1 && (\r\n\t\t\t\t<div className=\"mt-6 flex items-center justify-between\">\r\n\t\t\t\t\t<div className=\"flex items-center gap-2\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={() => setCurrentPage(1)}\r\n\t\t\t\t\t\t\tdisabled={currentPage === 1}\r\n\t\t\t\t\t\t\tclassName=\"px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tFirst\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={() => setCurrentPage(currentPage - 1)}\r\n\t\t\t\t\t\t\tdisabled={currentPage === 1}\r\n\t\t\t\t\t\t\tclassName=\"px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tPrevious\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"flex items-center gap-1\">\r\n\t\t\t\t\t\t{Array.from({ length: Math.min(5, totalPages) }, (_, i) => {\r\n\t\t\t\t\t\t\tlet pageNum;\r\n\t\t\t\t\t\t\tif (totalPages <= 5) {\r\n\t\t\t\t\t\t\t\tpageNum = i + 1;\r\n\t\t\t\t\t\t\t} else if (currentPage <= 3) {\r\n\t\t\t\t\t\t\t\tpageNum = i + 1;\r\n\t\t\t\t\t\t\t} else if (currentPage >= totalPages - 2) {\r\n\t\t\t\t\t\t\t\tpageNum = totalPages - 4 + i;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tpageNum = currentPage - 2 + i;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tkey={pageNum}\r\n\t\t\t\t\t\t\t\t\tonClick={() => setCurrentPage(pageNum)}\r\n\t\t\t\t\t\t\t\t\tclassName={`px-3 py-2 text-sm border rounded-md ${\r\n\t\t\t\t\t\t\t\t\t\tcurrentPage === pageNum\r\n\t\t\t\t\t\t\t\t\t\t\t? \"bg-blue-600 text-white border-blue-600\"\r\n\t\t\t\t\t\t\t\t\t\t\t: \"border-gray-300 hover:bg-gray-50\"\r\n\t\t\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{pageNum}\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"flex items-center gap-2\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={() => setCurrentPage(currentPage + 1)}\r\n\t\t\t\t\t\t\tdisabled={currentPage === totalPages}\r\n\t\t\t\t\t\t\tclassName=\"px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tNext\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={() => setCurrentPage(totalPages)}\r\n\t\t\t\t\t\t\tdisabled={currentPage === totalPages}\r\n\t\t\t\t\t\t\tclassName=\"px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tLast\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\r\n\t\t\t{/* Modal */}\r\n\t\t\t{showModal && selectedCustomer && selectedPackage && (\r\n\t\t\t\t<PaymentConfirmationModal\r\n\t\t\t\t\tcustomer={\r\n\t\t\t\t\t\tselectedCustomer\r\n\t\t\t\t\t\t\t? { ...selectedCustomer, paid_dates: customerPaidDates }\r\n\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpackages={packages}\r\n\t\t\t\t\tonClose={handleCloseModal}\r\n\t\t\t\t\tonSubmit={handleConfirmPayment}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\r\n\t\t\t{/* Export All Filter Modal */}\r\n\t\t\t{showExportAllModal && (\r\n\t\t\t\t<ExportAllFilterModal\r\n\t\t\t\t\tcustomers={customers}\r\n\t\t\t\t\tisOpen={showExportAllModal}\r\n\t\t\t\t\tonClose={() => setShowExportAllModal(false)}\r\n\t\t\t\t\tonConfirm={(filters) => {\r\n\t\t\t\t\t\tsetShowExportAllModal(false);\r\n\t\t\t\t\t\thandleExportAllToExcel(filters);\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default PaymentConfirmation;\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { format } from \"date-fns\";\r\nimport PaymentCalendar from \"./PaymentCalendar\";\r\n\r\nimport AdminLayout from \"../layouts/AdminLayout\";\r\nimport ProductForm from \"./Products/ProductForm\";\r\nimport ProductList from \"./Products/ProductList\";\r\nimport PackageForm from \"./Packages/PackageForm\";\r\nimport PackageList from \"./Packages/PackageList\";\r\nimport CustomerTable from \"./Customers/CustomerTable\";\r\nimport ResellerTable from \"./Resellers/ResellerTable\";\r\nimport PaymentConfirmation from \"./Payments/PaymentConfirmation\";\r\nimport PaymentConfirmationModal from \"../common/PaymentConfirmationModal\";\r\n\r\nimport api from \"../../utils/api\";\r\n\r\nfunction AdminPanel() {\r\n\t// State management\r\n\tconst [packages, setPackages] = useState([]);\r\n\tconst [customers, setCustomers] = useState([]);\r\n\tconst [products, setProducts] = useState([]);\r\n\tconst [resellers, setResellers] = useState([]);\r\n\tconst [selectedCustomer, setSelectedCustomer] = useState(null);\r\n\tconst [selectedPackage, setSelectedPackage] = useState(null);\r\n\tconst [paymentStartDate, setPaymentStartDate] = useState(new Date());\r\n\tconst [paymentMonths, setPaymentMonths] = useState(1);\r\n\tconst [activeTab, setActiveTab] = useState(() => {\r\n\t\t// Use localStorage to remember the active tab\r\n\t\treturn localStorage.getItem(\"adminActiveTab\") || \"products\";\r\n\t});\r\n\tconst [isLoading, setIsLoading] = useState(false);\r\n\tconst [searchTerm, setSearchTerm] = useState(\"\");\r\n\tconst [sortBy, setSortBy] = useState(\"name\");\r\n\tconst [sortedProducts, setSortedProducts] = useState([]);\r\n\tconst [currentPage, setCurrentPage] = useState(1);\r\n\tconst [error, setError] = useState(null);\r\n\tconst [selectedProduct, setSelectedProduct] = useState(null);\r\n\tconst [stream, setStream] = useState(null);\r\n\tconst [isCreating, setIsCreating] = useState(false);\r\n\tconst [showPaymentModal, setShowPaymentModal] = useState(false);\r\n\tconst navigate = useNavigate();\r\n\r\n\tconst videoRef = useRef(null);\r\n\tconst productsPerPage = 5;\r\n\tconst indexOfLastProduct = currentPage * productsPerPage;\r\n\tconst currentProducts = sortedProducts.slice(0, indexOfLastProduct);\r\n\r\n\t// Form states\r\n\tconst [newProduct, setNewProduct] = useState({\r\n\t\tname: \"\",\r\n\t\tprice: 0,\r\n\t\tdescription: \"\",\r\n\t});\r\n\r\n\tconst filteredProducts = products.filter((product) =>\r\n\t\tproduct.name.toLowerCase().includes(searchTerm.toLowerCase())\r\n\t);\r\n\r\n\tconst [newPackage, setNewPackage] = useState({\r\n\t\tname: \"\",\r\n\t\tdescription: \"\",\r\n\t\tpayment_method: \"daily\",\r\n\t\tpayment_amount: 0,\r\n\t\tpayment_months: 0,\r\n\t\tproductIds: [],\r\n\t});\r\n\r\n\t// Save active tab to localStorage when it changes\r\n\tuseEffect(() => {\r\n\t\tlocalStorage.setItem(\"adminActiveTab\", activeTab);\r\n\t}, [activeTab]);\r\n\r\n\t// Fetch data on component mount\r\n\tuseEffect(() => {\r\n\t\t// Fetch data immediately on component mount\r\n\t\tfetchData();\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchPackages();\r\n\t\tfetchProducts();\r\n\t\t// fetchCustomers(); // Removed because fetchCustomers is not defined\r\n\t\t// fetchResellers();\r\n\t}, []);\r\n\r\n\t// Media stream handler\r\n\tconst getMediaStream = async () => {\r\n\t\ttry {\r\n\t\t\tconst mediaStream = await navigator.mediaDevices.getUserMedia({\r\n\t\t\t\taudio: true,\r\n\t\t\t\tvideo: true,\r\n\t\t\t});\r\n\t\t\tif (videoRef.current) {\r\n\t\t\t\tvideoRef.current.srcObject = mediaStream;\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error(\"Error accessing media devices:\", err);\r\n\t\t}\r\n\t};\r\n\r\n\t// Main fetch function - improved with better error handling\r\n\tconst fetchData = async () => {\r\n\t\tsetIsLoading(true);\r\n\t\tsetError(null);\r\n\r\n\t\ttry {\r\n\t\t\tawait checkBackend(); // Make sure backend is reachable first\r\n\r\n\t\t\tconsole.log(\"Fetching data from all endpoints...\");\r\n\r\n\t\t\t// Use Promise.allSettled to handle partial failures gracefully\r\n\t\t\tconst endpoints = [\r\n\t\t\t\t{ name: \"packages\", url: \"/packages\" },\r\n\t\t\t\t{ name: \"products\", url: \"/products\" },\r\n\t\t\t\t{ name: \"customers\", url: \"/users/customers\" },\r\n\t\t\t\t{ name: \"resellers\", url: \"/users/resellers\" },\r\n\t\t\t];\r\n\r\n\t\t\tconst results = await Promise.allSettled(\r\n\t\t\t\tendpoints.map((endpoint) => api.get(endpoint.url))\r\n\t\t\t);\r\n\r\n\t\t\t// Process each result individually\r\n\t\t\tlet hasError = false;\r\n\t\t\tlet errorMessages = [];\r\n\r\n\t\t\t// Handle packages result\r\n\t\t\tconst packagesResult = results[0];\r\n\t\t\tif (packagesResult.status === \"fulfilled\") {\r\n\t\t\t\tconsole.log(\"Packages loaded:\", packagesResult.value.data);\r\n\t\t\t\tsetPackages(packagesResult.value.data);\r\n\t\t\t} else {\r\n\t\t\t\tconsole.error(\"Failed to load packages:\", packagesResult.reason);\r\n\t\t\t\thasError = true;\r\n\t\t\t\terrorMessages.push(\r\n\t\t\t\t\t`Error fetching packages: ${packagesResult.reason.message}`\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\t// Handle products result\r\n\t\t\tconst productsResult = results[1];\r\n\t\t\tif (productsResult.status === \"fulfilled\") {\r\n\t\t\t\tconsole.log(\"Products loaded:\", productsResult.value.data);\r\n\t\t\t\tsetProducts(productsResult.value.data);\r\n\t\t\t} else {\r\n\t\t\t\tconsole.error(\"Failed to load products:\", productsResult.reason);\r\n\t\t\t\thasError = true;\r\n\t\t\t\terrorMessages.push(\r\n\t\t\t\t\t`Error fetching products: ${productsResult.reason.message}`\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\t// Handle customers result\r\n\t\t\tconst customersResult = results[2];\r\n\t\t\tif (customersResult.status === \"fulfilled\") {\r\n\t\t\t\tconsole.log(\"Customers loaded:\", customersResult.value.data);\r\n\t\t\t\tsetCustomers(customersResult.value.data);\r\n\t\t\t} else {\r\n\t\t\t\tconsole.error(\"Failed to load customers:\", customersResult.reason);\r\n\t\t\t\thasError = true;\r\n\t\t\t\terrorMessages.push(\r\n\t\t\t\t\t`Error fetching customers: ${customersResult.reason.message}`\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\t// Handle resellers result\r\n\t\t\tconst resellersResult = results[3];\r\n\t\t\tif (resellersResult.status === \"fulfilled\") {\r\n\t\t\t\tconsole.log(\"Resellers loaded:\", resellersResult.value.data);\r\n\t\t\t\tsetResellers(resellersResult.value.data);\r\n\t\t\t} else {\r\n\t\t\t\tconsole.error(\"Failed to load resellers:\", resellersResult.reason);\r\n\t\t\t\thasError = true;\r\n\t\t\t\terrorMessages.push(\r\n\t\t\t\t\t`Error fetching resellers: ${resellersResult.reason.message}`\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tif (hasError) {\r\n\t\t\t\tsetError(errorMessages.join(\". \"));\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error(\"Data fetch error:\", err);\r\n\t\t\tsetError(\r\n\t\t\t\t`Connection error: ${err.message}. Please check if the backend server is running.`\r\n\t\t\t);\r\n\t\t} finally {\r\n\t\t\tsetIsLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\tconst checkBackend = async () => {\r\n\t\ttry {\r\n\t\t\tconst response = await fetch(\"http://localhost:3001/api/health-check\");\r\n\t\t\tif (!response.ok) throw new Error(\"Backend not healthy\");\r\n\t\t\treturn true;\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"Backend check failed:\", error);\r\n\t\t\tthrow new Error(\r\n\t\t\t\t\"Backend tidak dapat dihubungi. Silakan coba lagi nanti.\"\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\tconst fetchProducts = async () => {\r\n\t\tsetIsLoading(true);\r\n\t\ttry {\r\n\t\t\tconst response = await api.get(\"/products\");\r\n\t\t\tconsole.log(\"Products data:\", response.data);\r\n\t\t\tsetProducts(response.data);\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error(\"Error fetching products:\", err);\r\n\t\t\tsetError(\"Failed to load products: \" + err.message);\r\n\t\t} finally {\r\n\t\t\tsetIsLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\tconst fetchPackages = async () => {\r\n\t\tsetIsLoading(true);\r\n\t\ttry {\r\n\t\t\tconsole.log(\"Fetching packages...\");\r\n\t\t\tconst response = await api.get(\"/packages\");\r\n\t\t\tconsole.log(\"Packages data:\", response.data);\r\n\r\n\t\t\tif (!Array.isArray(response.data)) {\r\n\t\t\t\tthrow new Error(\"Invalid packages data format\");\r\n\t\t\t}\r\n\r\n\t\t\tsetPackages(response.data);\r\n\t\t\treturn response.data;\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"Package fetch error:\", error);\r\n\t\t\tsetError(\r\n\t\t\t\t\"Failed to load packages: \" +\r\n\t\t\t\t\t(error.response?.data?.message || error.message)\r\n\t\t\t);\r\n\t\t} finally {\r\n\t\t\tsetIsLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\t// Product handlers\r\n\tconst handleProductChange = (e) => {\r\n\t\tconst { name, value } = e.target;\r\n\t\tsetNewProduct((prev) => ({\r\n\t\t\t...prev,\r\n\t\t\t[name]: name === \"price\" ? parseFloat(value) || 0 : value,\r\n\t\t}));\r\n\t};\r\n\r\n\tconst createProduct = async () => {\r\n\t\tsetIsCreating(true);\r\n\t\ttry {\r\n\t\t\tconst response = await api.post(\"/products\", newProduct);\r\n\t\t\tsetNewProduct({ name: \"\", price: 0, description: \"\" });\r\n\t\t\tawait fetchProducts(); // Refresh products after creation\r\n\t\t\treturn response.data;\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error(\"Failed to create product\", err);\r\n\t\t\tsetError(\"Failed to create product: \" + err.message);\r\n\t\t\tthrow err;\r\n\t\t} finally {\r\n\t\t\tsetIsCreating(false);\r\n\t\t}\r\n\t};\r\n\r\n\t// Handle product edit\r\n\tconst handleProductEdit = async (product) => {\r\n\t\tsetIsLoading(true);\r\n\t\tsetError(null);\r\n\t\ttry {\r\n\t\t\tawait api.put(`/products/${product.id}`, product);\r\n\t\t\tawait fetchProducts();\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error(\"Failed to update product\", err);\r\n\t\t\tsetError(\"Failed to update product: \" + err.message);\r\n\t\t\tthrow err;\r\n\t\t} finally {\r\n\t\t\tsetIsLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\t// Handle product delete\r\n\tconst handleProductDelete = async (productId) => {\r\n\t\tsetIsLoading(true);\r\n\t\tsetError(null);\r\n\t\ttry {\r\n\t\t\tawait api.delete(`/products/${productId}`);\r\n\t\t\tawait fetchProducts();\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error(\"Failed to delete product\", err);\r\n\t\t\tsetError(\"Failed to delete product: \" + err.message);\r\n\t\t} finally {\r\n\t\t\tsetIsLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\t// Package handlers\r\n\tconst handlePackageChange = (e) => {\r\n\t\tconst { name, value } = e.target;\r\n\t\tsetNewPackage((prev) => ({\r\n\t\t\t...prev,\r\n\t\t\t[name]: name === \"payment_amount\" ? parseFloat(value) || 0 : value,\r\n\t\t}));\r\n\t};\r\n\r\n\tconst toggleProductInPackage = (productId) => {\r\n\t\tsetNewPackage((prev) => {\r\n\t\t\tconst productIds = prev.productIds.includes(productId)\r\n\t\t\t\t? prev.productIds.filter((id) => id !== productId)\r\n\t\t\t\t: [...prev.productIds, productId];\r\n\r\n\t\t\t// Calculate total price of selected products\r\n\t\t\tconst selectedProducts = products.filter((p) =>\r\n\t\t\t\tproductIds.includes(p.id)\r\n\t\t\t);\r\n\t\t\tconst totalAmount = selectedProducts.reduce(\r\n\t\t\t\t(sum, product) => sum + product.price,\r\n\t\t\t\t0\r\n\t\t\t);\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...prev,\r\n\t\t\t\tproductIds,\r\n\t\t\t\tpayment_amount: totalAmount,\r\n\t\t\t};\r\n\t\t});\r\n\t};\r\n\r\n\tconst createPackage = async () => {\r\n\t\tsetIsCreating(true);\r\n\t\ttry {\r\n\t\t\tconst response = await api.post(\"/packages\", {\r\n\t\t\t\tname: newPackage.name,\r\n\t\t\t\tdescription: newPackage.description,\r\n\t\t\t\tpayment_method: newPackage.payment_method.toUpperCase(),\r\n\t\t\t\tpayment_amount: parseFloat(newPackage.payment_amount),\r\n\t\t\t\tpayment_months: parseInt(newPackage.payment_months), // Ensure it's a number\r\n\t\t\t\tproductIds: newPackage.productIds,\r\n\t\t\t});\r\n\r\n\t\t\tconsole.log(\"Package created:\", response.data);\r\n\t\t\talert(\"Package created successfully!\");\r\n\r\n\t\t\t// Reset form\r\n\t\t\tsetNewPackage({\r\n\t\t\t\tname: \"\",\r\n\t\t\t\tdescription: \"\",\r\n\t\t\t\tpayment_method: \"daily\",\r\n\t\t\t\tpayment_amount: 0,\r\n\t\t\t\tpayment_months: 0,\r\n\t\t\t\tproductIds: [],\r\n\t\t\t});\r\n\r\n\t\t\t// Refresh data\r\n\t\t\tawait fetchPackages();\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"Error creating package:\", error);\r\n\t\t\tsetError(\r\n\t\t\t\t`Failed to create package: ${\r\n\t\t\t\t\terror.response?.data?.message || error.message\r\n\t\t\t\t}`\r\n\t\t\t);\r\n\t\t\talert(`Failed: ${error.response?.data?.message || error.message}`);\r\n\t\t} finally {\r\n\t\t\tsetIsCreating(false);\r\n\t\t}\r\n\t};\r\n\r\n\tconst createReseller = async (resellerData) => {\r\n\t\tsetIsLoading(true);\r\n\t\tsetError(null);\r\n\t\ttry {\r\n\t\t\t// Ensure username is included in the resellerData\r\n\t\t\tif (!resellerData.username) {\r\n\t\t\t\tthrow new Error(\"Username is required\");\r\n\t\t\t}\r\n\t\t\tconst response = await api.post(`/users/resellers`, resellerData);\r\n\t\t\tsetResellers((prev) => [...prev, response.data]);\r\n\t\t\treturn response.data;\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error(\"Failed to create reseller\", err);\r\n\t\t\tsetError(err.response?.data?.message || \"Failed to create reseller\");\r\n\t\t\tthrow err;\r\n\t\t} finally {\r\n\t\t\tsetIsLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\tconst updateReseller = async (id, updateData) => {\r\n\t\tsetIsLoading(true);\r\n\t\tsetError(null);\r\n\t\ttry {\r\n\t\t\tconst response = await api.put(`/users/resellers/${id}`, updateData);\r\n\t\t\tsetResellers((prev) =>\r\n\t\t\t\tprev.map((r) => (r.id === id ? response.data : r))\r\n\t\t\t);\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error(\"Failed to update reseller\", err);\r\n\t\t\tsetError(\"Failed to update reseller: \" + err.message);\r\n\t\t} finally {\r\n\t\t\tsetIsLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleEditPackage = async (packageData) => {\r\n\t\ttry {\r\n\t\t\tconst response = await api.put(`/packages/${packageData.id}`, {\r\n\t\t\t\t...packageData,\r\n\t\t\t\tproductIds: packageData.productIds,\r\n\t\t\t});\r\n\t\t\tawait fetchPackages();\r\n\t\t\treturn response.data;\r\n\t\t} catch (error) {\r\n\t\t\tthrow error;\r\n\t\t}\r\n\t};\r\n\r\n\tconst deleteReseller = async (id) => {\r\n\t\tsetIsLoading(true);\r\n\t\tsetError(null);\r\n\t\ttry {\r\n\t\t\tawait api.delete(`/users/resellers/${id}`);\r\n\t\t\tsetResellers((prev) => prev.filter((r) => r.id !== id));\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error(\"Failed to delete reseller\", err);\r\n\t\t\tsetError(\"Failed to delete reseller: \" + err.message);\r\n\t\t} finally {\r\n\t\t\tsetIsLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\t// Handle package edit\r\n\tconst handlePackageEdit = async (pkg) => {\r\n\t\tsetIsLoading(true);\r\n\t\tsetError(null);\r\n\t\ttry {\r\n\t\t\tawait api.put(`/packages/${pkg.id}`, {\r\n\t\t\t\tname: pkg.name,\r\n\t\t\t\tdescription: pkg.description,\r\n\t\t\t\tpayment_method: pkg.payment_method.toUpperCase(),\r\n\t\t\t\tpayment_amount: parseFloat(pkg.payment_amount),\r\n\t\t\t\tpayment_months: pkg.payment_months,\r\n\t\t\t\tproductIds: pkg.productIds,\r\n\t\t\t});\r\n\t\t\tawait fetchPackages();\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error(\"Failed to update package\", err);\r\n\t\t\tsetError(\"Failed to update package: \" + err.message);\r\n\t\t\tthrow err;\r\n\t\t} finally {\r\n\t\t\tsetIsLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleEditProduct = async (productId, productData) => {\r\n\t\ttry {\r\n\t\t\tconst response = await api.put(`/products/${productId}`, productData);\r\n\t\t\t// Refresh your packages to show the updated product\r\n\t\t\tawait fetchPackages();\r\n\t\t\treturn response.data;\r\n\t\t} catch (error) {\r\n\t\t\tthrow error;\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleDeleteConfirm = async () => {\r\n\t\tif (!deletePackageId) return;\r\n\r\n\t\ttry {\r\n\t\t\tawait onDelete(deletePackageId);\r\n\t\t\tsetNotification({\r\n\t\t\t\ttype: \"success\",\r\n\t\t\t\tmessage: \"Package deleted successfully\",\r\n\t\t\t});\r\n\t\t\tcloseDeleteModal();\r\n\t\t\tawait onRefresh(); // Refresh the package list\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error(\"Delete error:\", err.response?.data || err.message);\r\n\t\t\tsetNotification({\r\n\t\t\t\ttype: \"error\",\r\n\t\t\t\tmessage:\r\n\t\t\t\t\terr.response?.data?.message ||\r\n\t\t\t\t\t\"Failed to delete package. Please try again.\",\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t// Handle package delete\r\n\tconst handlePackageDelete = async (packageId) => {\r\n\t\tsetIsLoading(true);\r\n\t\tsetError(null);\r\n\t\ttry {\r\n\t\t\tawait api.delete(`/packages/${packageId}`);\r\n\t\t\tawait fetchPackages();\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error(\"Delete error details:\", err.response?.data || err.message);\r\n\t\t\tsetError(\r\n\t\t\t\terr.response?.data?.message ||\r\n\t\t\t\t\t\"Failed to delete package. It may still contain products.\"\r\n\t\t\t);\r\n\t\t} finally {\r\n\t\t\tsetIsLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\t// Payment confirmation\r\n\tconst handleConfirmPayment = async (selectedDates) => {\r\n\t\tif (!selectedCustomer || !selectedPackage) {\r\n\t\t\talert(\"Please select both customer and package to confirm payment.\");\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsetIsLoading(true);\r\n\t\ttry {\r\n\t\t\tconst payments = selectedDates.map((date) => ({\r\n\t\t\t\tuser_id: selectedCustomer.id,\r\n\t\t\t\tpackage_id: selectedPackage.id,\r\n\t\t\t\tpayment_date: new Date(date).toISOString(),\r\n\t\t\t\tamount: selectedPackage.payment_amount,\r\n\t\t\t\tstatus: \"confirmed\",\r\n\t\t\t\tpayment_start_date: paymentStartDate.toISOString(),\r\n\t\t\t\tpayment_months: paymentmonths,\r\n\t\t\t}));\r\n\r\n\t\t\tawait api.post(\"/payments/bulk\", { payments });\r\n\t\t\talert(\"Payments confirmed successfully!\");\r\n\t\t\tawait fetchData();\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error(\"Failed to confirm payment\", err);\r\n\t\t\tsetError(\"Failed to confirm payments: \" + err.message);\r\n\t\t\talert(\"Failed to confirm payments: \" + err.message);\r\n\t\t} finally {\r\n\t\t\tsetIsLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleProductSelect = (product) => {\r\n\t\tsetSelectedProduct(product);\r\n\t\tnavigate(`/admin/products/${product.id}`);\r\n\t};\r\n\r\n\tconst addCustomer = async (resellerId, customerData) => {\r\n\t\tsetIsLoading(true);\r\n\t\tsetError(null);\r\n\t\ttry {\r\n\t\t\tconst response = await api.post(\r\n\t\t\t\t`/resellers/${resellerId}/customers`,\r\n\t\t\t\tcustomerData\r\n\t\t\t);\r\n\t\t\tsetCustomers((prev) => [...prev, response.data]);\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error(\"Failed to add customer\", err);\r\n\t\t\tsetError(\"Failed to add customer: \" + err.message);\r\n\t\t} finally {\r\n\t\t\tsetIsLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\tconst updateCustomer = async (id, updateData) => {\r\n\t\tsetIsLoading(true);\r\n\t\tsetError(null);\r\n\t\ttry {\r\n\t\t\tconst response = await api.put(`/customers/${id}`, updateData);\r\n\t\t\tsetCustomers((prev) =>\r\n\t\t\t\tprev.map((c) => (c.id === id ? response.data : c))\r\n\t\t\t);\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error(\"Failed to update customer\", err);\r\n\t\t\tsetError(\"Failed to update customer: \" + err.message);\r\n\t\t} finally {\r\n\t\t\tsetIsLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\tconst deleteCustomer = async (id) => {\r\n\t\tsetIsLoading(true);\r\n\t\tsetError(null);\r\n\t\ttry {\r\n\t\t\tawait api.delete(`/customers/${id}`);\r\n\t\t\tsetCustomers((prev) => prev.filter((c) => c.id !== id));\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error(\"Failed to delete customer\", err);\r\n\t\t\tsetError(\"Failed to delete customer: \" + err.message);\r\n\t\t} finally {\r\n\t\t\tsetIsLoading(false);\r\n\t\t}\r\n\t};\r\n\tconst updateCustomerPackage = async (id, packageData) => {\r\n\t\tsetIsLoading(true);\r\n\t\tsetError(null);\r\n\t\ttry {\r\n\t\t\tconst response = await api.put(`/customers/${id}/package`, packageData);\r\n\t\t\tsetCustomers((prev) =>\r\n\t\t\t\tprev.map((c) => (c.id === id ? response.data : c))\r\n\t\t\t);\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error(\"Failed to update customer package\", err);\r\n\t\t\tsetError(\"Failed to update customer package: \" + err.message);\r\n\t\t} finally {\r\n\t\t\tsetIsLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\tconst calculateDailyRate = (packageAmount, paymentMethod) => {\r\n\t\tswitch (paymentMethod) {\r\n\t\t\tcase \"daily\":\r\n\t\t\t\treturn packageAmount;\r\n\t\t\tcase \"weekly\":\r\n\t\t\t\treturn packageAmount / 7;\r\n\t\t\tcase \"monthly\":\r\n\t\t\t\treturn packageAmount / 30;\r\n\t\t\tdefault:\r\n\t\t\t\treturn packageAmount;\r\n\t\t}\r\n\t};\r\n\r\n\tconst calculateTotalAmount = () => {\r\n\t\tif (!selectedPackage) return 0;\r\n\r\n\t\tconst dailyRate = calculateDailyRate(\r\n\t\t\tselectedPackage.payment_amount,\r\n\t\t\tselectedPackage.payment_method\r\n\t\t);\r\n\t\tconst total = selectedDates.length * dailyRate;\r\n\t\tsetTotalAmount(total);\r\n\t};\r\n\r\n\tconst handleDateSelect = (date) => {\r\n\t\tconst dateStr = format(date, \"yyyy-MM-dd\");\r\n\r\n\t\t// Check if date is already paid\r\n\t\tif (currentUser && currentUser.paid_dates.includes(dateStr)) {\r\n\t\t\treturn; // Already paid, can't select\r\n\t\t}\r\n\r\n\t\tsetSelectedDates((prev) => {\r\n\t\t\tif (prev.includes(dateStr)) {\r\n\t\t\t\treturn prev.filter((d) => d !== dateStr);\r\n\t\t\t} else {\r\n\t\t\t\treturn [...prev, dateStr];\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\t// Payment handlers\r\n\tconst handlePaymentSubmit = async (paymentData) => {\r\n\t\ttry {\r\n\t\t\t// 1. Send payment data to backend\r\n\t\t\tconst response = await api.post(\"/payments\", paymentData);\r\n\r\n\t\t\t// 2. Update local state\r\n\t\t\tsetCustomers((prevCustomers) =>\r\n\t\t\t\tprevCustomers.map((c) => {\r\n\t\t\t\t\tif (c.id === paymentData.customerId) {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t...c,\r\n\t\t\t\t\t\t\tpaid_amount: (c.paid_amount || 0) + paymentData.amount,\r\n\t\t\t\t\t\t\tpaid_dates: [\r\n\t\t\t\t\t\t\t\t...(c.paid_dates || []),\r\n\t\t\t\t\t\t\t\t...paymentData.selectedDates,\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\tpayment_history: [\r\n\t\t\t\t\t\t\t\t...(c.payment_history || []),\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tdate: format(new Date(paymentData.paymentDate)),\r\n\t\t\t\t\t\t\t\t\tamount: paymentData.amount,\r\n\t\t\t\t\t\t\t\t\tdates: paymentData.selectedDates,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn c;\r\n\t\t\t\t})\r\n\t\t\t);\r\n\r\n\t\t\t// 3. Show success notification\r\n\t\t\ttoast.success(\"Payment confirmed successfully\");\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"Payment failed:\", error);\r\n\t\t\ttoast.error(`Payment failed: ${error.message}`);\r\n\t\t}\r\n\t};\r\n\r\n\t// Calculate total price for package preview\r\n\tconst calculatePackageTotal = () => {\r\n\t\treturn newPackage.productIds.reduce((total, productId) => {\r\n\t\t\tconst product = products.find((p) => p.id === productId);\r\n\t\t\treturn total + (product?.price || 0);\r\n\t\t}, 0);\r\n\t};\r\n\r\n\tconst renderTabContent = () => {\r\n\t\tswitch (activeTab) {\r\n\t\t\tcase \"products\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\r\n\t\t\t\t\t\t<ProductForm\r\n\t\t\t\t\t\t\tnewProduct={newProduct}\r\n\t\t\t\t\t\t\thandleProductChange={handleProductChange}\r\n\t\t\t\t\t\t\tcreateProduct={createProduct}\r\n\t\t\t\t\t\t\tisLoading={isCreating}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<ProductList\r\n\t\t\t\t\t\t\tproducts={products}\r\n\t\t\t\t\t\t\tonProductSelect={handleProductSelect}\r\n\t\t\t\t\t\t\tselectedProductId={selectedProduct?.id}\r\n\t\t\t\t\t\t\tisLoading={isLoading}\r\n\t\t\t\t\t\t\tonRefresh={fetchProducts}\r\n\t\t\t\t\t\t\terror={error}\r\n\t\t\t\t\t\t\tonEdit={handleProductEdit}\r\n\t\t\t\t\t\t\tonDelete={handleProductDelete}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\tcase \"packages\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"w-full grid grid-cols-1 lg:grid-cols-2 gap-8\">\r\n\t\t\t\t\t\t<PackageForm\r\n\t\t\t\t\t\t\tnewPackage={newPackage}\r\n\t\t\t\t\t\t\tproducts={products}\r\n\t\t\t\t\t\t\thandlePackageChange={handlePackageChange}\r\n\t\t\t\t\t\t\ttoggleProductInPackage={toggleProductInPackage}\r\n\t\t\t\t\t\t\tcalculatePackageTotal={calculatePackageTotal}\r\n\t\t\t\t\t\t\tcreatePackage={createPackage}\r\n\t\t\t\t\t\t\tisLoading={isCreating}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<PackageList\r\n\t\t\t\t\t\t\tpackages={packages}\r\n\t\t\t\t\t\t\tproducts={products}\r\n\t\t\t\t\t\t\tisLoading={isLoading}\r\n\t\t\t\t\t\t\terror={error}\r\n\t\t\t\t\t\t\tonRefresh={fetchPackages}\r\n\t\t\t\t\t\t\tonEdit={handlePackageEdit} // <-- Pass the edit handler\r\n\t\t\t\t\t\t\tonEditProduct={handleEditProduct}\r\n\t\t\t\t\t\t\tonEditPackage={handleEditPackage}\r\n\t\t\t\t\t\t\tonDelete={handlePackageDelete} // <-- Pass the delete handler\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\tcase \"customers\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"bg-white rounded-xl shadow-md p-6\">\r\n\t\t\t\t\t\t<h2 className=\"text-2xl font-bold mb-6 text-gray-800\">\r\n\t\t\t\t\t\t\tAkun Customer Management\r\n\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t<CustomerTable\r\n\t\t\t\t\t\t\tcustomers={customers}\r\n\t\t\t\t\t\t\tpackages={packages}\r\n\t\t\t\t\t\t\tonSelectCustomer={setSelectedCustomer}\r\n\t\t\t\t\t\t\tisLoading={isLoading}\r\n\t\t\t\t\t\t\terror={error}\r\n\t\t\t\t\t\t\tonRefresh={() => fetchData()}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\tcase \"resellers\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"bg-white rounded-xl shadow-md p-6\">\r\n\t\t\t\t\t\t<h2 className=\"text-2xl font-bold mb-6 text-gray-800\">\r\n\t\t\t\t\t\t\tReseller Management\r\n\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t<ResellerTable\r\n\t\t\t\t\t\t\tresellers={resellers}\r\n\t\t\t\t\t\t\tcustomers={customers}\r\n\t\t\t\t\t\t\tpackages={packages}\r\n\t\t\t\t\t\t\tonCreateReseller={createReseller}\r\n\t\t\t\t\t\t\tonUpdateReseller={updateReseller}\r\n\t\t\t\t\t\t\tonDeleteReseller={deleteReseller}\r\n\t\t\t\t\t\t\tonAddCustomer={addCustomer}\r\n\t\t\t\t\t\t\tonUpdateCustomer={updateCustomer}\r\n\t\t\t\t\t\t\tonDeleteCustomer={deleteCustomer}\r\n\t\t\t\t\t\t\tonUpdateCustomerPackage={updateCustomerPackage}\r\n\t\t\t\t\t\t\tisLoading={isLoading}\r\n\t\t\t\t\t\t\terror={error}\r\n\t\t\t\t\t\t\tonRefresh={() => fetchData()}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\tcase \"confirmations\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<PaymentConfirmation\r\n\t\t\t\t\t\tcustomers={customers}\r\n\t\t\t\t\t\tpackages={packages}\r\n\t\t\t\t\t\tselectedCustomer={selectedCustomer}\r\n\t\t\t\t\t\tsetSelectedCustomer={setSelectedCustomer}\r\n\t\t\t\t\t\tselectedPackage={selectedPackage}\r\n\t\t\t\t\t\tsetSelectedPackage={setSelectedPackage}\r\n\t\t\t\t\t\tpaymentStartDate={paymentStartDate}\r\n\t\t\t\t\t\tsetPaymentStartDate={setPaymentStartDate}\r\n\t\t\t\t\t\tpaymentMonths={paymentMonths}\r\n\t\t\t\t\t\tsetPaymentMonths={setPaymentMonths}\r\n\t\t\t\t\t\tonConfirm={handleConfirmPayment}\r\n\t\t\t\t\t\tisLoading={isLoading}\r\n\t\t\t\t\t\terror={error}\r\n\t\t\t\t\t\tonClose={() => setShowPaymentModal(false)}\r\n\t\t\t\t\t\tonSubmit={handlePaymentSubmit}\r\n\t\t\t\t\t/>\r\n\t\t\t\t);\r\n\t\t\tdefault:\r\n\t\t\t\treturn null;\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<AdminLayout activeTab={activeTab} setActiveTab={setActiveTab}>\r\n\t\t\t{error && (\r\n\t\t\t\t<div className=\"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-6 rounded\">\r\n\t\t\t\t\t<p className=\"font-bold\">Error</p>\r\n\t\t\t\t\t<p>{error}</p>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName=\"mt-2 bg-red-200 hover:bg-red-300 text-red-800 font-bold py-1 px-3 rounded\"\r\n\t\t\t\t\t\tonClick={() => fetchData()}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tRefresh Data\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t\t{isLoading && (\r\n\t\t\t\t<div className=\"bg-blue-100 border-l-4 border-blue-500 text-blue-700 p-4 mb-6 rounded\">\r\n\t\t\t\t\t<p className=\"font-bold\">Loading...</p>\r\n\t\t\t\t\t<p>Please wait while we fetch the data.</p>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t\t{renderTabContent()}\r\n\t\t</AdminLayout>\r\n\t);\r\n}\r\n\r\nexport default AdminPanel;\r\n"],"names":["_ref","startDate","months","paymentMethod","onConfirm","selectedDates","setSelectedDates","useState","addDays","date","days","result","Date","setDate","getDate","calendar","generateCalendar","start","m","currentMonth","getFullYear","getMonth","monthData","month","monthName","toLocaleString","year","weeks","currentWeekStart","push","daysInMonth","d","toggleDate","dateStr","toISOString","split","prev","includes","filter","_jsxs","className","children","map","_ref2","idx","length","_jsx","week","i","onClick","concat","day","handleConfirm","alert","disabled","activeTab","setActiveTab","tab","charAt","toUpperCase","slice","newProduct","handleProductChange","createProduct","isLoading","isFocused","setIsFocused","name","price","description","isSuccess","setIsSuccess","fill","viewBox","fillRule","clipRule","onSubmit","async","e","preventDefault","setTimeout","error","console","type","value","onChange","onFocus","_objectSpread","onBlur","placeholder","required","target","replace","toString","rows","xmlns","cx","cy","r","stroke","strokeWidth","isOpen","title","onClose","size","sm","md","lg","xl","stopPropagation","strokeLinecap","strokeLinejoin","products","onProductSelect","selectedProductId","onRefresh","onEdit","onDelete","editProduct","setEditProduct","showEditModal","setShowEditModal","showDeleteModal","setShowDeleteModal","deleteProductId","setDeleteProductId","formData","setFormData","formLoading","setFormLoading","formError","setFormError","notification","setNotification","closeEditModal","closeDeleteModal","handleFormChange","parseFloat","product","id","openEditModal","productId","Modal","err","message","min","step","_Fragment","newPackage","handlePackageChange","toggleProductInPackage","calculatePackageTotal","createPackage","searchTerm","setSearchTerm","currentPage","setCurrentPage","isAnimating","setIsAnimating","showValidation","setShowValidation","filteredProducts","useMemo","toLowerCase","totalPages","Math","ceil","startIndex","endIndex","currentProducts","formErrors","validateForm","errors","trim","payment_amount","payment_months","productIds","isFormValid","handlePageChange","newPage","handleOtherPackageChange","hasFieldError","fieldName","window","scrollTo","top","behavior","index","payment_method","event","checked","Array","from","_","page","array","React","packages","onEditProduct","itemsPerPage","setItemsPerPage","editPackage","setEditPackage","deletePackageId","setDeletePackageId","allProducts","setAllProducts","showAddProductModal","setShowAddProductModal","selectedProductToAdd","setSelectedProductToAdd","searchQuery","setSearchQuery","showProductEditModal","setShowProductEditModal","currentProduct","setCurrentProduct","productFormData","setProductFormData","filteredPackages","pkg","indexOfLastItem","indexOfFirstItem","currentPackages","useEffect","response","api","get","data","fetchAllProducts","p","openProductEditModal","closeProductEditModal","handleProductFormChange","Number","num","_pkg$products","_pkg$payment_method2","_pkg$payment_method3","_pkg$payment_method4","_pkg$payment_method5","_pkg$payment_method6","_pkg$products2","totalAmount","reduce","sum","_pkg$payment_method","openDeleteModal","packageId","scope","prevPage","pageNum","nextPage","find","handleRemoveProduct","max","Icons","Plus","width","height","x1","y1","x2","y2","Edit","Delete","points","Key","Eye","X","CheckCircle","AlertCircle","Notification","bgColor","textColor","borderColor","Icon","timer","clearTimeout","role","Button","_ref3","variant","props","_objectWithoutProperties","_excluded","variants","primary","secondary","success","danger","warning","info","variantClasses","Input","_ref4","label","_excluded2","htmlFor","Select","_ref5","_excluded3","Badge","_ref6","_ref7","customers","onSelectCustomer","editingCustomer","setEditingCustomer","newCustomerData","setNewCustomerData","username","password","phone","package_id","package_start_date","showCreateModal","setShowCreateModal","showResetPasswordModal","setShowResetPasswordModal","resetPasswordCustomerId","setResetPasswordCustomerId","newPassword","setNewPassword","setErrors","currentUser","JSON","parse","localStorage","getItem","isCreate","arguments","undefined","handleInputChange","handleDateChange","formatDateForInput","dateString","padStart","closeModals","confirmDelete","customerId","confirm","delete","_error$response4","_error$response4$data","deleteCustomer","customerPackageName","customer","filteredCustomers","style","document","createElement","innerText","head","appendChild","closeNotification","openCreateModal","validationErrors","Object","keys","some","payload","post","_error$response","_error$response2","_error$response2$data","put","_error$response3","_error$response3$data","log","_error$response5","_error$response5$data","colSpan","openResetPasswordModal","resellers","onCreateReseller","onUpdateReseller","onDeleteReseller","resetPasswordResellerId","setResetPasswordResellerId","navigate","useNavigate","resellerData","setResellerData","editingReseller","setEditingReseller","resellerId","deleteReseller","updateData","reseller","c","reseller_id","handleViewCustomers","_getPaymentMethodIndo2","paymentAmount","setPaymentAmount","paymentDate","setPaymentDate","paidDates","setPaidDates","isSubmitting","setIsSubmitting","currentMonthIndex","setCurrentMonthIndex","isExporting","setIsExporting","customerPackage","isArray","paid_dates","fetchPaidDates","calculatePaymentAmount","amount","dailyRate","getPaymentMethodIndonesian","method","startOfDay","monthsToShow","addMonths","monthStart","startOfMonth","monthEnd","endOfMonth","firstDayOfWeek","getDay","paddingStart","paddingDate","monthDays","eachDayOfInterval","end","lastDayOfWeek","allCalendarDays","navigateMonth","direction","newIndex","_customerPackage$paym","_getPaymentMethodIndo","paymentHistory","excelData","format","locale","forEach","_paymentRecord$amount","paymentRecord","selected_dates","payment_date","workbook","XLSX","book_new","worksheet","aoa_to_sheet","columnWidths","wch","book_append_sheet","fileName","isPaid","isSelected","isCurrentMonth","isSameMonth","isInPackageRange","packageEndDate","isBefore","isDateInPackageRange","isClickable","handleDateToggle","paymentData","setStartDate","endDate","setEndDate","selectedUserIds","setSelectedUserIds","toggleUserSelection","userId","userIds","selectedCustomer","setSelectedCustomer","selectedPackage","setSelectedPackage","showModal","setShowModal","showExportAllModal","setShowExportAllModal","refreshFlag","setRefreshFlag","customerPaidDates","setCustomerPaidDates","customerPaymentInfo","setCustomerPaymentInfo","sortBy","setSortBy","sortOrder","setSortOrder","loading","setLoading","paymentInfoPromises","_latestPaymentDate","payments","paidDatesSet","Set","latestPaymentDate","totalPaidAmount","payment","payment_dates","add","paymentDateObj","last_payment_date","paid_amount","paymentInfoArray","Promise","all","paymentInfoObj","fetchAllPaymentInfo","filteredAndSortedCustomers","filtered","searchLower","sort","a","b","_customerPaymentInfo$","_customerPaymentInfo$2","_customerPaymentInfo$3","_customerPaymentInfo$4","aValue","bValue","pkgA","pkgB","paginatedCustomers","handleSort","field","formatDate","toLocaleDateString","SortIcon","paymentInfo","handleOpenModal","dates","_payment$amount2","_payment$amount","status","handleExportExcel","PaymentConfirmationModal","handleCloseModal","ExportAllFilterModal","filters","summaryData","queryParams","URLSearchParams","_filters$userIds","append","join","package","totalPaid","lastPayment","customer_name","detailData","_payment$amount4","_payment$amount3","substring","summaryWorksheet","handleExportAllToExcel","setPackages","setCustomers","setProducts","setResellers","paymentStartDate","setPaymentStartDate","paymentMonths","setPaymentMonths","setIsLoading","sortedProducts","setSortedProducts","setError","selectedProduct","setSelectedProduct","stream","setStream","isCreating","setIsCreating","showPaymentModal","setShowPaymentModal","indexOfLastProduct","useRef","setNewProduct","setNewPackage","setItem","fetchData","fetchPackages","fetchProducts","checkBackend","endpoints","url","results","allSettled","endpoint","hasError","errorMessages","packagesResult","reason","productsResult","customersResult","resellersResult","fetch","ok","Error","_error$response$data","handleProductEdit","handleProductDelete","parseInt","createReseller","_err$response","_err$response$data","updateReseller","handleEditPackage","packageData","handlePackageEdit","handleEditProduct","productData","handlePackageDelete","_err$response4","_err$response5","_err$response5$data","handleConfirmPayment","user_id","payment_start_date","paymentmonths","handleProductSelect","addCustomer","customerData","updateCustomer","updateCustomerPackage","handlePaymentSubmit","prevCustomers","payment_history","toast","total","AdminLayout","renderTabContent","ProductForm","ProductList","PackageForm","PackageList","onEditPackage","CustomerTable","ResellerTable","onAddCustomer","onUpdateCustomer","onDeleteCustomer","onUpdateCustomerPackage","PaymentConfirmation"],"sourceRoot":""}