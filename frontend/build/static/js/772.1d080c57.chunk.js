"use strict";(self.webpackChunkramadhan_package_frontend=self.webpackChunkramadhan_package_frontend||[]).push([[772],{221:(e,t,s)=>{s.d(t,{A:()=>l});var a=s(43),n=s(579);const l=function(e){let{startDate:t,months:s,paymentMethod:l,onConfirm:r}=e;const[o,d]=(0,a.useState)([]),c=(e,t)=>{const s=new Date(e);return s.setDate(s.getDate()+t),s},i=(()=>{const e=[],a=new Date(t);for(let t=0;t<s;t++){const s=new Date(a.getFullYear(),a.getMonth()+t,1),n={month:s,monthName:s.toLocaleString("default",{month:"long"}),year:s.getFullYear(),weeks:[],days:[]};if("weekly"===l){let e=new Date(s);for(;e.getMonth()===s.getMonth();)n.weeks.push(new Date(e)),e=c(e,7)}else if("daily"===l){const e=new Date(s.getFullYear(),s.getMonth()+1,0).getDate();for(let t=1;t<=e;t++)n.days.push(new Date(s.getFullYear(),s.getMonth(),t))}e.push(n)}return e})(),m=e=>{const t=e.toISOString().split("T")[0];d((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t]))};return(0,n.jsxs)("div",{className:"p-4 border rounded-lg bg-white shadow-sm",children:[i.map(((e,t)=>{let{month:s,monthName:a,year:l,weeks:r,days:d}=e;return(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsxs)("h3",{className:"text-lg font-semibold mb-3",children:[a," ",l]}),r.length>0&&(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h4",{className:"text-sm font-medium mb-2",children:"Weekly Payments:"}),(0,n.jsx)("div",{className:"flex flex-wrap gap-2",children:r.map(((e,t)=>{const s=e.toISOString().split("T")[0];return(0,n.jsxs)("button",{onClick:()=>m(e),className:"px-3 py-1 rounded-md border text-sm ".concat(o.includes(s)?"bg-blue-600 text-white border-blue-700":"bg-white text-gray-800 border-gray-300 hover:bg-gray-100"),children:["Week ",t+1]},t)}))})]}),d.length>0&&(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h4",{className:"text-sm font-medium mb-2",children:"Daily Payments:"}),(0,n.jsx)("div",{className:"grid grid-cols-7 gap-1",children:d.map(((e,t)=>{const s=e.toISOString().split("T")[0];return(0,n.jsx)("button",{onClick:()=>m(e),className:"p-1 rounded-md text-xs text-center ".concat(o.includes(s)?"bg-blue-600 text-white":"bg-white text-gray-800 hover:bg-gray-100"),children:e.getDate()},t)}))})]})]},t)})),(0,n.jsxs)("button",{onClick:()=>{0!==o.length?(r(o),d([])):alert("Please select at least one payment date")},disabled:0===o.length,className:"mt-4 px-4 py-2 rounded-md text-white ".concat(o.length>0?"bg-green-600 hover:bg-green-700":"bg-gray-400 cursor-not-allowed"),children:["Confirm ",o.length," Payment",1!==o.length?"s":""]})]})}},772:(e,t,s)=>{s.r(t),s.d(t,{default:()=>o});var a=s(43),n=s(722),l=s(221),r=s(579);const o=function(){const[e,t]=(0,a.useState)([]),[s,o]=(0,a.useState)([]),[d,c]=(0,a.useState)(null),[i,m]=(0,a.useState)(new Date),[h,g]=(0,a.useState)(1);(0,a.useEffect)((()=>{u(),x()}),[]);const u=async()=>{try{const e=await n.A.get("http://localhost:3001/api/packages");t(e.data)}catch(e){console.error("Failed to fetch packages",e)}},x=async()=>{try{const e=await n.A.get("http://localhost:3001/api/users?role=customer");o(e.data)}catch(e){console.error("Failed to fetch customers",e)}};return(0,r.jsxs)("div",{className:"p-8 max-w-5xl mx-auto bg-gray-50 min-h-screen",children:[(0,r.jsx)("h1",{className:"text-4xl font-extrabold mb-8 text-center text-gray-900",children:"Reseller Panel"}),(0,r.jsxs)("div",{className:"mb-10 p-6 border rounded-lg bg-white shadow-md",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold mb-6",children:"Customers"}),0===s.length?(0,r.jsx)("p",{className:"text-gray-600",children:"No customers available."}):(0,r.jsx)("ul",{className:"list-disc list-inside max-h-64 overflow-y-auto text-gray-700",children:s.map((e=>(0,r.jsx)("li",{className:"cursor-pointer px-3 py-2 rounded-md hover:bg-indigo-100 ".concat(d&&d.id===e.id?"font-bold text-indigo-700 bg-indigo-200":""),onClick:()=>(e=>{c(e)})(e),children:e.username},e.id)))})]}),(0,r.jsxs)("div",{className:"mb-10 p-6 border rounded-lg bg-white shadow-md",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold mb-6",children:"Packages"}),0===e.length?(0,r.jsx)("p",{className:"text-gray-600",children:"No packages available."}):e.map((e=>(0,r.jsxs)("div",{className:"mb-6 p-6 border rounded-lg bg-gray-50 shadow-sm",children:[(0,r.jsx)("h3",{className:"text-xl font-bold mb-2 text-gray-900",children:e.name}),(0,r.jsx)("p",{className:"mb-2 text-gray-700",children:e.description}),(0,r.jsxs)("p",{className:"mb-1",children:["Payment Method:"," ",(0,r.jsx)("span",{className:"font-semibold text-indigo-600",children:e.payment_method})]}),(0,r.jsxs)("p",{className:"mb-2",children:["Payment Amount:"," ",(0,r.jsxs)("span",{className:"font-semibold text-indigo-600",children:["$",e.payment_amount]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Products:"}),(0,r.jsx)("ul",{className:"list-disc list-inside text-gray-700",children:e.products.map(((e,t)=>(0,r.jsxs)("li",{children:[e.name," - $",e.price]},t)))})]})]},e.id)))]}),d&&(0,r.jsxs)("div",{className:"mb-10 p-6 border rounded-lg bg-white shadow-md",children:[(0,r.jsxs)("h2",{className:"text-2xl font-semibold mb-6",children:["Payment Confirmation Calendar for ",d.username]}),(0,r.jsx)("label",{className:"block mb-2 font-semibold",children:"Start Date:"}),(0,r.jsx)("input",{type:"date",value:i.toISOString().substr(0,10),onChange:e=>m(new Date(e.target.value)),className:"mb-4 border border-gray-300 px-4 py-2 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"}),(0,r.jsx)("label",{className:"block mb-2 font-semibold",children:"Number of Months:"}),(0,r.jsx)("input",{type:"number",min:"1",max:"12",value:h,onChange:e=>g(parseInt(e.target.value)||1),className:"mb-4 border border-gray-300 px-4 py-2 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"}),(0,r.jsx)(l.A,{startDate:i,months:h,paymentMethod:e.length>0?e[0].payment_method:"daily",onConfirm:e=>{console.log("Confirmed payment dates for customer:",e),alert("Payment confirmed for customer "+(d?d.username:"")+" on dates: "+e.join(", "))}})]})]})}}}]);
//# sourceMappingURL=772.1d080c57.chunk.js.map